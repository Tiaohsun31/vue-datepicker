(function(ue,a){typeof exports=="object"&&typeof module<"u"?a(exports,require("vue"),require("dayjs")):typeof define=="function"&&define.amd?define(["exports","vue","dayjs"],a):(ue=typeof globalThis<"u"?globalThis:ue||self,a(ue.VueDatePickerTailwind={},ue.Vue,ue.dayjs))})(this,function(ue,a,ee){"use strict";var ns=Object.defineProperty;var os=(ue,a,ee)=>a in ue?ns(ue,a,{enumerable:!0,configurable:!0,writable:!0,value:ee}):ue[a]=ee;var me=(ue,a,ee)=>os(ue,typeof a!="symbol"?a+"":a,ee);const Re=n=>/^\d+$/.test(n),aa=n=>n%4===0&&n%100!==0||n%400===0;let De=null;function gr(){return De||(De=document.createElement("span"),De.style.visibility="hidden",De.style.position="absolute",De.style.top="-9999px",De.style.left="-9999px",De.style.whiteSpace="pre",document.body.appendChild(De)),De}const Tt=new WeakMap;function yr(n,e=""){const t=gr(),r=getComputedStyle(n);return t.style.font=r.font,t.style.fontSize=r.fontSize,t.style.fontWeight=r.fontWeight,t.style.letterSpacing=r.letterSpacing,t.style.padding=r.padding,t.style.border=r.border,t.style.boxSizing=r.boxSizing,t.textContent=n.value||e||"",t.offsetWidth+4}function ze(n){const e=n.placeholder||"",t=yr(n,e),r=Tt.get(n)||0;n.style.width=`${Math.max(t,r)}px`}const Ve={mounted(n,e){e.value&&typeof e.value=="number"&&Tt.set(n,e.value),ze(n),n.addEventListener("input",()=>ze(n)),document.fonts&&document.fonts.ready&&document.fonts.ready.then(()=>ze(n))},updated(n,e){e.value&&typeof e.value=="number"&&e.oldValue!==e.value&&Tt.set(n,e.value),ze(n)},beforeUnmount(n){n.removeEventListener("input",()=>ze(n))}};function Ue(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Xe={exports:{}},vr=Xe.exports,ra;function $r(){return ra||(ra=1,function(n,e){(function(t,r){n.exports=r()})(vr,function(){var t="minute",r=/[+-]\d\d(?::?\d\d)?/g,o=/([+-]|\d\d)/g;return function(l,s,i){var c=s.prototype;i.utc=function(h){var f={date:h,utc:!0,args:arguments};return new s(f)},c.utc=function(h){var f=i(this.toDate(),{locale:this.$L,utc:!0});return h?f.add(this.utcOffset(),t):f},c.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var m=c.parse;c.parse=function(h){h.utc&&(this.$u=!0),this.$utils().u(h.$offset)||(this.$offset=h.$offset),m.call(this,h)};var y=c.init;c.init=function(){if(this.$u){var h=this.$d;this.$y=h.getUTCFullYear(),this.$M=h.getUTCMonth(),this.$D=h.getUTCDate(),this.$W=h.getUTCDay(),this.$H=h.getUTCHours(),this.$m=h.getUTCMinutes(),this.$s=h.getUTCSeconds(),this.$ms=h.getUTCMilliseconds()}else y.call(this)};var v=c.utcOffset;c.utcOffset=function(h,f){var d=this.$utils().u;if(d(h))return this.$u?0:d(this.$offset)?v.call(this):this.$offset;if(typeof h=="string"&&(h=function(b){b===void 0&&(b="");var V=b.match(r);if(!V)return null;var u=(""+V[0]).match(o)||["-",0,0],p=u[0],$=60*+u[1]+ +u[2];return $===0?0:p==="+"?$:-$}(h),h===null))return this;var k=Math.abs(h)<=16?60*h:h,S=this;if(f)return S.$offset=k,S.$u=h===0,S;if(h!==0){var C=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(S=this.local().add(k+C,t)).$offset=k,S.$x.$localOffset=C}else S=this.utc();return S};var g=c.format;c.format=function(h){var f=h||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return g.call(this,f)},c.valueOf=function(){var h=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*h},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var M=c.toDate;c.toDate=function(h){return h==="s"&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():M.call(this)};var w=c.diff;c.diff=function(h,f,d){if(h&&this.$u===h.$u)return w.call(this,h,f,d);var k=this.local(),S=i(h).local();return w.call(k,S,f,d)}}})}(Xe)),Xe.exports}var Dr=$r();const kr=Ue(Dr);var et={exports:{}},Sr=et.exports,na;function Mr(){return na||(na=1,function(n,e){(function(t,r){n.exports=r()})(Sr,function(){var t={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(o,l,s){var i,c=function(g,M,w){w===void 0&&(w={});var h=new Date(g),f=function(d,k){k===void 0&&(k={});var S=k.timeZoneName||"short",C=d+"|"+S,b=r[C];return b||(b=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:d,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:S}),r[C]=b),b}(M,w);return f.formatToParts(h)},m=function(g,M){for(var w=c(g,M),h=[],f=0;f<w.length;f+=1){var d=w[f],k=d.type,S=d.value,C=t[k];C>=0&&(h[C]=parseInt(S,10))}var b=h[3],V=b===24?0:b,u=h[0]+"-"+h[1]+"-"+h[2]+" "+V+":"+h[4]+":"+h[5]+":000",p=+g;return(s.utc(u).valueOf()-(p-=p%1e3))/6e4},y=l.prototype;y.tz=function(g,M){g===void 0&&(g=i);var w,h=this.utcOffset(),f=this.toDate(),d=f.toLocaleString("en-US",{timeZone:g}),k=Math.round((f-new Date(d))/1e3/60),S=15*-Math.round(f.getTimezoneOffset()/15)-k;if(!Number(S))w=this.utcOffset(0,M);else if(w=s(d,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(S,!0),M){var C=w.utcOffset();w=w.add(h-C,"minute")}return w.$x.$timezone=g,w},y.offsetName=function(g){var M=this.$x.$timezone||s.tz.guess(),w=c(this.valueOf(),M,{timeZoneName:g}).find(function(h){return h.type.toLowerCase()==="timezonename"});return w&&w.value};var v=y.startOf;y.startOf=function(g,M){if(!this.$x||!this.$x.$timezone)return v.call(this,g,M);var w=s(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return v.call(w,g,M).tz(this.$x.$timezone,!0)},s.tz=function(g,M,w){var h=w&&M,f=w||M||i,d=m(+s(),f);if(typeof g!="string")return s(g).tz(f);var k=function(V,u,p){var $=V-60*u*1e3,N=m($,p);if(u===N)return[$,u];var A=m($-=60*(N-u)*1e3,p);return N===A?[$,N]:[V-60*Math.min(N,A)*1e3,Math.max(N,A)]}(s.utc(g,h).valueOf(),d,f),S=k[0],C=k[1],b=s(S).utcOffset(C);return b.$x.$timezone=f,b},s.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},s.tz.setDefault=function(g){i=g}}})}(et)),et.exports}var br=Mr();const wr=Ue(br);var tt={exports:{}},Tr=tt.exports,oa;function xr(){return oa||(oa=1,function(n,e){(function(t,r){n.exports=r()})(Tr,function(){var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,o=/\d/,l=/\d\d/,s=/\d\d?/,i=/\d*[^-_:/,()\s\d]+/,c={},m=function(f){return(f=+f)+(f>68?1900:2e3)},y=function(f){return function(d){this[f]=+d}},v=[/[+-]\d\d:?(\d\d)?|Z/,function(f){(this.zone||(this.zone={})).offset=function(d){if(!d||d==="Z")return 0;var k=d.match(/([+-]|\d\d)/g),S=60*k[1]+(+k[2]||0);return S===0?0:k[0]==="+"?-S:S}(f)}],g=function(f){var d=c[f];return d&&(d.indexOf?d:d.s.concat(d.f))},M=function(f,d){var k,S=c.meridiem;if(S){for(var C=1;C<=24;C+=1)if(f.indexOf(S(C,0,d))>-1){k=C>12;break}}else k=f===(d?"pm":"PM");return k},w={A:[i,function(f){this.afternoon=M(f,!1)}],a:[i,function(f){this.afternoon=M(f,!0)}],Q:[o,function(f){this.month=3*(f-1)+1}],S:[o,function(f){this.milliseconds=100*+f}],SS:[l,function(f){this.milliseconds=10*+f}],SSS:[/\d{3}/,function(f){this.milliseconds=+f}],s:[s,y("seconds")],ss:[s,y("seconds")],m:[s,y("minutes")],mm:[s,y("minutes")],H:[s,y("hours")],h:[s,y("hours")],HH:[s,y("hours")],hh:[s,y("hours")],D:[s,y("day")],DD:[l,y("day")],Do:[i,function(f){var d=c.ordinal,k=f.match(/\d+/);if(this.day=k[0],d)for(var S=1;S<=31;S+=1)d(S).replace(/\[|\]/g,"")===f&&(this.day=S)}],w:[s,y("week")],ww:[l,y("week")],M:[s,y("month")],MM:[l,y("month")],MMM:[i,function(f){var d=g("months"),k=(g("monthsShort")||d.map(function(S){return S.slice(0,3)})).indexOf(f)+1;if(k<1)throw new Error;this.month=k%12||k}],MMMM:[i,function(f){var d=g("months").indexOf(f)+1;if(d<1)throw new Error;this.month=d%12||d}],Y:[/[+-]?\d+/,y("year")],YY:[l,function(f){this.year=m(f)}],YYYY:[/\d{4}/,y("year")],Z:v,ZZ:v};function h(f){var d,k;d=f,k=c&&c.formats;for(var S=(f=d.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(N,A,z){var L=z&&z.toUpperCase();return A||k[z]||t[z]||k[L].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(Q,j,Y){return j||Y.slice(1)})})).match(r),C=S.length,b=0;b<C;b+=1){var V=S[b],u=w[V],p=u&&u[0],$=u&&u[1];S[b]=$?{regex:p,parser:$}:V.replace(/^\[|\]$/g,"")}return function(N){for(var A={},z=0,L=0;z<C;z+=1){var Q=S[z];if(typeof Q=="string")L+=Q.length;else{var j=Q.regex,Y=Q.parser,I=N.slice(L),D=j.exec(I)[0];Y.call(A,D),N=N.replace(D,"")}}return function(P){var O=P.afternoon;if(O!==void 0){var K=P.hours;O?K<12&&(P.hours+=12):K===12&&(P.hours=0),delete P.afternoon}}(A),A}}return function(f,d,k){k.p.customParseFormat=!0,f&&f.parseTwoDigitYear&&(m=f.parseTwoDigitYear);var S=d.prototype,C=S.parse;S.parse=function(b){var V=b.date,u=b.utc,p=b.args;this.$u=u;var $=p[1];if(typeof $=="string"){var N=p[2]===!0,A=p[3]===!0,z=N||A,L=p[2];A&&(L=p[2]),c=this.$locale(),!N&&L&&(c=k.Ls[L]),this.$d=function(I,D,P,O){try{if(["x","X"].indexOf(D)>-1)return new Date((D==="X"?1e3:1)*I);var K=h(D)(I),re=K.year,X=K.month,R=K.day,x=K.hours,F=K.minutes,_=K.seconds,q=K.milliseconds,Z=K.zone,H=K.week,T=new Date,U=R||(re||X?1:T.getDate()),ie=re||T.getFullYear(),ce=0;re&&!X||(ce=X>0?X-1:T.getMonth());var le,de=x||0,E=F||0,W=_||0,te=q||0;return Z?new Date(Date.UTC(ie,ce,U,de,E,W,te+60*Z.offset*1e3)):P?new Date(Date.UTC(ie,ce,U,de,E,W,te)):(le=new Date(ie,ce,U,de,E,W,te),H&&(le=O(le).week(H).toDate()),le)}catch{return new Date("")}}(V,$,u,k),this.init(),L&&L!==!0&&(this.$L=this.locale(L).$L),z&&V!=this.format($)&&(this.$d=new Date("")),c={}}else if($ instanceof Array)for(var Q=$.length,j=1;j<=Q;j+=1){p[1]=$[j-1];var Y=k.apply(this,p);if(Y.isValid()){this.$d=Y.$d,this.$L=Y.$L,this.init();break}j===Q&&(this.$d=new Date(""))}else C.call(this,b)}}})}(tt)),tt.exports}var Er=xr();const la=Ue(Er);var at={exports:{}},Cr=at.exports,sa;function Yr(){return sa||(sa=1,function(n,e){(function(t,r){n.exports=r()})(Cr,function(){var t="week",r="year";return function(o,l,s){var i=l.prototype;i.week=function(c){if(c===void 0&&(c=null),c!==null)return this.add(7*(c-this.week()),"day");var m=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var y=s(this).startOf(r).add(1,r).date(m),v=s(this).endOf(t);if(y.isBefore(v))return 1}var g=s(this).startOf(r).date(m).startOf(t).subtract(1,"millisecond"),M=this.diff(g,t,!0);return M<0?s(this).startOf("week").week():Math.ceil(M)},i.weeks=function(c){return c===void 0&&(c=null),this.week(c)}}})}(at)),at.exports}var Rr=Yr();const Vr=Ue(Rr);var rt={exports:{}},Ir=rt.exports,ia;function Br(){return ia||(ia=1,function(n,e){(function(t,r){n.exports=r()})(Ir,function(){return function(t,r,o){var l=r.prototype,s=function(v){return v&&(v.indexOf?v:v.s)},i=function(v,g,M,w,h){var f=v.name?v:v.$locale(),d=s(f[g]),k=s(f[M]),S=d||k.map(function(b){return b.slice(0,w)});if(!h)return S;var C=f.weekStart;return S.map(function(b,V){return S[(V+(C||0))%7]})},c=function(){return o.Ls[o.locale()]},m=function(v,g){return v.formats[g]||function(M){return M.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(w,h,f){return h||f.slice(1)})}(v.formats[g.toUpperCase()])},y=function(){var v=this;return{months:function(g){return g?g.format("MMMM"):i(v,"months")},monthsShort:function(g){return g?g.format("MMM"):i(v,"monthsShort","months",3)},firstDayOfWeek:function(){return v.$locale().weekStart||0},weekdays:function(g){return g?g.format("dddd"):i(v,"weekdays")},weekdaysMin:function(g){return g?g.format("dd"):i(v,"weekdaysMin","weekdays",2)},weekdaysShort:function(g){return g?g.format("ddd"):i(v,"weekdaysShort","weekdays",3)},longDateFormat:function(g){return m(v.$locale(),g)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};l.localeData=function(){return y.bind(this)()},o.localeData=function(){var v=c();return{firstDayOfWeek:function(){return v.weekStart||0},weekdays:function(){return o.weekdays()},weekdaysShort:function(){return o.weekdaysShort()},weekdaysMin:function(){return o.weekdaysMin()},months:function(){return o.months()},monthsShort:function(){return o.monthsShort()},longDateFormat:function(g){return m(v,g)},meridiem:v.meridiem,ordinal:v.ordinal}},o.months=function(){return i(c(),"months")},o.monthsShort=function(){return i(c(),"monthsShort","months",3)},o.weekdays=function(v){return i(c(),"weekdays",null,null,v)},o.weekdaysShort=function(v){return i(c(),"weekdaysShort","weekdays",3,v)},o.weekdaysMin=function(v){return i(c(),"weekdaysMin","weekdays",2,v)}}})}(rt)),rt.exports}var Or=Br();const Fr=Ue(Or);class Nr{constructor(){me(this,"id","roc");me(this,"yearRange",{min:1,max:200});me(this,"displayName",{"zh-TW":"民國曆","zh-CN":"民国历","en-US":"ROC Calendar","ja-JP":"中華民国暦","ko-KR":"중화민국력"});me(this,"YEAR_OFFSET",1911)}parseInput(e,t){if(!e||typeof e!="string")return null;const o=e.trim().replace(/^(民國|民国|ROC\s*)/i,"").trim();if(/[上下]午|時|分|秒|\d{1,2}:\d{2}/.test(o))return this.parseDateTime(o);{const s=o.replace(/[年月日時分秒]/g,""),i=["-","/","."," "];for(const c of i){const m=this.tryParseWithSeparator(s,c);if(m)return m}}return null}parseDateTime(e){const t=e.match(/^(\d+年\d+月\d+日)\s*(.*)$/);if(!t)return null;const[,r,o]=t,l=this.parseDatePart(r);if(!l)return null;const s=this.parseTimePart(o);return s?{...l,...s}:l}parseDatePart(e){const t=e.match(/(\d+)年(\d+)月(\d+)日/);if(!t)return null;const[,r,o,l]=t,s=parseInt(r),i=parseInt(o),c=parseInt(l);if(isNaN(s)||isNaN(i)||isNaN(c)||s<this.yearRange.min||s>this.yearRange.max)return null;const m=s+this.YEAR_OFFSET;return i<1||i>12||c<1||c>31||!ee(`${m}-${i.toString().padStart(2,"0")}-${c.toString().padStart(2,"0")}`).isValid()?null:{year:m,month:i,day:c}}parseTimePart(e){if(!e)return null;const t=e.trim(),r=t.match(/(上午|下午)\s*(\d{1,2})時(\d{2})分(?:(\d{2})秒)?/);if(r){const[,l,s,i,c]=r;let m=parseInt(s);const y=parseInt(i),v=c?parseInt(c):0;return l==="下午"&&m!==12?m+=12:l==="上午"&&m===12&&(m=0),m<0||m>23||y<0||y>59||v<0||v>59?null:{hour:m,minute:y,second:v}}const o=t.match(/(\d{1,2}):(\d{2})(?::(\d{2}))?/);if(o){const[,l,s,i]=o,c=parseInt(l),m=parseInt(s),y=i?parseInt(i):0;return c<0||c>23||m<0||m>59||y<0||y>59?null:{hour:c,minute:m,second:y}}return null}canParseInput(e){return/^(民國|民国|ROC\s*)/i.test(e.trim())}tryParseWithSeparator(e,t){const r=e.split(t).map(y=>y.trim()).filter(Boolean);if(r.length<3)return null;const o=parseInt(r[0]),l=parseInt(r[1]),s=parseInt(r[2]);if(isNaN(o)||isNaN(l)||isNaN(s)||o<this.yearRange.min||o>this.yearRange.max)return null;const i=o+this.YEAR_OFFSET;if(l<1||l>12||s<1||s>31)return null;const c={year:i,month:l,day:s};return ee(`${i}-${l.toString().padStart(2,"0")}-${s.toString().padStart(2,"0")}`).isValid()?c:null}supportsFormat(e){return e.includes("ROC-")||e.includes("民國")}format(e,t,r){if(!this.supportsFormat(t))throw new Error(`RocFormatPlugin 不支援格式: ${t}`);const o=t.split(" "),l=o[0],s=o.slice(1).join(" "),i=this.formatDatePart(e,l,r);if(s){const c=this.detectTimeFormat(s),m=this.formatTimePart(e,s,c);return`${i} ${m}`}return i}detectTimeFormat(e){return!e.includes("A")&&!e.includes("a")&&!e.includes("hh")}formatDatePart(e,t,r){const o=e.year-this.YEAR_OFFSET,l=e.month,s=e.day,i={"ROC-YYYY":`民國${o}年`,"ROC-YY":`民國${o.toString().slice(-2)}年`,"ROC-YYYY-MM-DD":`民國${o}年${l.toString().padStart(2,"0")}月${s.toString().padStart(2,"0")}日`,"ROC-YY-MM-DD":`民國${o.toString().slice(-2)}年${l.toString().padStart(2,"0")}月${s.toString().padStart(2,"0")}日`,"ROC-NUM-YYYY-MM-DD":`${o}-${l.toString().padStart(2,"0")}-${s.toString().padStart(2,"0")}`,"ROC-NUM-YY-MM-DD":`${o.toString().slice(-2)}-${l.toString().padStart(2,"0")}-${s.toString().padStart(2,"0")}`,"ROC-YYYY/MM/DD":`民國${o}/${l.toString().padStart(2,"0")}/${s.toString().padStart(2,"0")}`};if(i[t])return i[t];const c=new Date(e.year,e.month-1,e.day);let m=ee(c).format(t);if(t.includes("YYYY"))m=m.replace(e.year.toString(),o.toString());else if(t.includes("YY")){const y=e.year.toString().slice(-2),v=o.toString().slice(-2);m=m.replace(y,v)}return m}formatTimePart(e,t,r){if(!e)return"";const o=e.hour||0,l=e.minute||0,s=e.second||0,i=this.getFormattedTime(o,l,s,t,r);return i||this.fallbackToDateJs(e,t,r)}getFormattedTime(e,t,r,o,l){if(l){const s={"HH:mm:ss":()=>this.formatBasicTime(e,t,r,!0),"HH:mm":()=>this.formatBasicTime(e,t,0,!1),HH時mm分ss秒:()=>this.formatChineseTime(e,t,r,!0),HH時mm分:()=>this.formatChineseTime(e,t,0,!1)};if(s[o])return s[o]()}else{const s={"hh:mm:ss A":()=>this.format12HourTime(e,t,r,!0,"suffix"),"hh:mm A":()=>this.format12HourTime(e,t,0,!1,"suffix"),"h:mm A":()=>this.format12HourTime(e,t,0,!1,"suffix",!1),"A hh:mm:ss":()=>this.format12HourTime(e,t,r,!0,"prefix"),"A hh:mm":()=>this.format12HourTime(e,t,0,!1,"prefix"),"A HH時mm分ss秒":()=>this.format12HourTime(e,t,r,!0,"chinese"),"A HH時mm分":()=>this.format12HourTime(e,t,0,!1,"chinese")};if(s[o])return s[o]()}return null}formatBasicTime(e,t,r,o){const l=e.toString().padStart(2,"0"),s=t.toString().padStart(2,"0");if(o){const i=r.toString().padStart(2,"0");return`${l}:${s}:${i}`}return`${l}:${s}`}formatChineseTime(e,t,r,o){const l=e.toString().padStart(2,"0"),s=t.toString().padStart(2,"0");if(o){const i=r.toString().padStart(2,"0");return`${l}時${s}分${i}秒`}return`${l}時${s}分`}format12HourTime(e,t,r,o,l,s=!0){const i=e<12?"上午":"下午",c=e===0?12:e>12?e-12:e,m=s?c.toString().padStart(2,"0"):c.toString(),y=t.toString().padStart(2,"0"),v=o?r.toString().padStart(2,"0"):"";switch(l){case"suffix":return o?`${m}:${y}:${v} ${i}`:`${m}:${y} ${i}`;case"prefix":return o?`${i} ${m}:${y}:${v}`:`${i} ${m}:${y}`;case"chinese":return o?`${i} ${m}時${y}分${v}秒`:`${i} ${m}時${y}分`;default:return""}}fallbackToDateJs(e,t,r){const o=new Date(e.year,e.month-1,e.day,e.hour||0,e.minute||0,e.second||0);if(!o||isNaN(o.getTime()))return"";let l=ee(o).format(t);return!r&&(t.includes("A")||t.includes("a"))&&(l=l.replace(/AM/g,"上午").replace(/PM/g,"下午"),l=l.replace(/am/g,"上午").replace(/pm/g,"下午")),l}}function ca(){return new Nr}ee.extend(la);const ua=ca(),da={"en-US":["MM/DD/YYYY","M/D/YYYY"],"en-GB":["DD/MM/YYYY","D/M/YYYY"],"zh-TW":["YYYY-MM-DD","YYYY/MM/DD"],"zh-CN":["YYYY-MM-DD","YYYY/MM/DD"]},ma=["YYYY-MM-DD","YYYY/MM/DD","DD/MM/YYYY","MM/DD/YYYY","DD-MM-YYYY","MM-DD-YYYY","YY-MM-DD","YY/MM/DD"];class Pr{constructor(e="zh-TW",t="gregory"){me(this,"locale");me(this,"calendar");me(this,"preferredFormats");this.locale=e,this.calendar=t,this.preferredFormats=[...da[e]||[],...ma]}parse(e){if(!e||typeof e!="string")return{success:!1,date:null,format:null,confidence:0};const t=e.trim();try{const r=this.tryParseWithPlugins(t);if(r.success)return r;for(const o of this.preferredFormats){const l=this.tryParseWithFormat(t,o);if(l.success)return{...l,confidence:.9}}return this.fallbackParse(t)}catch(r){return console.warn("日期解析失敗:",r),{success:!1,date:null,format:null,confidence:0}}}tryParseWithPlugins(e){switch(this.calendar){case"roc":if(ua.canParseInput(e)){const t=ua.parseInput(e,this.locale);if(t)return{success:!0,date:t,format:"roc-plugin",confidence:.95,calendarSystem:"roc"}}break}return{success:!1,date:null,format:null,confidence:0}}tryParseWithFormat(e,t){try{const r=ee(e,t,!0);if(r.isValid())return{success:!0,date:{year:r.year(),month:r.month()+1,day:r.date(),hour:r.hour()||0,minute:r.minute()||0,second:r.second()||0},format:t,confidence:1,calendarSystem:"gregory"}}catch{}return{success:!1,date:null,format:null,confidence:0}}fallbackParse(e){try{const t=ee(e);if(t.isValid())return{success:!0,date:{year:t.year(),month:t.month()+1,day:t.date(),hour:t.hour()||0,minute:t.minute()||0,second:t.second()||0},format:"auto-detected",confidence:.6,calendarSystem:"gregory"}}catch{}return{success:!1,date:null,format:null,confidence:0}}setLocale(e){this.locale=e,this.preferredFormats=[...da[e]||[],...ma]}setCalendar(e){this.calendar=e}}const We=new Pr;function Ar(n,e="zh-TW",t="gregory"){return e!==We.locale&&We.setLocale(e),t!==We.calendar&&We.setCalendar(t),We.parse(n)}function Ie(n,e){return n-e*Math.floor(n/e)}const fa=1721426;function Ee(n,e,t,r){e=_e(n,e);let o=e-1,l=-2;return t<=2?l=0:we(e)&&(l=-1),fa-1+365*o+Math.floor(o/4)-Math.floor(o/100)+Math.floor(o/400)+Math.floor((367*t-362)/12+l+r)}function we(n){return n%4===0&&(n%100!==0||n%400===0)}function _e(n,e){return n==="BC"?1-e:e}function nt(n){let e="AD";return n<=0&&(e="BC",n=1-n),[e,n]}const Lr={standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]};class he{fromJulianDay(e){let t=e,r=t-fa,o=Math.floor(r/146097),l=Ie(r,146097),s=Math.floor(l/36524),i=Ie(l,36524),c=Math.floor(i/1461),m=Ie(i,1461),y=Math.floor(m/365),v=o*400+s*100+c*4+y+(s!==4&&y!==4?1:0),[g,M]=nt(v),w=t-Ee(g,M,1,1),h=2;t<Ee(g,M,3,1)?h=0:we(M)&&(h=1);let f=Math.floor(((w+h)*12+373)/367),d=t-Ee(g,M,f,1)+1;return new ae(g,M,f,d)}toJulianDay(e){return Ee(e.era,e.year,e.month,e.day)}getDaysInMonth(e){return Lr[we(e.year)?"leapyear":"standard"][e.month-1]}getMonthsInYear(e){return 12}getDaysInYear(e){return we(e.year)?366:365}getYearsInEra(e){return 9999}getEras(){return["BC","AD"]}isInverseEra(e){return e.era==="BC"}balanceDate(e){e.year<=0&&(e.era=e.era==="BC"?"AD":"BC",e.year=1-e.year)}constructor(){this.identifier="gregory"}}const Hr={"001":1,AD:1,AE:6,AF:6,AI:1,AL:1,AM:1,AN:1,AR:1,AT:1,AU:1,AX:1,AZ:1,BA:1,BE:1,BG:1,BH:6,BM:1,BN:1,BY:1,CH:1,CL:1,CM:1,CN:1,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DZ:6,EC:1,EE:1,EG:6,ES:1,FI:1,FJ:1,FO:1,FR:1,GB:1,GE:1,GF:1,GP:1,GR:1,HR:1,HU:1,IE:1,IQ:6,IR:6,IS:1,IT:1,JO:6,KG:1,KW:6,KZ:1,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MK:1,MN:1,MQ:1,MV:5,MY:1,NL:1,NO:1,NZ:1,OM:6,PL:1,QA:6,RE:1,RO:1,RS:1,RU:1,SD:6,SE:1,SI:1,SK:1,SM:1,SY:6,TJ:1,TM:1,TR:1,UA:1,UY:1,UZ:1,VA:1,VN:1,XK:1};function qr(n,e){var t,r,o,l;return(l=(o=(t=n.isEqual)===null||t===void 0?void 0:t.call(n,e))!==null&&o!==void 0?o:(r=e.isEqual)===null||r===void 0?void 0:r.call(e,n))!==null&&l!==void 0?l:n.identifier===e.identifier}function ha(n,e,t){let r=n.calendar.toJulianDay(n),o=Kr(e),l=Math.ceil(r+1-o)%7;return l<0&&(l+=7),l}function zr(n){return Se(Date.now(),n)}function Ur(n){return Gr(zr(n))}function pa(n,e){return n.calendar.toJulianDay(n)-e.calendar.toJulianDay(e)}function Wr(n,e){return ga(n)-ga(e)}function ga(n){return n.hour*36e5+n.minute*6e4+n.second*1e3+n.millisecond}let xt=null;function ya(){return xt==null&&(xt=new Intl.DateTimeFormat().resolvedOptions().timeZone),xt}function _r(n){return n.subtract({days:n.day-1})}const va=new Map;function Jr(n){if(Intl.Locale){let t=va.get(n);return t||(t=new Intl.Locale(n).maximize().region,t&&va.set(n,t)),t}let e=n.split("-")[1];return e==="u"?void 0:e}function Kr(n){let e=Jr(n);return e&&Hr[e]||0}function jr(n,e,t){let r=n.calendar.getDaysInMonth(n);return Math.ceil((ha(_r(n),e)+r)/7)}function Be(n){n=ye(n,new he);let e=_e(n.era,n.year);return $a(e,n.month,n.day,n.hour,n.minute,n.second,n.millisecond)}function $a(n,e,t,r,o,l,s){let i=new Date;return i.setUTCHours(r,o,l,s),i.setUTCFullYear(n,e-1,t),i.getTime()}function Et(n,e){if(e==="UTC")return 0;if(n>0&&e===ya())return new Date(n).getTimezoneOffset()*-6e4;let{year:t,month:r,day:o,hour:l,minute:s,second:i}=ka(n,e);return $a(t,r,o,l,s,i,0)-Math.floor(n/1e3)*1e3}const Da=new Map;function ka(n,e){let t=Da.get(e);t||(t=new Intl.DateTimeFormat("en-US",{timeZone:e,hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),Da.set(e,t));let r=t.formatToParts(new Date(n)),o={};for(let l of r)l.type!=="literal"&&(o[l.type]=l.value);return{year:o.era==="BC"||o.era==="B"?-o.year+1:+o.year,month:+o.month,day:+o.day,hour:o.hour==="24"?0:+o.hour,minute:+o.minute,second:+o.second}}const Sa=864e5;function Qr(n,e,t,r){return(t===r?[t]:[t,r]).filter(l=>Zr(n,e,l))}function Zr(n,e,t){let r=ka(t,e);return n.year===r.year&&n.month===r.month&&n.day===r.day&&n.hour===r.hour&&n.minute===r.minute&&n.second===r.second}function ke(n,e,t="compatible"){let r=Oe(n);if(e==="UTC")return Be(r);if(e===ya()&&t==="compatible"){r=ye(r,new he);let c=new Date,m=_e(r.era,r.year);return c.setFullYear(m,r.month-1,r.day),c.setHours(r.hour,r.minute,r.second,r.millisecond),c.getTime()}let o=Be(r),l=Et(o-Sa,e),s=Et(o+Sa,e),i=Qr(r,e,o-l,o-s);if(i.length===1)return i[0];if(i.length>1)switch(t){case"compatible":case"earlier":return i[0];case"later":return i[i.length-1];case"reject":throw new RangeError("Multiple possible absolute times found")}switch(t){case"earlier":return Math.min(o-l,o-s);case"compatible":case"later":return Math.max(o-l,o-s);case"reject":throw new RangeError("No such absolute time found")}}function Ma(n,e,t="compatible"){return new Date(ke(n,e,t))}function Se(n,e){let t=Et(n,e),r=new Date(n+t),o=r.getUTCFullYear(),l=r.getUTCMonth()+1,s=r.getUTCDate(),i=r.getUTCHours(),c=r.getUTCMinutes(),m=r.getUTCSeconds(),y=r.getUTCMilliseconds();return new Ke(o<1?"BC":"AD",o<1?-o+1:o,l,s,e,t,i,c,m,y)}function Gr(n){return new ae(n.calendar,n.era,n.year,n.month,n.day)}function Oe(n,e){let t=0,r=0,o=0,l=0;if("timeZone"in n)({hour:t,minute:r,second:o,millisecond:l}=n);else if("hour"in n&&!e)return n;return e&&({hour:t,minute:r,second:o,millisecond:l}=e),new Fe(n.calendar,n.era,n.year,n.month,n.day,t,r,o,l)}function ye(n,e){if(qr(n.calendar,e))return n;let t=e.fromJulianDay(n.calendar.toJulianDay(n)),r=n.copy();return r.calendar=e,r.era=t.era,r.year=t.year,r.month=t.month,r.day=t.day,Ce(r),r}function Xr(n,e,t){if(n instanceof Ke)return n.timeZone===e?n:tn(n,e);let r=ke(n,e,t);return Se(r,e)}function en(n){let e=Be(n)-n.offset;return new Date(e)}function tn(n,e){let t=Be(n)-n.offset;return ye(Se(t,e),n.calendar)}const Je=36e5;function ot(n,e){let t=n.copy(),r="hour"in t?on(t,e):0;Ct(t,e.years||0),t.calendar.balanceYearMonth&&t.calendar.balanceYearMonth(t,n),t.month+=e.months||0,Yt(t),ba(t),t.day+=(e.weeks||0)*7,t.day+=e.days||0,t.day+=r,an(t),t.calendar.balanceDate&&t.calendar.balanceDate(t),t.year<1&&(t.year=1,t.month=1,t.day=1);let o=t.calendar.getYearsInEra(t);if(t.year>o){var l,s;let c=(l=(s=t.calendar).isInverseEra)===null||l===void 0?void 0:l.call(s,t);t.year=o,t.month=c?1:t.calendar.getMonthsInYear(t),t.day=c?1:t.calendar.getDaysInMonth(t)}t.month<1&&(t.month=1,t.day=1);let i=t.calendar.getMonthsInYear(t);return t.month>i&&(t.month=i,t.day=t.calendar.getDaysInMonth(t)),t.day=Math.max(1,Math.min(t.calendar.getDaysInMonth(t),t.day)),t}function Ct(n,e){var t,r;!((t=(r=n.calendar).isInverseEra)===null||t===void 0)&&t.call(r,n)&&(e=-e),n.year+=e}function Yt(n){for(;n.month<1;)Ct(n,-1),n.month+=n.calendar.getMonthsInYear(n);let e=0;for(;n.month>(e=n.calendar.getMonthsInYear(n));)n.month-=e,Ct(n,1)}function an(n){for(;n.day<1;)n.month--,Yt(n),n.day+=n.calendar.getDaysInMonth(n);for(;n.day>n.calendar.getDaysInMonth(n);)n.day-=n.calendar.getDaysInMonth(n),n.month++,Yt(n)}function ba(n){n.month=Math.max(1,Math.min(n.calendar.getMonthsInYear(n),n.month)),n.day=Math.max(1,Math.min(n.calendar.getDaysInMonth(n),n.day))}function Ce(n){n.calendar.constrainDate&&n.calendar.constrainDate(n),n.year=Math.max(1,Math.min(n.calendar.getYearsInEra(n),n.year)),ba(n)}function wa(n){let e={};for(let t in n)typeof n[t]=="number"&&(e[t]=-n[t]);return e}function Ta(n,e){return ot(n,wa(e))}function Rt(n,e){let t=n.copy();return e.era!=null&&(t.era=e.era),e.year!=null&&(t.year=e.year),e.month!=null&&(t.month=e.month),e.day!=null&&(t.day=e.day),Ce(t),t}function lt(n,e){let t=n.copy();return e.hour!=null&&(t.hour=e.hour),e.minute!=null&&(t.minute=e.minute),e.second!=null&&(t.second=e.second),e.millisecond!=null&&(t.millisecond=e.millisecond),nn(t),t}function rn(n){n.second+=Math.floor(n.millisecond/1e3),n.millisecond=st(n.millisecond,1e3),n.minute+=Math.floor(n.second/60),n.second=st(n.second,60),n.hour+=Math.floor(n.minute/60),n.minute=st(n.minute,60);let e=Math.floor(n.hour/24);return n.hour=st(n.hour,24),e}function nn(n){n.millisecond=Math.max(0,Math.min(n.millisecond,1e3)),n.second=Math.max(0,Math.min(n.second,59)),n.minute=Math.max(0,Math.min(n.minute,59)),n.hour=Math.max(0,Math.min(n.hour,23))}function st(n,e){let t=n%e;return t<0&&(t+=e),t}function on(n,e){return n.hour+=e.hours||0,n.minute+=e.minutes||0,n.second+=e.seconds||0,n.millisecond+=e.milliseconds||0,rn(n)}function Vt(n,e,t,r){let o=n.copy();switch(e){case"era":{let i=n.calendar.getEras(),c=i.indexOf(n.era);if(c<0)throw new Error("Invalid era: "+n.era);c=Me(c,t,0,i.length-1,r==null?void 0:r.round),o.era=i[c],Ce(o);break}case"year":var l,s;!((l=(s=o.calendar).isInverseEra)===null||l===void 0)&&l.call(s,o)&&(t=-t),o.year=Me(n.year,t,-1/0,9999,r==null?void 0:r.round),o.year===-1/0&&(o.year=1),o.calendar.balanceYearMonth&&o.calendar.balanceYearMonth(o,n);break;case"month":o.month=Me(n.month,t,1,n.calendar.getMonthsInYear(n),r==null?void 0:r.round);break;case"day":o.day=Me(n.day,t,1,n.calendar.getDaysInMonth(n),r==null?void 0:r.round);break;default:throw new Error("Unsupported field "+e)}return n.calendar.balanceDate&&n.calendar.balanceDate(o),Ce(o),o}function xa(n,e,t,r){let o=n.copy();switch(e){case"hour":{let l=n.hour,s=0,i=23;if((r==null?void 0:r.hourCycle)===12){let c=l>=12;s=c?12:0,i=c?23:11}o.hour=Me(l,t,s,i,r==null?void 0:r.round);break}case"minute":o.minute=Me(n.minute,t,0,59,r==null?void 0:r.round);break;case"second":o.second=Me(n.second,t,0,59,r==null?void 0:r.round);break;case"millisecond":o.millisecond=Me(n.millisecond,t,0,999,r==null?void 0:r.round);break;default:throw new Error("Unsupported field "+e)}return o}function Me(n,e,t,r,o=!1){if(o){n+=Math.sign(e),n<t&&(n=r);let l=Math.abs(e);e>0?n=Math.ceil(n/l)*l:n=Math.floor(n/l)*l,n>r&&(n=t)}else n+=e,n<t?n=r-(t-n-1):n>r&&(n=t+(n-r-1));return n}function Ea(n,e){let t;if(e.years!=null&&e.years!==0||e.months!=null&&e.months!==0||e.weeks!=null&&e.weeks!==0||e.days!=null&&e.days!==0){let o=ot(Oe(n),{years:e.years,months:e.months,weeks:e.weeks,days:e.days});t=ke(o,n.timeZone)}else t=Be(n)-n.offset;t+=e.milliseconds||0,t+=(e.seconds||0)*1e3,t+=(e.minutes||0)*6e4,t+=(e.hours||0)*36e5;let r=Se(t,n.timeZone);return ye(r,n.calendar)}function ln(n,e){return Ea(n,wa(e))}function sn(n,e,t,r){switch(e){case"hour":{let o=0,l=23;if((r==null?void 0:r.hourCycle)===12){let w=n.hour>=12;o=w?12:0,l=w?23:11}let s=Oe(n),i=ye(lt(s,{hour:o}),new he),c=[ke(i,n.timeZone,"earlier"),ke(i,n.timeZone,"later")].filter(w=>Se(w,n.timeZone).day===i.day)[0],m=ye(lt(s,{hour:l}),new he),y=[ke(m,n.timeZone,"earlier"),ke(m,n.timeZone,"later")].filter(w=>Se(w,n.timeZone).day===m.day).pop(),v=Be(n)-n.offset,g=Math.floor(v/Je),M=v%Je;return v=Me(g,t,Math.floor(c/Je),Math.floor(y/Je),r==null?void 0:r.round)*Je+M,ye(Se(v,n.timeZone),n.calendar)}case"minute":case"second":case"millisecond":return xa(n,e,t,r);case"era":case"year":case"month":case"day":{let o=Vt(Oe(n),e,t,r),l=ke(o,n.timeZone);return ye(Se(l,n.timeZone),n.calendar)}default:throw new Error("Unsupported field "+e)}}function cn(n,e,t){let r=Oe(n),o=lt(Rt(r,e),e);if(o.compare(r)===0)return n;let l=ke(o,n.timeZone,t);return ye(Se(l,n.timeZone),n.calendar)}function un(n){return`${String(n.hour).padStart(2,"0")}:${String(n.minute).padStart(2,"0")}:${String(n.second).padStart(2,"0")}${n.millisecond?String(n.millisecond/1e3).slice(1):""}`}function Ca(n){let e=ye(n,new he),t;return e.era==="BC"?t=e.year===1?"0000":"-"+String(Math.abs(1-e.year)).padStart(6,"00"):t=String(e.year).padStart(4,"0"),`${t}-${String(e.month).padStart(2,"0")}-${String(e.day).padStart(2,"0")}`}function Ya(n){return`${Ca(n)}T${un(n)}`}function dn(n){let e=Math.sign(n)<0?"-":"+";n=Math.abs(n);let t=Math.floor(n/36e5),r=n%36e5/6e4;return`${e}${String(t).padStart(2,"0")}:${String(r).padStart(2,"0")}`}function mn(n){return`${Ya(n)}${dn(n.offset)}[${n.timeZone}]`}function fn(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function It(n,e,t){fn(n,e),e.set(n,t)}function Bt(n){let e=typeof n[0]=="object"?n.shift():new he,t;if(typeof n[0]=="string")t=n.shift();else{let s=e.getEras();t=s[s.length-1]}let r=n.shift(),o=n.shift(),l=n.shift();return[e,t,r,o,l]}var hn=new WeakMap;class ae{copy(){return this.era?new ae(this.calendar,this.era,this.year,this.month,this.day):new ae(this.calendar,this.year,this.month,this.day)}add(e){return ot(this,e)}subtract(e){return Ta(this,e)}set(e){return Rt(this,e)}cycle(e,t,r){return Vt(this,e,t,r)}toDate(e){return Ma(this,e)}toString(){return Ca(this)}compare(e){return pa(this,e)}constructor(...e){It(this,hn,{writable:!0,value:void 0});let[t,r,o,l,s]=Bt(e);this.calendar=t,this.era=r,this.year=o,this.month=l,this.day=s,Ce(this)}}var pn=new WeakMap;class Fe{copy(){return this.era?new Fe(this.calendar,this.era,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond):new Fe(this.calendar,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond)}add(e){return ot(this,e)}subtract(e){return Ta(this,e)}set(e){return Rt(lt(this,e),e)}cycle(e,t,r){switch(e){case"era":case"year":case"month":case"day":return Vt(this,e,t,r);default:return xa(this,e,t,r)}}toDate(e,t){return Ma(this,e,t)}toString(){return Ya(this)}compare(e){let t=pa(this,e);return t===0?Wr(this,Oe(e)):t}constructor(...e){It(this,pn,{writable:!0,value:void 0});let[t,r,o,l,s]=Bt(e);this.calendar=t,this.era=r,this.year=o,this.month=l,this.day=s,this.hour=e.shift()||0,this.minute=e.shift()||0,this.second=e.shift()||0,this.millisecond=e.shift()||0,Ce(this)}}var gn=new WeakMap;class Ke{copy(){return this.era?new Ke(this.calendar,this.era,this.year,this.month,this.day,this.timeZone,this.offset,this.hour,this.minute,this.second,this.millisecond):new Ke(this.calendar,this.year,this.month,this.day,this.timeZone,this.offset,this.hour,this.minute,this.second,this.millisecond)}add(e){return Ea(this,e)}subtract(e){return ln(this,e)}set(e,t){return cn(this,e,t)}cycle(e,t,r){return sn(this,e,t,r)}toDate(){return en(this)}toString(){return mn(this)}toAbsoluteString(){return this.toDate().toISOString()}compare(e){return this.toDate().getTime()-Xr(e,this.timeZone).toDate().getTime()}constructor(...e){It(this,gn,{writable:!0,value:void 0});let[t,r,o,l,s]=Bt(e),i=e.shift(),c=e.shift();this.calendar=t,this.era=r,this.year=o,this.month=l,this.day=s,this.timeZone=i,this.offset=c,this.hour=e.shift()||0,this.minute=e.shift()||0,this.second=e.shift()||0,this.millisecond=e.shift()||0,Ce(this)}}const Ne=[[1868,9,8],[1912,7,30],[1926,12,25],[1989,1,8],[2019,5,1]],yn=[[1912,7,29],[1926,12,24],[1989,1,7],[2019,4,30]],it=[1867,1911,1925,1988,2018],Te=["meiji","taisho","showa","heisei","reiwa"];function Ra(n){const e=Ne.findIndex(([t,r,o])=>n.year<t||n.year===t&&n.month<r||n.year===t&&n.month===r&&n.day<o);return e===-1?Ne.length-1:e===0?0:e-1}function Ot(n){let e=it[Te.indexOf(n.era)];if(!e)throw new Error("Unknown era: "+n.era);return new ae(n.year+e,n.month,n.day)}class vn extends he{fromJulianDay(e){let t=super.fromJulianDay(e),r=Ra(t);return new ae(this,Te[r],t.year-it[r],t.month,t.day)}toJulianDay(e){return super.toJulianDay(Ot(e))}balanceDate(e){let t=Ot(e),r=Ra(t);Te[r]!==e.era&&(e.era=Te[r],e.year=t.year-it[r]),this.constrainDate(e)}constrainDate(e){let t=Te.indexOf(e.era),r=yn[t];if(r!=null){let[o,l,s]=r,i=o-it[t];e.year=Math.max(1,Math.min(i,e.year)),e.year===i&&(e.month=Math.min(l,e.month),e.month===l&&(e.day=Math.min(s,e.day)))}if(e.year===1&&t>=0){let[,o,l]=Ne[t];e.month=Math.max(o,e.month),e.month===o&&(e.day=Math.max(l,e.day))}}getEras(){return Te}getYearsInEra(e){let t=Te.indexOf(e.era),r=Ne[t],o=Ne[t+1];if(o==null)return 9999-r[0]+1;let l=o[0]-r[0];return(e.month<o[1]||e.month===o[1]&&e.day<o[2])&&l++,l}getDaysInMonth(e){return super.getDaysInMonth(Ot(e))}getMinimumMonthInYear(e){let t=Va(e);return t?t[1]:1}getMinimumDayInMonth(e){let t=Va(e);return t&&e.month===t[1]?t[2]:1}constructor(...e){super(...e),this.identifier="japanese"}}function Va(n){if(n.year===1){let e=Te.indexOf(n.era);return Ne[e]}}const Ia=-543;class $n extends he{fromJulianDay(e){let t=super.fromJulianDay(e),r=_e(t.era,t.year);return new ae(this,r-Ia,t.month,t.day)}toJulianDay(e){return super.toJulianDay(Ba(e))}getEras(){return["BE"]}getDaysInMonth(e){return super.getDaysInMonth(Ba(e))}balanceDate(){}constructor(...e){super(...e),this.identifier="buddhist"}}function Ba(n){let[e,t]=nt(n.year+Ia);return new ae(e,t,n.month,n.day)}const ct=1911;function Oa(n){return n.era==="minguo"?n.year+ct:1-n.year+ct}function Fa(n){let e=n-ct;return e>0?["minguo",e]:["before_minguo",1-e]}class Dn extends he{fromJulianDay(e){let t=super.fromJulianDay(e),r=_e(t.era,t.year),[o,l]=Fa(r);return new ae(this,o,l,t.month,t.day)}toJulianDay(e){return super.toJulianDay(Na(e))}getEras(){return["before_minguo","minguo"]}balanceDate(e){let[t,r]=Fa(Oa(e));e.era=t,e.year=r}isInverseEra(e){return e.era==="before_minguo"}getDaysInMonth(e){return super.getDaysInMonth(Na(e))}getYearsInEra(e){return e.era==="before_minguo"?9999:9999-ct}constructor(...e){super(...e),this.identifier="roc"}}function Na(n){let[e,t]=nt(Oa(n));return new ae(e,t,n.month,n.day)}const Pa=1948320,Aa=[0,31,62,93,124,155,186,216,246,276,306,336];class kn{fromJulianDay(e){let t=e-Pa,r=1+Math.floor((33*t+3)/12053),o=365*(r-1)+Math.floor((8*r+21)/33),l=t-o,s=l<216?Math.floor(l/31):Math.floor((l-6)/30),i=l-Aa[s]+1;return new ae(this,r,s+1,i)}toJulianDay(e){let t=Pa-1+365*(e.year-1)+Math.floor((8*e.year+21)/33);return t+=Aa[e.month-1],t+=e.day,t}getMonthsInYear(){return 12}getDaysInMonth(e){return e.month<=6?31:e.month<=11||Ie(25*e.year+11,33)<8?30:29}getEras(){return["AP"]}getYearsInEra(){return 9377}constructor(){this.identifier="persian"}}const Ft=78,La=80;class Sn extends he{fromJulianDay(e){let t=super.fromJulianDay(e),r=t.year-Ft,o=e-Ee(t.era,t.year,1,1),l;o<La?(r--,l=we(t.year-1)?31:30,o+=l+155+90+10):(l=we(t.year)?31:30,o-=La);let s,i;if(o<l)s=1,i=o+1;else{let c=o-l;c<155?(s=Math.floor(c/31)+2,i=c%31+1):(c-=155,s=Math.floor(c/30)+7,i=c%30+1)}return new ae(this,r,s,i)}toJulianDay(e){let t=e.year+Ft,[r,o]=nt(t),l,s;return we(o)?(l=31,s=Ee(r,o,3,21)):(l=30,s=Ee(r,o,3,22)),e.month===1?s+e.day-1:(s+=l+Math.min(e.month-2,5)*31,e.month>=8&&(s+=(e.month-7)*30),s+=e.day-1,s)}getDaysInMonth(e){return e.month===1&&we(e.year+Ft)||e.month>=2&&e.month<=6?31:30}getYearsInEra(){return 9919}getEras(){return["saka"]}balanceDate(){}constructor(...e){super(...e),this.identifier="indian"}}const ut=1948440,Ha=1948439,ve=1300,Pe=1600,Mn=460322;function dt(n,e,t,r){return r+Math.ceil(29.5*(t-1))+(e-1)*354+Math.floor((3+11*e)/30)+n-1}function qa(n,e,t){let r=Math.floor((30*(t-e)+10646)/10631),o=Math.min(12,Math.ceil((t-(29+dt(e,r,1,1)))/29.5)+1),l=t-dt(e,r,o,1)+1;return new ae(n,r,o,l)}function za(n){return(14+11*n)%30<11}class Nt{fromJulianDay(e){return qa(this,ut,e)}toJulianDay(e){return dt(ut,e.year,e.month,e.day)}getDaysInMonth(e){let t=29+e.month%2;return e.month===12&&za(e.year)&&t++,t}getMonthsInYear(){return 12}getDaysInYear(e){return za(e.year)?355:354}getYearsInEra(){return 9665}getEras(){return["AH"]}constructor(){this.identifier="islamic-civil"}}class bn extends Nt{fromJulianDay(e){return qa(this,Ha,e)}toJulianDay(e){return dt(Ha,e.year,e.month,e.day)}constructor(...e){super(...e),this.identifier="islamic-tbla"}}const wn="qgpUDckO1AbqBmwDrQpVBakGkgepC9QF2gpcBS0NlQZKB1QLagutBa4ETwoXBYsGpQbVCtYCWwmdBE0KJg2VDawFtgm6AlsKKwWVCsoG6Qr0AnYJtgJWCcoKpAvSC9kF3AJtCU0FpQpSC6ULtAW2CVcFlwJLBaMGUgdlC2oFqworBZUMSg2lDcoF1gpXCasESwmlClILagt1BXYCtwhbBFUFqQW0BdoJ3QRuAjYJqgpUDbIN1QXaAlsJqwRVCkkLZAtxC7QFtQpVCiUNkg7JDtQG6QprCasEkwpJDaQNsg25CroEWworBZUKKgtVC1wFvQQ9Ah0JlQpKC1oLbQW2AjsJmwRVBqkGVAdqC2wFrQpVBSkLkgupC9QF2gpaBasKlQVJB2QHqgu1BbYCVgpNDiULUgtqC60FrgIvCZcESwalBqwG1gpdBZ0ETQoWDZUNqgW1BdoCWwmtBJUFygbkBuoK9QS2AlYJqgpUC9IL2QXqAm0JrQSVCkoLpQuyBbUJ1gSXCkcFkwZJB1ULagVrCisFiwpGDaMNygXWCtsEawJLCaUKUgtpC3UFdgG3CFsCKwVlBbQF2gntBG0BtgimClINqQ3UBdoKWwmrBFMGKQdiB6kLsgW1ClUFJQuSDckO0gbpCmsFqwRVCikNVA2qDbUJugQ7CpsETQqqCtUK2gJdCV4ELgqaDFUNsga5BroEXQotBZUKUguoC7QLuQXaAloJSgukDdEO6AZqC20FNQWVBkoNqA3UDdoGWwWdAisGFQtKC5ULqgWuCi4JjwwnBZUGqgbWCl0FnQI=";let Pt,Ae;function mt(n){return Mn+Ae[n-ve]}function je(n,e){let t=n-ve,r=1<<11-(e-1);return(Pt[t]&r)===0?29:30}function Ua(n,e){let t=mt(n);for(let r=1;r<e;r++)t+=je(n,r);return t}function Wa(n){return Ae[n+1-ve]-Ae[n-ve]}class Tn extends Nt{fromJulianDay(e){let t=e-ut,r=mt(ve),o=mt(Pe);if(t<r||t>o)return super.fromJulianDay(e);{let l=ve-1,s=1,i=1;for(;i>0;){l++,i=t-mt(l)+1;let c=Wa(l);if(i===c){s=12;break}else if(i<c){let m=je(l,s);for(s=1;i>m;)i-=m,s++,m=je(l,s);break}}return new ae(this,l,s,t-Ua(l,s)+1)}}toJulianDay(e){return e.year<ve||e.year>Pe?super.toJulianDay(e):ut+Ua(e.year,e.month)+(e.day-1)}getDaysInMonth(e){return e.year<ve||e.year>Pe?super.getDaysInMonth(e):je(e.year,e.month)}getDaysInYear(e){return e.year<ve||e.year>Pe?super.getDaysInYear(e):Wa(e.year)}constructor(){if(super(),this.identifier="islamic-umalqura",Pt||(Pt=new Uint16Array(Uint8Array.from(atob(wn),e=>e.charCodeAt(0)).buffer)),!Ae){Ae=new Uint32Array(Pe-ve+1);let e=0;for(let t=ve;t<=Pe;t++){Ae[t-ve]=e;for(let r=1;r<=12;r++)e+=je(t,r)}}}}const _a=347997,Ja=1080,Ka=24*Ja,xn=29,En=12*Ja+793,Cn=xn*Ka+En;function Ye(n){return Ie(n*7+1,19)<7}function ft(n){let e=Math.floor((235*n-234)/19),t=12084+13753*e,r=e*29+Math.floor(t/25920);return Ie(3*(r+1),7)<3&&(r+=1),r}function Yn(n){let e=ft(n-1),t=ft(n);return ft(n+1)-t===356?2:t-e===382?1:0}function Qe(n){return ft(n)+Yn(n)}function ja(n){return Qe(n+1)-Qe(n)}function Rn(n){let e=ja(n);switch(e>380&&(e-=30),e){case 353:return 0;case 354:return 1;case 355:return 2}}function ht(n,e){if(e>=6&&!Ye(n)&&e++,e===4||e===7||e===9||e===11||e===13)return 29;let t=Rn(n);return e===2?t===2?30:29:e===3?t===0?29:30:e===6?Ye(n)?30:0:30}class Vn{fromJulianDay(e){let t=e-_a,r=t*Ka/Cn,o=Math.floor((19*r+234)/235)+1,l=Qe(o),s=Math.floor(t-l);for(;s<1;)o--,l=Qe(o),s=Math.floor(t-l);let i=1,c=0;for(;c<s;)c+=ht(o,i),i++;i--,c-=ht(o,i);let m=s-c;return new ae(this,o,i,m)}toJulianDay(e){let t=Qe(e.year);for(let r=1;r<e.month;r++)t+=ht(e.year,r);return t+e.day+_a}getDaysInMonth(e){return ht(e.year,e.month)}getMonthsInYear(e){return Ye(e.year)?13:12}getDaysInYear(e){return ja(e.year)}getYearsInEra(){return 9999}getEras(){return["AM"]}balanceYearMonth(e,t){t.year!==e.year&&(Ye(t.year)&&!Ye(e.year)&&t.month>6?e.month--:!Ye(t.year)&&Ye(e.year)&&t.month>6&&e.month++)}constructor(){this.identifier="hebrew"}}const At=1723856,Qa=1824665,Lt=5500;function pt(n,e,t,r){return n+365*e+Math.floor(e/4)+30*(t-1)+r-1}function Ht(n,e){let t=Math.floor(4*(e-n)/1461),r=1+Math.floor((e-pt(n,t,1,1))/30),o=e+1-pt(n,t,r,1);return[t,r,o]}function Za(n){return Math.floor(n%4/3)}function Ga(n,e){return e%13!==0?30:Za(n)+5}class qt{fromJulianDay(e){let[t,r,o]=Ht(At,e),l="AM";return t<=0&&(l="AA",t+=Lt),new ae(this,l,t,r,o)}toJulianDay(e){let t=e.year;return e.era==="AA"&&(t-=Lt),pt(At,t,e.month,e.day)}getDaysInMonth(e){return Ga(e.year,e.month)}getMonthsInYear(){return 13}getDaysInYear(e){return 365+Za(e.year)}getYearsInEra(e){return e.era==="AA"?9999:9991}getEras(){return["AA","AM"]}constructor(){this.identifier="ethiopic"}}class In extends qt{fromJulianDay(e){let[t,r,o]=Ht(At,e);return t+=Lt,new ae(this,"AA",t,r,o)}getEras(){return["AA"]}getYearsInEra(){return 9999}constructor(...e){super(...e),this.identifier="ethioaa"}}class Bn extends qt{fromJulianDay(e){let[t,r,o]=Ht(Qa,e),l="CE";return t<=0&&(l="BCE",t=1-t),new ae(this,l,t,r,o)}toJulianDay(e){let t=e.year;return e.era==="BCE"&&(t=1-t),pt(Qa,t,e.month,e.day)}getDaysInMonth(e){let t=e.year;return e.era==="BCE"&&(t=1-t),Ga(t,e.month)}isInverseEra(e){return e.era==="BCE"}balanceDate(e){e.year<=0&&(e.era=e.era==="BCE"?"CE":"BCE",e.year=1-e.year)}getEras(){return["BCE","CE"]}getYearsInEra(e){return e.era==="BCE"?9999:9715}constructor(...e){super(...e),this.identifier="coptic"}}function On(n){switch(n){case"buddhist":return new $n;case"ethiopic":return new qt;case"ethioaa":return new In;case"coptic":return new Bn;case"hebrew":return new Vn;case"indian":return new Sn;case"islamic-civil":return new Nt;case"islamic-tbla":return new bn;case"islamic-umalqura":return new Tn;case"japanese":return new vn;case"persian":return new kn;case"roc":return new Dn;case"gregory":default:return new he}}let zt=new Map;class gt{format(e){return this.formatter.format(e)}formatToParts(e){return this.formatter.formatToParts(e)}formatRange(e,t){if(typeof this.formatter.formatRange=="function")return this.formatter.formatRange(e,t);if(t<e)throw new RangeError("End date must be >= start date");return`${this.formatter.format(e)} – ${this.formatter.format(t)}`}formatRangeToParts(e,t){if(typeof this.formatter.formatRangeToParts=="function")return this.formatter.formatRangeToParts(e,t);if(t<e)throw new RangeError("End date must be >= start date");let r=this.formatter.formatToParts(e),o=this.formatter.formatToParts(t);return[...r.map(l=>({...l,source:"startRange"})),{type:"literal",value:" – ",source:"shared"},...o.map(l=>({...l,source:"endRange"}))]}resolvedOptions(){let e=this.formatter.resolvedOptions();return Pn()&&(this.resolvedHourCycle||(this.resolvedHourCycle=An(e.locale,this.options)),e.hourCycle=this.resolvedHourCycle,e.hour12=this.resolvedHourCycle==="h11"||this.resolvedHourCycle==="h12"),e.calendar==="ethiopic-amete-alem"&&(e.calendar="ethioaa"),e}constructor(e,t={}){this.formatter=Xa(e,t),this.options=t}}const Fn={true:{ja:"h11"},false:{}};function Xa(n,e={}){if(typeof e.hour12=="boolean"&&Nn()){e={...e};let o=Fn[String(e.hour12)][n.split("-")[0]],l=e.hour12?"h12":"h23";e.hourCycle=o??l,delete e.hour12}let t=n+(e?Object.entries(e).sort((o,l)=>o[0]<l[0]?-1:1).join():"");if(zt.has(t))return zt.get(t);let r=new Intl.DateTimeFormat(n,e);return zt.set(t,r),r}let Ut=null;function Nn(){return Ut==null&&(Ut=new Intl.DateTimeFormat("en-US",{hour:"numeric",hour12:!1}).format(new Date(2020,2,3,0))==="24"),Ut}let Wt=null;function Pn(){return Wt==null&&(Wt=new Intl.DateTimeFormat("fr",{hour:"numeric",hour12:!1}).resolvedOptions().hourCycle==="h12"),Wt}function An(n,e){if(!e.timeStyle&&!e.hour)return;n=n.replace(/(-u-)?-nu-[a-zA-Z0-9]+/,""),n+=(n.includes("-u-")?"":"-u")+"-nu-latn";let t=Xa(n,{...e,timeZone:void 0}),r=parseInt(t.formatToParts(new Date(2020,2,3,0)).find(l=>l.type==="hour").value,10),o=parseInt(t.formatToParts(new Date(2020,2,3,23)).find(l=>l.type==="hour").value,10);if(r===0&&o===23)return"h23";if(r===24&&o===23)return"h24";if(r===0&&o===11)return"h11";if(r===12&&o===11)return"h12";throw new Error("Unexpected hour cycle result")}const _t=ca(),pe=class pe{static createSafeCalendar(e){try{return On(e)}catch(t){return console.warn(`無法創建日曆 ${e}，回退到西元曆:`,t),new he}}static safeToCalendar(e,t){try{return ye(e,t)}catch(r){return console.warn("日曆轉換失敗，返回原始日期:",r),e}}static generateCalendarDays(e,t,r,o,l=0){try{const s=this.createSafeCalendar(r),i=new ae(e,t,1),c=r==="gregory"?i:this.safeToCalendar(i,s),m=jr(c,o)??6,v=(ha(c,o)-l+7)%7,g=c.subtract({days:v}),M=[];let w=g;const h=m*7;for(let f=0;f<h;f++)M.push(w),w=w.add({days:1});return M}catch(s){return console.error("生成日曆網格失敗:",s),[]}}static getCalendarRange(e){const t=new Date().getFullYear();return{gregory:{min:1,max:t+100},japanese:{min:1868,max:t+100},roc:{min:1912,max:t+100},buddhist:{min:544,max:t+643},islamic:{min:622,max:t+100},persian:{min:622,max:t+100},hebrew:{min:1,max:t+3860}}[e]||{min:1,max:t+100}}static convertGregorianYear(e,t){if(t==="gregory")return{localYear:e,isValid:!0};try{const r=new ae(e,1,1),o=this.createSafeCalendar(t),l=this.safeToCalendar(r,o),s=this.getCalendarRange(t),i=l.year>=s.min&&l.year<=s.max;return{localYear:l.year,isValid:i}}catch(r){return console.warn(`年份轉換失敗 ${e} -> ${t}:`,r),{localYear:e,isValid:!1}}}static convertToGregorianYear(e,t){if(t==="gregory")return e;try{const r=this.createSafeCalendar(t),o=new ae(r,e,1,1);return this.safeToCalendar(o,new he).year}catch(r){return console.warn(`年份轉換失敗 ${e} ${t} -> Gregory:`,r),e}}static getMonthNames(e,t="gregory"){try{const r=new Intl.DateTimeFormat(e,{month:"short"});return Array.from({length:12},(o,l)=>{const s=new Date(2e3,l,1);return r.format(s)})}catch(r){return console.warn(`獲取月份名稱失敗 ${t}:`,r),e.startsWith("zh")?Array.from({length:12},(o,l)=>`${l+1}月`):e.startsWith("ja")?Array.from({length:12},(o,l)=>`${l+1}月`):["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}}static getCalendarDisplayName(e,t="zh-TW"){var o,l;const r={gregory:{"zh-TW":"西元","zh-CN":"西元","en-US":"Gregorian","ja-JP":"西暦","ko-KR":"서력"},roc:{"zh-TW":"民國","zh-CN":"民国","en-US":"ROC","ja-JP":"中華民国","ko-KR":"중화민국"},buddhist:{"zh-TW":"佛曆","zh-CN":"佛历","en-US":"Buddhist","ja-JP":"仏暦","ko-KR":"불력"},japanese:{"zh-TW":"和曆","zh-CN":"和历","en-US":"Japanese","ja-JP":"和暦","ko-KR":"일본력"},islamic:{"zh-TW":"伊斯蘭曆","zh-CN":"伊斯兰历","en-US":"Islamic","ja-JP":"イスラム暦","ko-KR":"이슬람력"},persian:{"zh-TW":"波斯曆","zh-CN":"波斯历","en-US":"Persian","ja-JP":"ペルシア暦","ko-KR":"페르시아력"},hebrew:{"zh-TW":"希伯來曆","zh-CN":"希伯来历","en-US":"Hebrew","ja-JP":"ヘブライ暦","ko-KR":"히브리력"}};return((o=r[e])==null?void 0:o[t])||((l=r[e])==null?void 0:l["en-US"])||e}static isValidDate(e,t,r,o){try{const l=new ae(e,t,r);if(o==="gregory")return!0;const s=this.createSafeCalendar(o),i=this.safeToCalendar(l,s),c=this.getCalendarRange(o);return i.year>=c.min&&i.year<=c.max}catch(l){return console.warn("日期驗證失敗:",l),!1}}static formatOutput(e,t,r="gregory",o="zh-TW"){if(!e)return"";try{switch(r){case"gregory":return ee(new Date(e.year,e.month-1,e.day,e.hour||0,e.minute||0,e.second||0)).format(t);case"roc":if(_t.supportsFormat(t)&&_t.canParseInput(t))return _t.format(e,t,o);break;case"buddhist":case"japanese":case"islamic":case"persian":case"hebrew":break}const l=this.convertToCalendarDateSmart(e,r);if(l){const i=e.hour!==void 0||e.minute!==void 0||e.second!==void 0,c={calendar:r,year:"numeric",month:"long",day:"numeric"};return i&&(c.hour="numeric",c.minute="numeric",e.second!==void 0&&(c.second="numeric")),new gt(o,c).format(l.toDate(Intl.DateTimeFormat().resolvedOptions().timeZone))}const s=new Date(e.year,e.month-1,e.day,e.hour||0,e.minute||0,e.second||0);return ee(s).format(t)}catch(l){console.warn("所有格式化方法都失敗，使用基本回退:",l);let s=`${e.year}-${e.month.toString().padStart(2,"0")}-${e.day.toString().padStart(2,"0")}`;return(e.hour!==void 0||e.minute!==void 0||e.second!==void 0)&&(s+=` ${(e.hour||0).toString().padStart(2,"0")}:${(e.minute||0).toString().padStart(2,"0")}`,e.second!==void 0&&(s+=`:${e.second.toString().padStart(2,"0")}`)),s}}};me(pe,"convertToCalendarDateSmart",(e,t)=>e?e.hour!==void 0||e.minute!==void 0||e.second!==void 0?pe.convertToCalendarDateTime(e,t):pe.convertToCalendarDate(e,t):null),me(pe,"convertToCalendarDate",(e,t)=>{if(!e)return null;try{if(t==="gregory")return new ae(e.year,e.month,e.day);{const r=pe.createSafeCalendar(t),o=new ae(e.year,e.month,e.day);return pe.safeToCalendar(o,r)}}catch(r){return console.error("轉換為 CalendarDate 失敗:",r),null}}),me(pe,"convertToCalendarDateTime",(e,t)=>{if(!e)return null;try{if(t==="gregory")return new Fe(e.year,e.month,e.day,e.hour||0,e.minute||0,e.second||0);{const r=pe.createSafeCalendar(t),o=new Fe(e.year,e.month,e.day,e.hour||0,e.minute||0,e.second||0);return ye(o,r)}}catch(r){return console.error("轉換為 CalendarDateTime 失敗:",r),null}}),me(pe,"convertFromCalendarDate",(e,t)=>{if(!e)return null;try{if(e.calendar.identifier==="gregory"||t==="gregory")return{year:e.year,month:e.month,day:e.day};{const r=pe.createSafeCalendar("gregory"),o=pe.safeToCalendar(e,r);return{year:o.year,month:o.month,day:o.day}}}catch(r){return console.error("轉換從 CalendarDate 失敗:",r),null}});let oe=pe;const{convertToCalendarDate:ls,convertFromCalendarDate:ss,createSafeCalendar:is,safeToCalendar:cs,generateCalendarDays:us,convertGregorianYear:ds,convertToGregorianYear:ms,getCalendarRange:fs,getMonthNames:hs,getCalendarDisplayName:ps,isValidDate:gs,formatOutput:ys}=oe;ee.extend(kr),ee.extend(wr),ee.extend(la),ee.extend(Vr),ee.extend(Fr);function Le(){const n=new Date;return{year:n.getFullYear(),month:n.getMonth()+1,day:n.getDate()}}function He(){const n=new Date;return{year:n.getFullYear(),month:n.getMonth()+1,day:n.getDate(),hour:n.getHours(),minute:n.getMinutes(),second:n.getSeconds()}}function qe(n,e,t,r,o,l){const s={year:n,month:e,day:t};return r!==void 0&&(s.hour=r),o!==void 0&&(s.minute=o),l!==void 0&&(s.second=l),s}function se(n,e="zh-TW",t="gregory"){if(!n)return null;try{if(Wn(n))return n;if(n instanceof Date&&!isNaN(n.getTime()))return{year:n.getFullYear(),month:n.getMonth()+1,day:n.getDate(),hour:n.getHours(),minute:n.getMinutes(),second:n.getSeconds()};if(typeof n=="string"){const r=Ar(n,e,t);return r.success?r.date:null}return null}catch(r){return console.error("Failed to parse date:",r),null}}function fe(n,e="YYYY-MM-DD"){if(!n)return null;try{return ee("2000-01-01 00:00:00").year(n.year).month(n.month-1).date(n.day).hour(n.hour||0).minute(n.minute||0).second(n.second||0).format(e)}catch(t){return console.error("Failed to format date:",t),null}}function yt(n,e="iso",t,r=!1,o="gregory",l="zh-TW",s=!1){if(!n)return null;try{switch(e){case"iso":return r?fe(n,s?"YYYY-MM-DDTHH:mm:ss":"YYYY-MM-DD HH:mm:ss"):fe(n,"YYYY-MM-DD");case"date":return new Date(n.year,n.month-1,n.day,n.hour||0,n.minute||0,n.second||0);case"object":return n;case"custom":const i=t||(r?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD");return oe.formatOutput(n,i,o,l);default:return console.warn(`不支援的輸出類型: ${e}，回退到 ISO 格式`),fe(n,"YYYY-MM-DD")}}catch(i){return console.error("formatOutput 失敗:",i),n}}function vt(n,e){const t=n.year*1e4+n.month*100+n.day,r=e.year*1e4+e.month*100+e.day;return t<r?-1:t>r?1:0}function Jt(n,e){const t=new Date(n.year,n.month-1,n.day);return t.setDate(t.getDate()+e),{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),hour:n.hour,minute:n.minute,second:n.second}}function er(n,e){const t=new Date(n.year,n.month-1,n.day).getTime(),r=new Date(e.year,e.month-1,e.day).getTime();return Math.ceil((r-t)/(1e3*60*60*24))}function Ln(){const n=He(),e=qe(n.year,n.month,1,0,0,0),t=n.month===12?1:n.month+1,r=n.month===12?n.year+1:n.year,o=qe(r,t,1),l=Jt(o,-1);return{start:e,end:l}}function Hn(n){const e=["YYYY","YY","MM","M","DD","D"],t=n.replace(/[^\w]/g," "),r=t.includes("YYYY")||t.includes("YY"),o=t.includes("MM")||t.includes("M"),l=t.includes("DD")||t.includes("D"),i=t.split(/\s+/).filter(Boolean).some(c=>!!(/^[yY]{1,4}$/.test(c)&&!e.includes(c)||/^[mM]{1,2}$/.test(c)&&!e.includes(c)||/^[dD]{1,2}$/.test(c)&&!e.includes(c)));return r&&o&&l&&!i}function qn(n){const e=["HH","H","mm","m","ss","s","a","A"],t=n.replace(/[^\w]/g," "),r=t.includes("HH")||t.includes("H"),o=t.includes("mm")||t.includes("m"),s=t.split(/\s+/).filter(Boolean).some(i=>!!(/^[hH]{1,2}$/.test(i)&&!e.includes(i)||/^[mM]{1,2}$/.test(i)&&!e.includes(i)||/^[sS]{1,2}$/.test(i)&&!e.includes(i)));return r&&o&&!s}function zn(n){return n.replace(/yyyy/g,"YYYY").replace(/yy/g,"YY").replace(/mm/g,"MM").replace(/dd/g,"DD")}function Un(n){return n.replace(/hh/g,"HH")}function Wn(n){return n&&typeof n=="object"&&typeof n.year=="number"&&typeof n.month=="number"&&typeof n.day=="number"}const _n={class:"date-input-container flex items-center justify-start"},Jn=["placeholder","aria-invalid","aria-errormessage"],Kn=["placeholder","aria-invalid","aria-errormessage"],jn=["placeholder","aria-invalid","aria-errormessage"],Qn={key:3,class:"text-gray-400"},Zn=a.defineComponent({__name:"DateInput",props:{modelValue:{default:null},yearPlaceholder:{default:""},monthPlaceholder:{default:""},dayPlaceholder:{default:""},minDate:{default:null},maxDate:{default:null},required:{type:Boolean,default:!0},separator:{default:"-"},dateFormat:{default:"YYYY-MM-DD"}},emits:["update:modelValue","validation","complete"],setup(n,{expose:e,emit:t}){const r={mounted:Ve.mounted,updated:Ve.updated,beforeUnmount:Ve.beforeUnmount},o=n,l=t,s=a.ref(""),i=a.ref(""),c=a.ref(""),m=a.ref({}),y=a.ref({}),v=a.ref(null),g=a.ref(!1),M=a.ref(!1),w=a.ref(null),h=a.ref(new Map),f=(R,x)=>{R&&R instanceof HTMLInputElement?h.value.set(x,R):h.value.delete(x)},d=R=>h.value.get(R),k=a.computed(()=>{const R={};return Object.entries(m.value).forEach(([x,F])=>{R[x]=F.key}),R}),S=a.computed(()=>Object.keys(m.value).length>0),C=a.computed(()=>Object.values(k.value)),b=a.computed(()=>{const R=o.dateFormat.toUpperCase(),x=[];return R.split(/[^A-Z]+/).filter(Boolean).forEach(_=>{_.includes("Y")?x.push("year"):_.includes("M")?x.push("month"):_.includes("D")&&x.push("day")}),x.length!==3?(console.warn(`Invalid date format: ${o.dateFormat}, falling back to YYYY-MM-DD`),["year","month","day"]):x}),V=a.computed(()=>{if(!s.value||!i.value||!c.value)return null;const R=s.value.padStart(4,"0"),x=i.value.padStart(2,"0"),F=c.value.padStart(2,"0");return`${R}-${x}-${F}`}),u=a.computed(()=>{if(!V.value)return null;const R=ee(V.value);return R.isValid()?R.format(o.dateFormat):null});a.watch(()=>o.modelValue,R=>{if(g.value||(g.value=!0),R){const x=se(R);x&&(s.value=x.year.toString(),i.value=x.month.toString().padStart(2,"0"),c.value=x.day.toString().padStart(2,"0"))}else s.value="",i.value="",c.value="";R||(w.value=null,M.value=!1)},{immediate:!0});const p=()=>{if(b.value.length===0)return;const R=b.value[0],x=d(R);if(x&&typeof x.focus=="function")try{x.focus()}catch(F){console.warn("無法聚焦到輸入框:",F)}else for(const F of b.value){const _=d(F);if(_&&typeof _.focus=="function")try{_.focus();break}catch(q){console.warn("無法聚焦到輸入框:",q)}}},$=R=>{const x=d(R);if(x&&typeof x.focus=="function")try{x.focus()}catch(F){console.warn(`無法聚焦到 ${R} 輸入框:`,F)}},N=(R,x)=>{const F=d(R);if(F)try{if(typeof F.focus=="function"&&F.focus(),typeof F.setSelectionRange=="function"){const _=x==="end"?F.value.length:0;F.setSelectionRange(_,_)}}catch(_){console.warn(`無法聚焦或設置游標位置到 ${R} 輸入框:`,_)}},A=(R,x)=>{const F=[0,31,28,31,30,31,30,31,31,30,31,30,31];return x===2?aa(R)?29:28:F[x]},z=(R,x)=>{if(!x)return{valid:!0};const F=parseInt(x);switch(R){case"year":if(x.length<4)return{valid:!0};const _=o.maxDate?ee(o.maxDate).year():new Date().getFullYear()+50,q=o.minDate?ee(o.minDate).year():1;if(!Re(x)||F<q||F>_)return{valid:!1,error:{key:"year.outOfRange",params:{min:q,max:_}}};if(i.value==="02"&&c.value==="29"&&!aa(F))return{valid:!1,error:{key:"year.notLeapYear",params:{year:F}}};break;case"month":if(!Re(x)||F<1||F>12)return{valid:!1,error:{key:"month.outOfRange"}};if(c.value&&s.value){const Z=parseInt(s.value),H=A(Z,F);if(parseInt(c.value)>H)return{valid:!1,error:{key:"day.notExistInMonth",params:{month:x,maxDays:H}}}}break;case"day":if(!Re(x)||F<1||F>31)return{valid:!1,error:{key:"day.outOfRange"}};if(s.value&&i.value){const Z=parseInt(s.value),H=parseInt(i.value),T=A(Z,H);if(F>T)return H===2&&F===29?{valid:!1,error:{key:"year.notLeapYear",params:{year:Z}}}:{valid:!1,error:{key:"day.notExistInMonth",params:{month:i.value,maxDays:T}}}}break}return m.value[R]&&(delete m.value[R],delete y.value[R]),{valid:!0}},L=()=>{if(!g.value)return;m.value={},y.value={};const R=z("year",s.value),x=z("month",i.value),F=z("day",c.value);if(!R.valid&&R.error&&(m.value.year=R.error,R.error.params&&(y.value.year=R.error.params)),!x.valid&&x.error&&(m.value.month=x.error,x.error.params&&(y.value.month=x.error.params)),!F.valid&&F.error&&(m.value.day=F.error,F.error.params&&(y.value.day=F.error.params)),o.required&&(s.value||(m.value.year={key:"year.required"}),i.value||(m.value.month={key:"month.required"}),c.value||(m.value.day={key:"day.required"})),V.value&&Object.keys(m.value).length===0){const _=ee(V.value);if(!_.isValid())m.value.day={key:"day.invalid"};else if(o.minDate&&_.isBefore(ee(o.minDate)))m.value.day={key:"date.beforeMin",params:{minDate:ee(o.minDate).format(o.dateFormat)}},y.value.day={minDate:ee(o.minDate).format(o.dateFormat)};else if(o.maxDate&&_.isAfter(ee(o.maxDate)))m.value.day={key:"date.afterMax",params:{maxDate:ee(o.maxDate).format(o.dateFormat)}},y.value.day={maxDate:ee(o.maxDate).format(o.dateFormat)};else if(u.value){l("update:modelValue",u.value);const q=u.value;q!==w.value&&!M.value&&(w.value=q,l("complete",u.value))}}else g.value&&!s.value&&!i.value&&!c.value&&(l("update:modelValue",null),w.value=null);l("validation",!S.value,k.value,y.value)},Q=()=>{s.value="",i.value="",c.value="",m.value={}},j=R=>{const x=b.value.findIndex(_=>_===R),F=x<b.value.length-1?b.value[x+1]:null;F?a.nextTick(()=>{$(F)}):L()},Y=(R,x,F,_)=>{const q=x.replace(/\D/g,"");if(q.length===1&&M.value&&(M.value=!1),q.length<=F){if(_&&q.length===1&&parseInt(q)>_){const Z=q.padStart(2,"0");R==="year"?s.value=Z:R==="month"?i.value=Z:R==="day"&&(c.value=Z),j(R)}else R==="year"?s.value=q:R==="month"?i.value=q:R==="day"&&(c.value=q);q.length===F&&j(R)}},I=R=>{const x=R.target;Y("year",x.value,4)},D=R=>{const x=R.target;Y("month",x.value,2,1)},P=R=>{const x=R.target;Y("day",x.value,2,3)},O=()=>{a.nextTick(()=>{if(b.value.length===0)return;const R=b.value[b.value.length-1],x=d(R);if(x&&typeof x.focus=="function")try{x.focus();const F=x.value.length;x.setSelectionRange(F,F)}catch(F){console.warn("無法聚焦到最後一個輸入框:",F)}})},K=(R,x)=>{const F=R.target,_=b.value.findIndex(H=>H===x),q=_>0?b.value[_-1]:null,Z=_<b.value.length-1?b.value[_+1]:null;R.key==="Backspace"&&F.value===""&&q&&(R.preventDefault(),M.value=!0,N(q,"end")),R.key==="ArrowLeft"&&F.selectionStart===0&&q&&(R.preventDefault(),M.value=!0,N(q,"end")),R.key==="ArrowRight"&&F.selectionStart===F.value.length&&Z&&(R.preventDefault(),M.value=!0,N(Z,"start")),R.key==="Enter"&&L()},re=R=>{v.value=R},X=R=>{L(),v.value=null};return e({validate:L,reset:()=>{Q(),l("update:modelValue",null)},getErrors:()=>({...m.value}),hasErrors:()=>S.value,errorMessages:()=>C.value,focus:p,focusLast:O,setDate:R=>{if(R){const x=se(R);x&&(s.value=x.year.toString(),i.value=x.month.toString().padStart(2,"0"),c.value=x.day.toString().padStart(2,"0"),L())}else Q(),l("update:modelValue",null)},resetCompletionState:()=>{M.value=!1,w.value=null}}),(R,x)=>(a.openBlock(),a.createElementBlock("div",_n,[(a.openBlock(!0),a.createElementBlock(a.Fragment,null,a.renderList(b.value,(F,_)=>(a.openBlock(),a.createElementBlock(a.Fragment,{key:F},[F==="year"?a.withDirectives((a.openBlock(),a.createElementBlock("input",{key:0,ref_for:!0,ref:q=>f(q,"year"),"onUpdate:modelValue":x[0]||(x[0]=q=>s.value=q),type:"text",inputmode:"numeric",placeholder:R.yearPlaceholder,maxlength:4,class:"date-input text-sm text-center active:bg-vdt-theme-100",onInput:I,onKeydown:x[1]||(x[1]=q=>K(q,"year")),onFocus:x[2]||(x[2]=q=>re("year")),onBlur:x[3]||(x[3]=q=>X()),"aria-label":"year","aria-invalid":!!k.value.year,"aria-errormessage":k.value.year?"year-error":void 0},null,40,Jn)),[[a.vModelText,s.value],[r,20]]):F==="month"?a.withDirectives((a.openBlock(),a.createElementBlock("input",{key:1,ref_for:!0,ref:q=>f(q,"month"),"onUpdate:modelValue":x[4]||(x[4]=q=>i.value=q),type:"text",inputmode:"numeric",placeholder:R.monthPlaceholder,maxlength:2,class:"date-input text-sm text-center",onInput:D,onKeydown:x[5]||(x[5]=q=>K(q,"month")),onFocus:x[6]||(x[6]=q=>re("month")),onBlur:x[7]||(x[7]=q=>X()),"aria-label":"month","aria-invalid":!!k.value.month,"aria-errormessage":k.value.month?"month-error":void 0},null,40,Kn)),[[a.vModelText,i.value],[r,20]]):F==="day"?a.withDirectives((a.openBlock(),a.createElementBlock("input",{key:2,ref_for:!0,ref:q=>f(q,"day"),"onUpdate:modelValue":x[8]||(x[8]=q=>c.value=q),type:"text",inputmode:"numeric",placeholder:R.dayPlaceholder,maxlength:2,class:"date-input text-sm text-center",onInput:P,onKeydown:x[9]||(x[9]=q=>K(q,"day")),onFocus:x[10]||(x[10]=q=>re("day")),onBlur:x[11]||(x[11]=q=>X()),"aria-label":"day","aria-invalid":!!k.value.day,"aria-errormessage":k.value.day?"day-error":void 0},null,40,jn)),[[a.vModelText,c.value],[r,20]]):a.createCommentVNode("",!0),_<b.value.length-1?(a.openBlock(),a.createElementBlock("span",Qn,a.toDisplayString(R.separator),1)):a.createCommentVNode("",!0)],64))),128))]))}}),be=(n,e)=>{const t=n.__vccOpts||n;for(const[r,o]of e)t[r]=o;return t},Kt=be(Zn,[["__scopeId","data-v-6f94f3cd"]]),Gn={class:"time-input-container flex items-center justify-center"},Xn=["placeholder","aria-invalid","aria-errormessage"],eo=["placeholder","aria-invalid","aria-errormessage"],to=["placeholder","aria-invalid","aria-errormessage"],jt=be(a.defineComponent({__name:"TimeInput",props:{modelValue:{default:null},hourPlaceholder:{default:"HH"},minutePlaceholder:{default:"MM"},secondPlaceholder:{default:"SS"},enableSeconds:{type:Boolean,default:!1},use24Hour:{type:Boolean,default:!0},required:{type:Boolean,default:!1},locale:{default:"zh-TW"},useLocalizedPeriod:{type:Boolean,default:!1},minuteStep:{default:1}},emits:["update:modelValue","validation","complete","navigate-to-date"],setup(n,{expose:e,emit:t}){const r={mounted:Ve.mounted,updated:Ve.updated,beforeUnmount:Ve.beforeUnmount},o=n,l=t,s=a.ref(""),i=a.ref(""),c=a.ref(""),m=a.ref("AM"),y=a.ref({}),v=a.ref({}),g=a.ref(null),M=a.ref(!1),w=a.ref(),h=a.ref(),f=a.ref(),d=a.computed(()=>Object.keys(y.value).length>0),k=a.computed(()=>{const Y={};return Object.entries(y.value).forEach(([I,D])=>{Y[I]=D.key}),Y}),S=()=>{s.value="",i.value="",c.value="",m.value="AM"},C=a.computed(()=>{var Y,I;if(!o.useLocalizedPeriod)return m.value;try{const D=new Date;D.setHours(9,0,0);const P=new Date;P.setHours(15,0,0);const O=new Intl.DateTimeFormat(o.locale,{hour:"numeric",hour12:!0}),K=O.formatToParts(D),re=O.formatToParts(P),X=((Y=K.find(x=>x.type==="dayPeriod"))==null?void 0:Y.value)||"AM",R=((I=re.find(x=>x.type==="dayPeriod"))==null?void 0:I.value)||"PM";return m.value==="AM"?X:R}catch(D){return console.error("Error getting localized period:",D),m.value}}),b=a.computed(()=>C.value),V=a.computed(()=>{if(s.value===""||i.value===""||o.enableSeconds&&c.value==="")return null;let Y=parseInt(s.value,10);o.use24Hour||(m.value==="PM"&&Y<12?Y+=12:m.value==="AM"&&Y===12&&(Y=0));const I=Y.toString().padStart(2,"0"),D=i.value.padStart(2,"0");if(o.enableSeconds){const P=c.value.padStart(2,"0");return`${I}:${D}:${P}`}else return`${I}:${D}`});a.watch(()=>o.modelValue,Y=>{if(M.value||(M.value=!0),Y){const I=Y.split(":");let D=parseInt(I[0]||"0",10);const P=I[1]||"",O=I[2]||"";o.use24Hour||(D>=12?(m.value="PM",D=D===12?12:D-12):(m.value="AM",D=D===0?12:D)),s.value=D.toString().padStart(2,"0"),i.value=P,o.enableSeconds&&(c.value=O)}else S()},{immediate:!0});const u=(Y,I)=>{if(!I)return{valid:!0};const D=parseInt(I);switch(Y){case"hour":const P=o.use24Hour?23:12,O=o.use24Hour?0:1;if(!Re(I)||D<O||D>P)return{valid:!1,error:{key:"time.hourOutOfRange",params:{min:O,max:P}}};break;case"minute":if(!Re(I)||D<0||D>59)return{valid:!1,error:{key:"time.minuteOutOfRange",params:{min:0,max:59}}};if(o.minuteStep>1&&D%o.minuteStep!==0)return{valid:!1,error:{key:"time.minuteStepInvalid",params:{step:o.minuteStep}}};break;case"second":if(!Re(I)||D<0||D>59)return{valid:!1,error:{key:"time.secondOutOfRange",params:{min:0,max:59}}};break}return y.value[Y]&&(delete y.value[Y],delete v.value[Y]),{valid:!0}},p=()=>{m.value=m.value==="AM"?"PM":"AM",$()},$=()=>{if(!M.value)return;y.value={},v.value={};const Y=u("hour",s.value),I=u("minute",i.value),D=o.enableSeconds?u("second",c.value):{valid:!0};!Y.valid&&Y.error&&(y.value.hour=Y.error,Y.error.params&&(v.value.hour=Y.error.params)),!I.valid&&I.error&&(y.value.minute=I.error,I.error.params&&(v.value.minute=I.error.params)),!D.valid&&D.error&&(y.value.second=D.error,D.error.params&&(v.value.second=D.error.params)),o.required&&(s.value||(y.value.hour={key:"time.hourRequired"}),i.value||(y.value.minute={key:"time.minuteRequired"}),o.enableSeconds&&!c.value&&(y.value.second={key:"time.secondRequired"})),l("validation",!d.value,k.value,v.value),V.value?(l("update:modelValue",V.value),l("complete",V.value)):M.value&&l("update:modelValue",null)},N=Y=>{const D=Y.target.value.replace(/\D/g,"");if(D.length<=2){if(s.value=D,!u("hour",D).valid)return;(D.length===2||o.use24Hour&&parseInt(D)>2||!o.use24Hour&&parseInt(D)>1)&&a.nextTick(()=>{var O;(O=h.value)==null||O.focus()})}},A=Y=>{const D=Y.target.value.replace(/\D/g,"");if(D.length<=2){if(D.length===1&&parseInt(D)>5?(i.value=D.padStart(2,"0"),a.nextTick(()=>{o.enableSeconds&&f.value?f.value.focus():$()})):i.value=D,!u("minute",D).valid)return;D.length===2&&a.nextTick(()=>{o.enableSeconds&&f.value?f.value.focus():$()})}},z=Y=>{const D=Y.target.value.replace(/\D/g,"");if(D.length<=2){if(D.length===1&&parseInt(D)>5?(c.value=D.padStart(2,"0"),$()):c.value=D,!u("second",D).valid)return;D.length===2&&$()}},L=(Y,I)=>{var P,O,K,re,X,R,x,F,_,q,Z,H;const D=Y.target;if(Y.key==="Backspace"&&D.value==="")switch(I){case"hour":Y.preventDefault(),l("navigate-to-date");break;case"minute":Y.preventDefault(),(P=w.value)==null||P.focus(),(O=w.value)==null||O.setSelectionRange(-1,-1);break;case"second":Y.preventDefault(),(K=h.value)==null||K.focus(),(re=h.value)==null||re.setSelectionRange(-1,-1);break}if(Y.key==="ArrowLeft"&&D.selectionStart===0)switch(I){case"hour":Y.preventDefault(),l("navigate-to-date");break;case"minute":Y.preventDefault(),(X=w.value)==null||X.focus(),(R=w.value)==null||R.setSelectionRange(-1,-1);break;case"second":Y.preventDefault(),(x=h.value)==null||x.focus(),(F=h.value)==null||F.setSelectionRange(-1,-1);break}if(Y.key==="ArrowRight"&&D.selectionStart===D.value.length)switch(I){case"hour":Y.preventDefault(),(_=h.value)==null||_.focus(),(q=h.value)==null||q.setSelectionRange(0,0);break;case"minute":o.enableSeconds&&(Y.preventDefault(),(Z=f.value)==null||Z.focus(),(H=f.value)==null||H.setSelectionRange(0,0));break}Y.key==="Enter"&&$()},Q=Y=>{g.value=Y},j=Y=>{g.value=null,$()};return e({validate:$,reset:()=>{S(),y.value={},v.value={},l("update:modelValue",null)},getErrors:()=>k.value,hasErrors:d,setTime:Y=>{if(Y){const[I,D,P]=Y.split(":");let O=parseInt(I);o.use24Hour||(O>=12?(m.value="PM",O=O===12?12:O-12):(m.value="AM",O=O===0?12:O)),s.value=O.toString().padStart(2,"0"),i.value=D,o.enableSeconds&&P&&(c.value=P),$()}else S(),l("update:modelValue",null)},focus:()=>{var Y;(Y=w.value)==null||Y.focus()},focusLast:()=>{o.enableSeconds&&f.value?(f.value.focus(),f.value.setSelectionRange(0,0)):h.value?(h.value.focus(),h.value.setSelectionRange(0,0)):w.value&&(w.value.focus(),w.value.setSelectionRange(0,0))}}),(Y,I)=>(a.openBlock(),a.createElementBlock("div",Gn,[a.withDirectives(a.createElementVNode("input",{ref_key:"hourRef",ref:w,"onUpdate:modelValue":I[0]||(I[0]=D=>s.value=D),type:"text",inputmode:"numeric",placeholder:Y.hourPlaceholder,maxlength:2,class:"time-input text-sm text-center",onInput:N,onKeydown:I[1]||(I[1]=D=>L(D,"hour")),onFocus:I[2]||(I[2]=D=>Q("hour")),onBlur:I[3]||(I[3]=D=>j()),"aria-label":"hour","aria-invalid":!!y.value.hour,"aria-errormessage":y.value.hour?"hour-error":void 0},null,40,Xn),[[a.vModelText,s.value],[r,20]]),I[13]||(I[13]=a.createElementVNode("span",{class:"text-gray-400 mx-1"},":",-1)),a.withDirectives(a.createElementVNode("input",{ref_key:"minuteRef",ref:h,"onUpdate:modelValue":I[4]||(I[4]=D=>i.value=D),type:"text",inputmode:"numeric",placeholder:Y.minutePlaceholder,maxlength:2,class:"time-input text-sm text-center",onInput:A,onKeydown:I[5]||(I[5]=D=>L(D,"minute")),onFocus:I[6]||(I[6]=D=>Q("minute")),onBlur:I[7]||(I[7]=D=>j()),"aria-label":"minute","aria-invalid":!!y.value.minute,"aria-errormessage":y.value.minute?"minute-error":void 0},null,40,eo),[[a.vModelText,i.value],[r,20]]),Y.enableSeconds?(a.openBlock(),a.createElementBlock(a.Fragment,{key:0},[I[12]||(I[12]=a.createElementVNode("span",{class:"text-gray-400 mx-1"},":",-1)),a.withDirectives(a.createElementVNode("input",{ref_key:"secondRef",ref:f,"onUpdate:modelValue":I[8]||(I[8]=D=>c.value=D),type:"text",inputmode:"numeric",placeholder:Y.secondPlaceholder,maxlength:2,class:"time-input text-sm text-center",onInput:z,onKeydown:I[9]||(I[9]=D=>L(D,"second")),onFocus:I[10]||(I[10]=D=>Q("second")),onBlur:I[11]||(I[11]=D=>j()),"aria-label":"second","aria-invalid":!!y.value.second,"aria-errormessage":y.value.second?"second-error":void 0},null,40,to),[[a.vModelText,c.value],[r,20]])],64)):a.createCommentVNode("",!0),Y.use24Hour?a.createCommentVNode("",!0):(a.openBlock(),a.createElementBlock("button",{key:1,type:"button",class:a.normalizeClass(["time-period pl-2 text-sm cursor-pointer",s.value?"text-vdt-content":"text-gray-400"]),onClick:a.withModifiers(p,["stop"])},a.toDisplayString(b.value),3))]))}}),[["__scopeId","data-v-c217ec5e"]]),$t={"zh-TW":{error:{date:{required:"請選擇日期",invalid:"無效的日期",outOfRange:"日期超出允許範圍",beforeMin:"日期不能早於 {minDate}",afterMax:"日期不能晚於 {maxDate}",unsupportedFormat:"不支援的日期格式，支援格式: {formats}",parseError:"日期解析失敗，請檢查日期格式"},time:{required:"請選擇時間",invalid:"無效的時間",hourOutOfRange:"小時必須是 {min}-{max} 之間的數字",minuteOutOfRange:"分鐘必須是 0-59 之間的數字",secondOutOfRange:"秒鐘必須是 0-59 之間的數字",hourRequired:"請輸入小時",minuteRequired:"請輸入分鐘",secondRequired:"請輸入秒鐘",minuteStepInvalid:"分鐘必須是 {step} 的倍數"},year:{required:"請輸入年份",invalid:"年份格式不正確",outOfRange:"年份必須是 {min}-{max} 之間的數字",notLeapYear:"{year}年2月沒有29日，不是閏年"},month:{required:"請輸入月份",invalid:"月份格式不正確",outOfRange:"月份必須是 1-12 之間的數字"},day:{required:"請輸入日期",invalid:"日期格式不正確",outOfRange:"日期必須是 1-31 之間的數字",notExistInMonth:"{month}月最多只有{maxDays}天"},range:{startRequired:"請選擇開始日期",endRequired:"請選擇結束日期",startAfterEnd:"開始日期不能晚於結束日期",exceedsMaxRange:"選擇範圍不能超過 {maxRange} 天",belowMinRange:"選擇範圍不能少於 {minRange} 天"},format:{dateFormat:'日期格式不正確: "{original}" 已自動修復為 "{fixed}"',timeFormat:'時間格式不正確: "{original}" 已自動修復為 "{fixed}"'}},placeholder:{date:{year:"年",month:"月",day:"日"},time:{hour:"時",minute:"分",second:"秒"},general:{selectDate:"請選擇日期",selectTime:"請選擇時間",clear:"清除",time:"時間"},range:{start:"請選擇開始日期",end:"請選擇結束日期"}},yearSelector:{jumpToYear:"跳至年份",inputYearPlaceholder:"輸入西元年...",yearRangeInfo:"{calendar}年範圍: {min} - {max}",noYearsToDisplay:"沒有可顯示的年份",returnToValidRange:"返回有效範圍"}},"zh-CN":{error:{date:{required:"请选择日期",invalid:"无效的日期",outOfRange:"日期超出允许范围",beforeMin:"日期不能早于 {minDate}",afterMax:"日期不能晚于 {maxDate}",unsupportedFormat:"不支持的日期格式，支持格式: {formats}",parseError:"日期解析失败，请检查日期格式"},time:{required:"请选择时间",invalid:"无效的时间",hourOutOfRange:"小时必须是 {min}-{max} 之间的数字",minuteOutOfRange:"分钟必须是 0-59 之间的数字",secondOutOfRange:"秒钟必须是 0-59 之间的数字",hourRequired:"请输入小时",minuteRequired:"请输入分钟",secondRequired:"请输入秒钟",minuteStepInvalid:"分钟必须是 {step} 的倍数"},year:{required:"请输入年份",invalid:"年份格式不正确",outOfRange:"年份必须是 {min}-{max} 之间的数字",notLeapYear:"{year}年2月没有29日，不是闰年"},month:{required:"请输入月份",invalid:"月份格式不正确",outOfRange:"月份必须是 1-12 之间的数字"},day:{required:"请输入日期",invalid:"日期格式不正确",outOfRange:"日期必须是 1-31 之间的数字",notExistInMonth:"{month}月最多只有{maxDays}天"},range:{startRequired:"请选择开始日期",endRequired:"请选择结束日期",startAfterEnd:"开始日期不能晚于结束日期",exceedsMaxRange:"选择范围不能超过 {maxRange} 天",belowMinRange:"选择范围不能少于 {minRange} 天"},format:{dateFormat:'日期格式不正确: "{original}" 已自动修复为 "{fixed}"',timeFormat:'时间格式不正确: "{original}" 已自动修复为 "{fixed}"'}},placeholder:{date:{year:"年",month:"月",day:"日"},time:{hour:"时",minute:"分",second:"秒"},general:{selectDate:"请选择日期",selectTime:"请选择时间",clear:"清除",time:"时间"},range:{start:"请选择开始日期",end:"请选择结束日期"}},yearSelector:{jumpToYear:"跳至年份",inputYearPlaceholder:"输入公历年...",yearRangeInfo:"{calendar}年范围: {min} - {max}",noYearsToDisplay:"没有可显示的年份",returnToValidRange:"返回有效范围"}},"en-US":{error:{date:{required:"Please select a date",invalid:"Invalid date",outOfRange:"Date is out of allowed range",beforeMin:"Date cannot be before {minDate}",afterMax:"Date cannot be after {maxDate}",unsupportedFormat:"Unsupported date format, supported formats: {formats}",parseError:"Failed to parse date, please check the date format"},time:{required:"Please select a time",invalid:"Invalid time",hourOutOfRange:"Hour must be between {min}-{max}",minuteOutOfRange:"Minute must be between 0-59",secondOutOfRange:"Second must be between 0-59",hourRequired:"Please enter hour",minuteRequired:"Please enter minute",secondRequired:"Please enter second",minuteStepInvalid:"Minute must be a multiple of {step}"},year:{required:"Please enter year",invalid:"Invalid year format",outOfRange:"Year must be between {min}-{max}",notLeapYear:"February 29th does not exist in {year}, not a leap year"},month:{required:"Please enter month",invalid:"Invalid month format",outOfRange:"Month must be between 1-12"},day:{required:"Please enter day",invalid:"Invalid day format",outOfRange:"Day must be between 1-31",notExistInMonth:"Month {month} has maximum {maxDays} days"},range:{startRequired:"Please select start date",endRequired:"Please select end date",startAfterEnd:"Start date cannot be after end date",exceedsMaxRange:"Selection range cannot exceed {maxRange} days",belowMinRange:"Selection range cannot be less than {minRange} days"},format:{dateFormat:'Invalid date format: "{original}" auto-fixed to "{fixed}"',timeFormat:'Invalid time format: "{original}" auto-fixed to "{fixed}"'}},placeholder:{date:{year:"YYYY",month:"MM",day:"DD"},time:{hour:"HH",minute:"mm",second:"ss"},general:{selectDate:"Please select a date",selectTime:"Please select a time",clear:"Clear",time:"Time"},range:{start:"Please select start date",end:"Please select end date"}},yearSelector:{jumpToYear:"Jump to Year",inputYearPlaceholder:"Enter Gregorian year...",yearRangeInfo:"{calendar} Year Range: {min} - {max}",noYearsToDisplay:"No years to display",returnToValidRange:"Return to valid range"}},"ja-JP":{error:{date:{required:"日付を選択してください",invalid:"無効な日付",outOfRange:"日付が許可範囲外です",beforeMin:"日付は {minDate} より前にはできません",afterMax:"日付は {maxDate} より後にはできません",unsupportedFormat:"サポートされていない日付形式です。サポート形式: {formats}",parseError:"日付の解析に失敗しました。日付形式を確認してください"},time:{required:"時刻を選択してください",invalid:"無効な時刻",hourOutOfRange:"時間は {min}-{max} の間で入力してください",minuteOutOfRange:"分は 0-59 の間で入力してください",secondOutOfRange:"秒は 0-59 の間で入力してください",hourRequired:"時間を入力してください",minuteRequired:"分を入力してください",secondRequired:"秒を入力してください",minuteStepInvalid:"分は {step} の倍数でなければなりません"},year:{required:"年を入力してください",invalid:"年の形式が正しくありません",outOfRange:"年は {min}-{max} の間で入力してください",notLeapYear:"{year}年2月29日は存在しません（うるう年ではありません）"},month:{required:"月を入力してください",invalid:"月の形式が正しくありません",outOfRange:"月は 1-12 の間で入力してください"},day:{required:"日を入力してください",invalid:"日の形式が正しくありません",outOfRange:"日は 1-31 の間で入力してください",notExistInMonth:"{month}月は最大 {maxDays} 日までです"},range:{startRequired:"開始日を選択してください",endRequired:"終了日を選択してください",startAfterEnd:"開始日は終了日より後にはできません",exceedsMaxRange:"選択範囲は {maxRange} 日を超えることはできません",belowMinRange:"選択範囲は {minRange} 日未満にはできません"},format:{dateFormat:'日付形式が正しくありません: "{original}" を "{fixed}" に自動修正しました',timeFormat:'時刻形式が正しくありません: "{original}" を "{fixed}" に自動修正しました'}},placeholder:{date:{year:"年",month:"月",day:"日"},time:{hour:"時",minute:"分",second:"秒"},general:{selectDate:"日付を選択してください",selectTime:"時刻を選択してください",clear:"クリア",time:"時刻"},range:{start:"開始日を選択してください",end:"終了日を選択してください"}},yearSelector:{jumpToYear:"年にジャンプ",inputYearPlaceholder:"西暦年を入力...",yearRangeInfo:"{calendar}年の範囲: {min} - {max}",noYearsToDisplay:"表示する年はありません",returnToValidRange:"有効な範囲に戻る"}},"ko-KR":{error:{date:{required:"날짜를 선택해주세요",invalid:"유효하지 않은 날짜",outOfRange:"날짜가 허용 범위를 벗어났습니다",beforeMin:"날짜는 {minDate}보다 이전일 수 없습니다",afterMax:"날짜는 {maxDate}보다 이후일 수 없습니다",unsupportedFormat:"지원하지 않는 날짜 형식입니다. 지원 형식: {formats}",parseError:"날짜를 파싱하는 데 실패했습니다. 날짜 형식을 확인해주세요"},time:{required:"시간을 선택해주세요",invalid:"유효하지 않은 시간",hourOutOfRange:"시간은 {min}-{max} 사이의 숫자여야 합니다",minuteOutOfRange:"분은 0-59 사이의 숫자여야 합니다",secondOutOfRange:"초는 0-59 사이의 숫자여야 합니다",hourRequired:"시간을 입력해주세요",minuteRequired:"분을 입력해주세요",secondRequired:"초을 입력해주세요",minuteStepInvalid:"분은 {step}의 배수여야 합니다"},year:{required:"연도를 입력해주세요",invalid:"연도 형식이 올바르지 않습니다",outOfRange:"연도는 {min}-{max} 사이의 숫자여야 합니다",notLeapYear:"{year}년 2월 29일은 존재하지 않습니다 (윤년이 아님)"},month:{required:"월을 입력해주세요",invalid:"월 형식이 올바르지 않습니다",outOfRange:"월은 1-12 사이의 숫자여야 합니다"},day:{required:"일을 입력해주세요",invalid:"일 형식이 올바르지 않습니다",outOfRange:"일은 1-31 사이의 숫자여야 합니다",notExistInMonth:"{month}월은 최대 {maxDays}일까지입니다"},range:{startRequired:"시작 날짜를 선택해주세요",endRequired:"종료 날짜를 선택해주세요",startAfterEnd:"시작 날짜는 종료 날짜보다 늦을 수 없습니다",exceedsMaxRange:"선택 범위는 {maxRange}일을 초과할 수 없습니다",belowMinRange:"선택 범위는 {minRange}일 미만일 수 없습니다"},format:{dateFormat:'날짜 형식이 올바르지 않습니다: "{original}"을(를) "{fixed}"로 자동 수정했습니다',timeFormat:'시간 형식이 올바르지 않습니다: "{original}"을(를) "{fixed}"로 자동 수정했습니다'}},placeholder:{date:{year:"년",month:"월",day:"일"},time:{hour:"시",minute:"분",second:"초"},general:{selectDate:"날짜를 선택해주세요",selectTime:"시간을 선택해주세요",clear:"지우기",time:"시간"},range:{start:"시작 날짜를 선택해주세요",end:"종료 날짜를 선택해주세요"}},yearSelector:{jumpToYear:"연도로 이동",inputYearPlaceholder:"서기 연도를 입력...",yearRangeInfo:"{calendar}년 범위: {min} - {max}",noYearsToDisplay:"표시한 연도는 없습니다",returnToValidRange:"유효한 범위로 이동"}}};function tr(n,e){return n.replace(/\{(\w+)\}/g,(t,r)=>{var o;return((o=e[r])==null?void 0:o.toString())||t})}class ao{constructor(){me(this,"currentLocale","zh-TW")}setLocale(e){this.currentLocale=e}getCurrentLocale(){return this.currentLocale}getMessage(e,t){const r=e.split(".");let o=$t[this.currentLocale];for(const l of r)o=o==null?void 0:o[l];return typeof o!="string"?(console.warn(`Missing translation for path: ${e} in locale: ${this.currentLocale}`),e):t?tr(o,t):o}getErrorMessage(e,t){return this.getMessage(`error.${e}`,t)}getPlaceholderMessage(e,t){return this.getMessage(`placeholder.${e}`,t)}addCustomMessages(e,t){$t[e]={...$t[e],...this.deepMerge($t[e],t)}}getParameterizedErrorMessage(e,t={}){const r=this.getErrorMessage(e);return this.interpolateParameters(r,t)}interpolateParameters(e,t={}){return!t||Object.keys(t).length===0?e:e.replace(/\{(\w+)\}/g,(r,o)=>{const l=t[o];return l==null?(console.warn(`Missing variable '${o}' for template: "${e}"`),r):String(l)})}deepMerge(e,t){const r={...e};for(const o in t)t[o]&&typeof t[o]=="object"&&!Array.isArray(t[o])?r[o]=this.deepMerge(r[o]||{},t[o]):r[o]=t[o];return r}}function Ze(n="en-US"){const e=new ao,t=["zh-TW","zh-CN","en-US","ja-JP","ko-KR"],r=v=>t.includes(v)?v:(console.warn(`Locale "${v}" is not supported. Defaulting to "en-US".`),"en-US"),o=r(n),l=a.ref(o);e.setLocale(o);const s=v=>{l.value=r(v),e.setLocale(l.value)},i=(v,g)=>e.getMessage(v,g),c=(v,g)=>e.getErrorMessage(v,g),m=(v,g)=>e.getPlaceholderMessage(v,g),y=(v,g)=>tr(v,g);return{currentLocale:a.computed(()=>l.value),setLocale:s,getMessage:i,getErrorMessage:c,getPlaceholderMessage:m,formatText:y}}const ro={key:0,class:"mt-1 text-sm text-red-500"},no={key:0},oo={key:1},lo={key:2},ar=a.defineComponent({__name:"DateErrorMessage",props:{errors:{default:void 0},errorParams:{default:()=>({})},locale:{default:"zh-TW"},useI18n:{type:Boolean,default:!0},customMessages:{default:()=>({})},messageKeyMap:{default:()=>({})},debug:{type:Boolean,default:!1}},setup(n,{expose:e}){const t=n,{currentLocale:r,setLocale:o,getErrorMessage:l}=Ze(t.locale);a.watch(()=>t.locale,f=>{f&&t.useI18n&&o(f)},{immediate:!0});const s=a.ref({}),i=a.ref({}),c=a.computed(()=>({...t.customMessages,...s.value})),m=a.computed(()=>t.errors?Array.isArray(t.errors)?t.errors.length>0:typeof t.errors=="string"?t.errors.trim().length>0:typeof t.errors=="object"?Object.values(t.errors).some(f=>f&&f.trim().length>0):!1:!1),y=a.computed(()=>{if(!t.errors)return null;if(typeof t.errors=="string")return w(t.errors);if(Array.isArray(t.errors))return t.errors.map((f,d)=>({field:`item-${d}`,message:w(f),originalKey:f}));if(typeof t.errors=="object"){const f={};return Object.entries(t.errors).forEach(([d,k])=>{var S;if(k){i.value[d]=k;const C=((S=t.errorParams)==null?void 0:S[d])||{};f[d]=w(k,d,C),t.debug&&console.log(`Processing error for field "${d}":`,{original:k,params:C,translated:f[d],field:d,slotName:g(d)})}}),f}return t.errors});function v(f){return i.value[f]}function g(f){return`error-${f.replace(/^(date|time|range)\./,"")}`}function M(f){return f.startsWith("date.")?"date":f.startsWith("time.")?"time":f.startsWith("range.")?"range":"unknown"}function w(f,d,k={}){if(t.debug&&console.log(`翻譯訊息: "${f}", field: "${d}", params:`,k),c.value[f])return c.value[f];if(!t.useI18n)return f;if(/^[a-zA-Z]+\.[a-zA-Z]+$/.test(f))try{const b=l(f,k);if(t.debug&&console.log(`Locale key 翻譯: "${f}" -> "${b}" with params:`,k),b&&b!==f)return b}catch(b){t.debug&&console.warn(`Locale key 翻譯失敗: ${f}`,b)}const C=t.messageKeyMap[f];if(C)try{const b=l(C,k);if(t.debug&&console.log(`MessageKeyMap 翻譯: "${f}" -> "${b}" with params:`,k),b&&b!==C)return b}catch(b){t.debug&&console.warn(`MessageKeyMap 翻譯失敗: ${C}`,b)}return h(f,d,k)}function h(f,d,k={}){t.debug&&console.log(`smartTranslateError: "${f}", field: "${d}", params:`,k);const S={請選擇日期:"date.required",請選擇時間:"time.required",請選擇開始日期:"range.startRequired",請選擇結束日期:"range.endRequired","Please select a date":"date.required","Please select a time":"time.required","Please select start date":"range.startRequired","Please select end date":"range.endRequired"};if(S[f])try{const u=l(S[f],k);if(t.debug&&console.log(`直接匹配翻譯: "${f}" -> "${u}" with params:`,k),u&&u!==S[f])return u}catch(u){t.debug&&console.warn(`直接匹配翻譯失敗: ${S[f]}`,u)}function C(u,p){if(/請輸入|please enter|required/i.test(u)){if(p!=null&&p.includes("year")||u.includes("年份"))return"year.required";if(p!=null&&p.includes("month")||u.includes("月份"))return"month.required";if(p!=null&&p.includes("day")||u.includes("日期"))return"day.required";if(p!=null&&p.includes("hour")||u.includes("小時"))return"time.hourRequired";if(p!=null&&p.includes("minute")||u.includes("分鐘"))return"time.minuteRequired";if(p!=null&&p.includes("second")||u.includes("秒鐘"))return"time.secondRequired";if(p!=null&&p.includes("startDate")||u.includes("開始日期"))return"range.startRequired";if(p!=null&&p.includes("endDate")||u.includes("結束日期"))return"range.endRequired";if(p!=null&&p.includes("time")||u.includes("時間"))return"time.required";if(p!=null&&p.includes("date")||u.includes("日期"))return"date.required"}return null}const b=C(f,d);if(b)try{const u=l(b,k);if(t.debug&&console.log(`智能匹配翻譯: "${f}" -> "${u}" with params:`,k),u&&u!==b)return u}catch(u){t.debug&&console.warn(`智能匹配翻譯失敗: ${b}`,u)}const V=[{regex:/(年份|year).*(\d+)-(\d+).*數字/i,key:"year.outOfRange"},{regex:/(月份|month).*1-12.*數字/i,key:"month.outOfRange"},{regex:/(日期|day).*1-31.*數字/i,key:"day.outOfRange"},{regex:/(小時|hour).*(\d+)-(\d+)/i,key:"time.hourOutOfRange"},{regex:/(分鐘|minute).*0-59/i,key:"time.minuteOutOfRange"},{regex:/(秒鐘|second).*0-59/i,key:"time.secondOutOfRange"},{regex:/無效|invalid/i,key:null,handler:u=>u!=null&&u.includes("year")?"year.invalid":u!=null&&u.includes("month")?"month.invalid":u!=null&&u.includes("day")?"day.invalid":u!=null&&u.includes("time")||u!=null&&u.includes("hour")||u!=null&&u.includes("minute")||u!=null&&u.includes("second")?"time.invalid":"date.invalid"}];for(const u of V)if(u.regex.test(f)){const p=u.handler?u.handler(d):u.key;if(p)try{const $=l(p,k);if(t.debug&&console.log(`模式匹配翻譯: "${f}" -> "${$}" (key: ${p}) with params:`,k),$&&$!==p)return $}catch($){t.debug&&console.warn(`模式匹配翻譯失敗: ${p}`,$)}}return t.debug&&console.log(`無法翻譯，返回原始訊息: "${f}"`),f}return e({hasErrors:m,processedErrors:y,translateMessage:w,getOriginalKey:v,getSlotName:g,getFieldType:M,setLocale:f=>{o(f)},addCustomTranslation:(f,d)=>{s.value[f]=d},currentLocale:r}),(f,d)=>m.value?(a.openBlock(),a.createElementBlock("div",ro,[Array.isArray(y.value)?(a.openBlock(),a.createElementBlock("div",no,[(a.openBlock(!0),a.createElementBlock(a.Fragment,null,a.renderList(y.value,(k,S)=>(a.openBlock(),a.createElementBlock("div",{key:S},[a.renderSlot(f.$slots,`error-${k.field}`,{error:k,message:k.message,field:k.field},()=>[a.createElementVNode("span",null,a.toDisplayString(k.message),1)])]))),128))])):typeof y.value=="string"?(a.openBlock(),a.createElementBlock("div",oo,[a.renderSlot(f.$slots,"error-single",{error:y.value,message:y.value},()=>[a.createElementVNode("span",null,a.toDisplayString(y.value),1)])])):typeof y.value=="object"?(a.openBlock(),a.createElementBlock("div",lo,[(a.openBlock(!0),a.createElementBlock(a.Fragment,null,a.renderList(y.value,(k,S)=>(a.openBlock(),a.createElementBlock("div",{key:S},[a.renderSlot(f.$slots,g(S),{field:S,error:k,message:k,originalKey:v(S),fieldType:M(S)},()=>[a.createElementVNode("span",null,a.toDisplayString(k),1)])]))),128))])):a.createCommentVNode("",!0)])):a.createCommentVNode("",!0)}}),so={},io={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"};function co(n,e){return a.openBlock(),a.createElementBlock("svg",io,e[0]||(e[0]=[a.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)]))}const rr=be(so,[["render",co]]),uo={},mo={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"};function fo(n,e){return a.openBlock(),a.createElementBlock("svg",mo,e[0]||(e[0]=[a.createElementVNode("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))}const nr=be(uo,[["render",fo]]),ho={},po={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"};function go(n,e){return a.openBlock(),a.createElementBlock("svg",po,e[0]||(e[0]=[a.createElementVNode("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"},null,-1)]))}const or=be(ho,[["render",go]]),yo={class:"p-2 flex items-center justify-between border-b border-vdt-outline"},vo=["disabled"],$o={class:"text-sm font-medium"},Do=["disabled"],ko={key:0,class:"grid grid-cols-4 gap-1 p-2"},So=["onClick","title"],Mo={class:"font-medium"},bo={key:0},wo={key:0,class:"text-xs opacity-60 mt-0.5"},To={key:1,class:"p-4 text-center text-sm text-vdt-content-muted"},xo={class:"mb-2"},Eo={class:"p-2 border-t border-vdt-outline"},Co={class:"text-xs text-gray-400 mb-1"},Yo=["placeholder","min","max"],Ro={class:"text-xs text-vdt-content-muted mt-1"},Vo=be(a.defineComponent({__name:"YearSelector",props:{selectedYear:{},showSelector:{type:Boolean},pageSize:{default:12},calendar:{default:"gregory"},locale:{default:"zh-TW"}},emits:["year-selected","update:showSelector"],setup(n,{expose:e,emit:t}){const r=n,o=t,{getMessage:l,formatText:s}=Ze(r.locale),i=a.ref(null),c=a.ref(null),m=a.computed(()=>oe.getCalendarRange(r.calendar)),y=a.computed(()=>oe.getCalendarDisplayName(r.calendar,r.locale)),v=a.computed(()=>r.calendar==="gregory"),g=a.computed(()=>r.calendar==="japanese"),M=a.computed(()=>V.value[0]),w=a.computed(()=>V.value[V.value.length-1]),h=a.ref(0),f=D=>{const P=Math.floor(D/r.pageSize)*r.pageSize;return Math.max(P,m.value.min)},d=()=>{h.value=f(r.selectedYear)},k=new Map,S=(D,P)=>{const O=`${D}-${P}`;if(!k.has(O))try{k.set(O,new gt(P,{calendar:D,year:"numeric",era:"short"}))}catch{k.set(O,new gt(P,{year:"numeric"}))}return k.get(O)},C=D=>{var O,K;const P={gregorianYear:D,displayEra:"",displayYear:D.toString(),showReference:!1,displayWarning:!1};if(v.value)return P;try{const re=new ae(D,6,1),X=oe.safeToCalendar(re,oe.createSafeCalendar(r.calendar)),x=S(r.calendar,r.locale).formatToParts(X.toDate("UTC"));P.displayYear=((O=x.find(q=>q.type==="year"))==null?void 0:O.value)||D.toString(),P.displayEra=((K=x.find(q=>q.type==="era"))==null?void 0:K.value)||"";const F=!!P.displayEra,_=P.displayEra!==D.toString();(F||_)&&(P.showReference=!0,P.referenceYear=D.toString())}catch{if(P.displayWarning=!0,P.warningMessage=`無法轉換為${y.value}`,r.calendar==="roc"){const X=D-1911;P.displayYear=X>0?X.toString():`民國前${Math.abs(X-1)}年`}}return P},b=D=>D>=m.value.min&&D<=m.value.max,V=a.computed(()=>{const D=h.value,P=[];for(let O=0;O<r.pageSize;O++){const K=D+O;if(K>m.value.max)break;K<m.value.min||P.push(C(K))}return P}),u=a.computed(()=>{const D=V.value;if(D.length===0)return"";const P=D[0],O=D[D.length-1];if(v.value)return`${P.displayYear} - ${O.displayYear}`;if(P.gregorianYear===O.gregorianYear)return P.displayYear;const K=P.displayEra,re=O.displayEra;return K&&re&&K===re?`${K} ${P.displayYear} - ${O.displayYear}`:`${P.displayEra} ${P.displayYear} - ${O.displayEra} ${O.displayYear}`}),p=a.computed(()=>h.value>m.value.min),$=a.computed(()=>h.value+r.pageSize<=m.value.max),N=()=>{p.value&&(h.value=Math.max(h.value-r.pageSize,m.value.min))},A=()=>{$.value&&(h.value=Math.min(h.value+r.pageSize,m.value.max))},z=D=>{b(D)&&(o("year-selected",D),o("update:showSelector",!1))},L=()=>{c.value&&(b(c.value)?(h.value=f(c.value),o("year-selected",c.value),o("update:showSelector",!1),c.value=null):console.warn(`年份 ${c.value} 超出範圍 ${m.value.min}-${m.value.max}`))},Q=()=>{const D=Math.max(m.value.min,Math.min(new Date().getFullYear(),m.value.max));o("year-selected",D)},j=D=>l(`yearSelector.${D}`),Y=()=>{b(r.selectedYear)&&(h.value=f(r.selectedYear))};a.watch([()=>r.selectedYear,()=>r.calendar],Y,{immediate:!0});const I=D=>{if(r.showSelector&&i.value){const P=D.target,O=!!P.closest("[data-year-selector-button]");!i.value.contains(P)&&!O&&o("update:showSelector",!1)}};return a.onMounted(()=>{d(),document.addEventListener("mousedown",I)}),a.onBeforeUnmount(()=>{document.removeEventListener("mousedown",I)}),e({getLocalizedText:j,formatText:s,goToSpecificYear:L,goToValidRange:Q}),(D,P)=>D.showSelector?(a.openBlock(),a.createElementBlock("div",{key:0,ref_key:"yearSelectorRef",ref:i,class:"absolute top-full mt-1 right-0 min-w-56 max-h-72 overflow-auto bg-vdt-surface-elevated text-vdt-content border border-vdt-outline rounded-md shadow-lg z-20"},[a.createElementVNode("div",yo,[a.createElementVNode("button",{type:"button",onClick:N,class:a.normalizeClass(["p-1 hover:bg-vdt-interactive-hover rounded focus:outline-none",{"opacity-50 cursor-not-allowed":!p.value}]),disabled:!p.value,"aria-label":"previous year"},[a.createVNode(nr,{class:"h-4 w-4"})],10,vo),a.createElementVNode("span",$o,[a.renderSlot(D.$slots,"year-range-display",{firstYear:M.value,lastYear:w.value,displayText:u.value},()=>[a.createTextVNode(a.toDisplayString(u.value),1)],!0)]),a.createElementVNode("button",{type:"button",onClick:A,class:a.normalizeClass(["p-1 hover:bg-vdt-interactive-hover rounded focus:outline-none",{"opacity-50 cursor-not-allowed":!$.value}]),disabled:!$.value,"aria-label":"next year"},[a.createVNode(or,{class:"h-4 w-4"})],10,Do)]),V.value.length>0?(a.openBlock(),a.createElementBlock("div",ko,[(a.openBlock(!0),a.createElementBlock(a.Fragment,null,a.renderList(V.value,O=>(a.openBlock(),a.createElementBlock("button",{type:"button",key:O.gregorianYear,onClick:K=>z(O.gregorianYear),class:a.normalizeClass(["p-1 text-xs rounded focus:outline-none focus:ring-1 focus:ring-vdt-theme-500 leading-tight min-h-[2.5rem] flex flex-col justify-center items-center transition duration-200",D.selectedYear===O.gregorianYear?"bg-vdt-theme-500 text-white":"hover:bg-vdt-interactive-hover text-vdt-content",O.displayWarning?"ring-1 ring-amber-400":""]),title:O.warningMessage},[a.renderSlot(D.$slots,"year-display",{yearData:O,isSelected:D.selectedYear===O.gregorianYear},()=>[a.createElementVNode("div",Mo,[g.value?(a.openBlock(),a.createElementBlock("div",bo,a.toDisplayString(O.displayEra),1)):a.createCommentVNode("",!0),a.createTextVNode(" "+a.toDisplayString(O.displayYear),1)]),O.showReference?(a.openBlock(),a.createElementBlock("div",wo,a.toDisplayString(O.referenceYear),1)):a.createCommentVNode("",!0)],!0)],10,So))),128))])):(a.openBlock(),a.createElementBlock("div",To,[a.renderSlot(D.$slots,"no-years-display",{calendarRange:m.value,goToValidRange:Q},()=>[a.createElementVNode("div",xo,a.toDisplayString(j("noYearsToDisplay")),1),a.createElementVNode("button",{type:"button",onClick:Q,class:"text-xs bg-vdt-theme-100 hover:bg-vdt-theme-200 px-3 py-1 rounded text-vdt-theme-700"},a.toDisplayString(j("returnToValidRange")),1)],!0)])),a.createElementVNode("div",Eo,[a.renderSlot(D.$slots,"year-input",{yearInput:c.value,calendarRange:m.value,calendarDisplayName:y.value,goToSpecificYear:L,getLocalizedText:j,formatText:a.unref(s)},()=>[a.createElementVNode("div",Co,a.toDisplayString(j("jumpToYear")),1),a.withDirectives(a.createElementVNode("input",{type:"number","onUpdate:modelValue":P[0]||(P[0]=O=>c.value=O),onKeydown:a.withKeys(L,["enter"]),placeholder:j("inputYearPlaceholder"),min:m.value.min,max:m.value.max,class:"w-full p-1 text-sm border border-vdt-outline bg-vdt-surface text-vdt-content rounded focus:outline-none focus:ring-2 focus:ring-vdt-theme-200 focus-within:ring-vdt-theme-500"},null,40,Yo),[[a.vModelText,c.value]]),a.createElementVNode("div",Ro,a.toDisplayString(a.unref(s)(j("yearRangeInfo"),{calendar:y.value,min:m.value.min,max:m.value.max})),1)],!0)])],512)):a.createCommentVNode("",!0)}}),[["__scopeId","data-v-f14c8987"]]),Io={class:"flex justify-between items-center mb-4 gap-2"},Bo=["disabled"],Oo={class:"grow grid grid-cols-2 gap-2"},Fo=["value"],No={class:"relative"},Po=["disabled"],Ao=be(a.defineComponent({__name:"CalendarHeader",props:{month:{},year:{},locale:{default:"en-US"},minYear:{default:1900},maxYear:{default:2100},calendar:{default:"gregory"}},emits:["update:month","update:year"],setup(n,{emit:e}){const t=n,r=e,o=a.ref(t.month),l=a.ref(t.year),s=a.ref(!1),i=a.computed(()=>t.calendar||"gregory"),c=a.computed(()=>oe.getCalendarRange(t.calendar));a.watch(()=>t.month,S=>{o.value=S},{immediate:!0}),a.watch(()=>t.year,S=>{l.value=S},{immediate:!0});const m=a.computed(()=>{if(t.calendar==="gregory")return l.value.toString();try{const S=new ae(l.value,6,1),C=oe.safeToCalendar(S,oe.createSafeCalendar(t.calendar));return new gt(t.locale,{calendar:t.calendar,year:"numeric"}).format(C.toDate("UTC"))}catch{return l.value.toString()}}),y=a.computed(()=>oe.getMonthNames(t.locale,t.calendar)),v=a.computed(()=>{let S=l.value,C=o.value-1;return C<1&&(C=12,S=l.value-1),S>=c.value.min}),g=a.computed(()=>{let S=l.value,C=o.value+1;return C>12&&(C=1,S=l.value+1),S<=c.value.max}),M=()=>{if(!v.value)return;let S=o.value-1,C=l.value;S<1&&(S=12,C-=1),C>=c.value.min&&d(S,C)},w=()=>{if(!g.value)return;let S=o.value+1,C=l.value;S>12&&(S=1,C+=1),C<=c.value.max&&d(S,C)},h=()=>{d(o.value,l.value)},f=S=>{S>=c.value.min&&S<=c.value.max&&(l.value=S,d(o.value,S))},d=(S,C)=>{o.value=S,l.value=C,r("update:month",S),r("update:year",C)},k=()=>{s.value=!s.value};return(S,C)=>(a.openBlock(),a.createElementBlock("div",Io,[a.createElementVNode("button",{type:"button",onClick:M,class:"p-2 hover:bg-gray-100 text-vdt-content-secondary hover:bg-vdt-interactive-hover rounded-full focus:outline-none focus:ring-2 focus:ring-vdt-theme-500 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"上個月",disabled:!v.value},[a.createVNode(nr,{class:"h-5 w-5"})],8,Bo),a.createElementVNode("div",Oo,[a.renderSlot(S.$slots,"month-selector",{monthNames:y.value,selectedMonth:o.value,onMonthChange:h},()=>[a.withDirectives(a.createElementVNode("select",{"onUpdate:modelValue":C[0]||(C[0]=b=>o.value=b),onChange:h,class:"form-select appearance-none bg-none bg-vdt-surface text-vdt-content py-1 pl-2 w-full border border-vdt-outline rounded-sm text-sm focus:ring-2 focus:ring-vdt-theme-200 focus:border-vdt-theme-500","aria-label":"選擇月份",role:"combobox"},[(a.openBlock(!0),a.createElementBlock(a.Fragment,null,a.renderList(y.value,(b,V)=>(a.openBlock(),a.createElementBlock("option",{key:V,value:V+1},a.toDisplayString(b),9,Fo))),128))],544),[[a.vModelSelect,o.value]])],!0),a.createElementVNode("div",No,[a.renderSlot(S.$slots,"year-selector",{displayYear:m.value,toggleYearSelector:k,showYearSelector:s.value},()=>[a.createElementVNode("button",{type:"button",onClick:k,"data-year-selector-button":"",class:"inline-flex items-center px-2 py-1 bg-vdt-surface text-vdt-content w-full border border-vdt-outline rounded-sm text-sm focus-within:ring-2 focus-within:border-vdt-theme-500 focus-within:ring-vdt-theme-200","aria-label":"選擇年份"},a.toDisplayString(m.value),1)],!0),a.createVNode(Vo,{"selected-year":l.value,"show-selector":s.value,"onUpdate:showSelector":C[1]||(C[1]=b=>s.value=b),calendar:i.value,locale:S.locale,onYearSelected:f},a.createSlots({_:2},[a.renderList(S.$slots,(b,V)=>({name:V,fn:a.withCtx(u=>[a.renderSlot(S.$slots,V,a.normalizeProps(a.guardReactiveProps(u)),void 0,!0)])}))]),1032,["selected-year","show-selector","calendar","locale"])])]),a.createElementVNode("button",{type:"button",onClick:w,class:"p-2 hover:bg-gray-100 text-vdt-content-secondary hover:bg-vdt-interactive-hover rounded-full focus:outline-none focus:ring-2 focus:ring-vdt-theme-500 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"下個月",disabled:!g.value},[a.createVNode(or,{class:"h-5 w-5"})],8,Po)]))}}),[["__scopeId","data-v-96fd06ce"]]),Lo={class:"grid grid-cols-7 mb-2"},Ho=a.defineComponent({__name:"WeekdayHeader",props:{locale:{default:"en-US"},weekStartsOn:{default:0},calendar:{default:"gregory"}},setup(n){const e=n,t=a.computed(()=>{const r=new Intl.DateTimeFormat(e.locale,{weekday:"short",calendar:e.calendar}),o=new Date(2023,0,1);return Array.from({length:7},(l,s)=>{const i=new Date(o);return i.setDate(o.getDate()+(s+e.weekStartsOn)%7),r.format(i)})});return(r,o)=>(a.openBlock(),a.createElementBlock("div",Lo,[(a.openBlock(!0),a.createElementBlock(a.Fragment,null,a.renderList(t.value,(l,s)=>(a.openBlock(),a.createElementBlock("div",{key:s,class:"text-center text-vdt-content text-sm py-2"},a.toDisplayString(l),1))),128))]))}}),qo={class:"calendar-cell text-center relative"},zo=["disabled","tabindex","aria-selected","aria-disabled","aria-current","data-in-current-month"],Uo=be(a.defineComponent({__name:"CalendarCell",props:{date:{},currentMonth:{},selected:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},isToday:{type:Boolean,default:!1},focusable:{type:Boolean,default:!1},selectionMode:{default:"single"},isRangeStart:{type:Boolean,default:!1},isRangeEnd:{type:Boolean,default:!1},isInRange:{type:Boolean,default:!1}},emits:["select","nav"],setup(n,{emit:e}){const t=n,r=e,o=a.computed(()=>t.date.month!==t.currentMonth),l=a.computed(()=>{const i={};return i["flex justify-center items-center w-8 h-8 rounded-md mx-auto relative z-10"]=!0,t.disabled?(i["opacity-40 cursor-not-allowed"]=!0,i["bg-vdt-surface text-vdt-content"]=!0,i):(t.selectionMode==="range"?(t.isRangeStart||t.isRangeEnd?i["bg-vdt-theme-500 text-white"]=!0:t.isInRange?i["bg-vdt-outline text-vdt-content"]=!0:(i["bg-vdt-surface text-vdt-content"]=!0,i["hover:bg-vdt-interactive-hover cursor-pointer"]=!0),t.isToday&&!t.isRangeStart&&!t.isRangeEnd&&!t.isInRange&&(i["ring-2 ring-vdt-theme-500"]=!0)):(t.selected?i["bg-vdt-theme-500 text-white"]=!0:(i["bg-vdt-surface text-vdt-content"]=!0,i["hover:bg-vdt-interactive-hover cursor-pointer"]=!0),t.isToday&&!t.selected&&(i["ring-2 ring-vdt-theme-500"]=!0)),o.value&&!t.selected&&!t.isRangeStart&&!t.isRangeEnd&&(i["text-vdt-content-muted"]=!0,i["text-vdt-content"]=!1),i)}),s=()=>{t.disabled||r("select",t.date)};return(i,c)=>(a.openBlock(),a.createElementBlock("div",qo,[a.createElementVNode("button",{type:"button",class:a.normalizeClass(["calendar-cell-button",l.value]),disabled:i.disabled,tabindex:i.focusable?0:-1,"aria-selected":i.selected||i.isRangeStart||i.isRangeEnd,"aria-disabled":i.disabled,"aria-current":i.isToday?"date":void 0,"data-in-current-month":!o.value,onClick:s,onKeydown:[a.withKeys(s,["enter"]),a.withKeys(s,["space"]),c[0]||(c[0]=a.withKeys(m=>r("nav","up"),["up"])),c[1]||(c[1]=a.withKeys(m=>r("nav","down"),["down"])),c[2]||(c[2]=a.withKeys(m=>r("nav","left"),["left"])),c[3]||(c[3]=a.withKeys(m=>r("nav","right"),["right"]))]},a.toDisplayString(i.date.day),43,zo)]))}}),[["__scopeId","data-v-9018b2ca"]]),Wo={class:"grid grid-cols-7 gap-1"},_o=a.defineComponent({__name:"DateGridView",props:{year:{},month:{},selectedDate:{default:null},rangeStart:{default:null},rangeEnd:{default:null},selectionMode:{default:"single"},minDate:{default:void 0},maxDate:{default:void 0},locale:{default:"en-US"},weekStartsOn:{default:0},calendar:{default:"gregory"}},emits:["select","range-select","navigate"],setup(n,{expose:e,emit:t}){const r=n,o=t,l=a.computed(()=>r.month),s=a.computed(()=>r.year);a.computed(()=>{const h=Le();return`${h.year}-${h.month}-${h.day}`});const i=a.computed(()=>(console.log(`生成 ${r.calendar} 曆 ${r.year}年${r.month}月 的日曆`),oe.generateCalendarDays(r.year,r.month,r.calendar,r.locale,r.weekStartsOn))),c=h=>{if(!r.rangeStart||!r.rangeEnd)return!1;try{return h.compare(r.rangeStart)>=0&&h.compare(r.rangeEnd)<=0}catch{return!1}},m=(h,f)=>{if(!h||!f)return!1;try{return h.compare(f)===0}catch{return!1}},y=h=>{try{return!!(r.minDate&&h.compare(r.minDate)<0||r.maxDate&&h.compare(r.maxDate)>0)}catch{return!0}},v=h=>{try{const f=Ur(h.calendar.identifier);return h.compare(f)===0}catch{return!1}},g=a.computed(()=>i.value.map((h,f)=>{const d=`${h.year}-${h.month}-${h.day}`,k=v(h),S=h.month!==l.value,C=y(h),b=r.selectionMode==="single"&&m(h,r.selectedDate),V=r.selectionMode==="range"&&m(h,r.rangeStart),u=r.selectionMode==="range"&&m(h,r.rangeEnd),p=r.selectionMode==="range"&&c(h)&&!V&&!u&&!C,$=h.day===1&&h.month===l.value,N=[d,b,k,C,V,u,p,r.selectionMode,r.calendar];return{key:`${r.calendar}-${s.value}-${l.value}-${d}-${f}`,memoKey:N,date:h,isToday:k,isSelected:b,isDisabled:C,isOutsideMonth:S,isRangeStart:V,isRangeEnd:u,isInRange:p,isFocusable:$}})),M=h=>{r.selectionMode==="single"?o("select",h):r.selectionMode==="range"&&o("range-select",h,null)},w=h=>{const f=g.value;if(f.length===0)return;const d=f[0],k=f[f.length-1];switch(h){case"left":d.date.day<15&&d.date.month!==l.value&&o("navigate","prev-month");break;case"right":k.date.day>15&&k.date.month!==l.value&&o("navigate","next-month");break}};return a.onMounted(()=>{console.log(r.selectedDate)}),e({getCalendarDays:()=>i.value,getCellStates:()=>g.value}),(h,f)=>(a.openBlock(),a.createElementBlock("div",Wo,[(a.openBlock(!0),a.createElementBlock(a.Fragment,null,a.renderList(g.value,(d,k,S,C)=>{const b=d.memoKey;if(C&&C.key===d.key&&a.isMemoSame(C,b))return C;const V=(a.openBlock(),a.createBlock(Uo,{key:d.key,date:d.date,"current-month":l.value,selected:d.isSelected,"is-today":d.isToday,disabled:d.isDisabled,focusable:d.isFocusable,"is-range-start":d.isRangeStart,"is-range-end":d.isRangeEnd,"is-in-range":d.isInRange,"selection-mode":h.selectionMode,onSelect:M,onNav:w},null,8,["date","current-month","selected","is-today","disabled","focusable","is-range-start","is-range-end","is-in-range","selection-mode"]));return V.memo=b,V},f,0),128))]))}}),Jo={key:0},Ko={class:"flex flex-row items-center justify-between"},jo={class:"text-sm font-medium text-vdt-content uppercase"},Qo={class:"flex flex-row items-center gap-1"},Zo={class:"time-selector-container pt-1"},Go={class:"flex flex-row items-center gap-1"},Xo={class:"flex-1"},el=["value"],tl={class:"flex-1"},al=["value"],rl={key:0,class:"flex-1"},nl=["value"],ol={key:1,class:"flex-shrink-0"},ll={class:"isolate inline-flex rounded-md border border-vdt-outline bg-vdt-surface overflow-hidden"},sl=a.defineComponent({__name:"TimeSelector",props:{show:{type:Boolean,default:!0},timeValue:{default:null},enableSeconds:{type:Boolean,default:!0},use24Hour:{type:Boolean,default:!1},defaultTime:{default:"00:00:00"},locale:{default:"zh-TW"},selectionMode:{default:"single"}},emits:["time-change","today-click"],setup(n,{expose:e,emit:t}){const r=n,o=t,{getPlaceholderMessage:l}=Ze(r.locale),s=a.ref(0),i=a.ref(0),c=a.ref(0),m=a.ref("AM"),y=a.ref(!1),v=a.computed(()=>r.use24Hour?Array.from({length:24},(u,p)=>p):Array.from({length:12},(u,p)=>p+1)),g=a.computed(()=>Array.from({length:60},(u,p)=>p)),M=a.computed(()=>Array.from({length:60},(u,p)=>p)),w=a.computed(()=>{let u=s.value;r.use24Hour||(m.value==="PM"&&u<12?u+=12:m.value==="AM"&&u===12&&(u=0));const p=h(u),$=h(i.value);if(r.enableSeconds){const N=h(c.value);return`${p}:${$}:${N}`}else return`${p}:${$}`}),h=u=>u.toString().padStart(2,"0"),f=u=>h(u),d=u=>{if(!u)return;const[p,$,N]=u.split(":");let A=parseInt(p)||0;r.use24Hour||(A>=12?(m.value="PM",A=A===12?12:A-12):(m.value="AM",A=A===0?12:A)),s.value=A,i.value=parseInt($)||0,r.enableSeconds&&N&&(c.value=parseInt(N)||0),y.value=!0},k=()=>{d(r.defaultTime)},S=u=>{m.value=u},C=u=>{const p=new Date;p.setHours(u==="AM"?6:18,0,0,0);const A=new Intl.DateTimeFormat(r.locale||navigator.language,{hour12:!0,hour:"numeric"}).formatToParts(p).find(z=>z.type==="dayPeriod");return(A==null?void 0:A.value)||u},b=()=>{const u=new Date;if(r.use24Hour)s.value=u.getHours();else{const p=u.getHours();m.value=p>=12?"PM":"AM",s.value=p%12||12}i.value=u.getMinutes(),r.enableSeconds&&(c.value=u.getSeconds()),y.value=!0},V=()=>{o("today-click")};return a.watch(()=>r.timeValue,u=>{u?d(u):!y.value&&r.show&&k()},{immediate:!0}),a.watch([s,i,c,m],()=>{y.value&&o("time-change",w.value)}),e({getCurrentTime:()=>w.value,setTime:u=>d(u),resetToDefault:()=>k()}),(u,p)=>u.show?(a.openBlock(),a.createElementBlock("div",Jo,[p[5]||(p[5]=a.createElementVNode("hr",{class:"my-2 border-vdt-outline"},null,-1)),a.createElementVNode("div",Ko,[a.createElementVNode("label",jo,a.toDisplayString(a.unref(l)("general.time"))+": ",1),a.createElementVNode("div",Qo,[a.createElementVNode("button",{type:"button",onClick:b,class:"px-2 py-1 text-xs transition-colors rounded-sm bg-vdt-outline text-vdt-content hover:bg-vdt-interactive-hover cursor-pointer"}," Now "),u.selectionMode==="single"?(a.openBlock(),a.createElementBlock("button",{key:0,type:"button",onClick:V,class:"px-2 py-1 text-xs transition-colors rounded-sm bg-vdt-outline text-vdt-content hover:bg-vdt-interactive-hover cursor-pointer"}," Today ")):a.createCommentVNode("",!0)])]),a.createElementVNode("div",Zo,[a.createElementVNode("div",Go,[a.createElementVNode("div",Xo,[a.withDirectives(a.createElementVNode("select",{"onUpdate:modelValue":p[0]||(p[0]=$=>s.value=$),class:"w-full py-1 px-2 border border-vdt-outline bg-vdt-surface text-vdt-content rounded-sm text-sm focus:ring-2 focus:ring-vdt-theme-200 focus:border-vdt-theme-500"},[(a.openBlock(!0),a.createElementBlock(a.Fragment,null,a.renderList(v.value,$=>(a.openBlock(),a.createElementBlock("option",{key:$,value:$},a.toDisplayString(f($)),9,el))),128))],512),[[a.vModelSelect,s.value]])]),a.createElementVNode("div",tl,[a.withDirectives(a.createElementVNode("select",{"onUpdate:modelValue":p[1]||(p[1]=$=>i.value=$),class:"w-full py-1 px-2 border border-vdt-outline bg-vdt-surface text-vdt-content rounded-sm text-sm focus:ring-2 focus:ring-vdt-theme-200 focus:border-vdt-theme-500"},[(a.openBlock(!0),a.createElementBlock(a.Fragment,null,a.renderList(g.value,$=>(a.openBlock(),a.createElementBlock("option",{key:$,value:$},a.toDisplayString(h($)),9,al))),128))],512),[[a.vModelSelect,i.value]])]),u.enableSeconds?(a.openBlock(),a.createElementBlock("div",rl,[a.withDirectives(a.createElementVNode("select",{"onUpdate:modelValue":p[2]||(p[2]=$=>c.value=$),class:"w-full py-1 px-2 border border-vdt-outline bg-vdt-surface text-vdt-content rounded-sm text-sm focus:ring-2 focus:ring-vdt-theme-200 focus:border-vdt-theme-500"},[(a.openBlock(!0),a.createElementBlock(a.Fragment,null,a.renderList(M.value,$=>(a.openBlock(),a.createElementBlock("option",{key:$,value:$},a.toDisplayString(h($)),9,nl))),128))],512),[[a.vModelSelect,c.value]])])):a.createCommentVNode("",!0),u.use24Hour?a.createCommentVNode("",!0):(a.openBlock(),a.createElementBlock("div",ol,[a.createElementVNode("div",ll,[a.createElementVNode("button",{type:"button",onClick:p[3]||(p[3]=$=>S("AM")),class:a.normalizeClass(["px-2 py-1 text-sm transition-colors",m.value==="AM"?"bg-vdt-theme-500 text-white":"text-vdt-content hover:bg-vdt-interactive-hover"])},a.toDisplayString(C("AM")),3),a.createElementVNode("button",{type:"button",onClick:p[4]||(p[4]=$=>S("PM")),class:a.normalizeClass(["px-2 py-1 text-sm transition-colors",m.value==="PM"?"bg-vdt-theme-500 text-white":"text-vdt-content hover:bg-vdt-interactive-hover"])},a.toDisplayString(C("PM")),3)])]))])])])):a.createCommentVNode("",!0)}}),il={class:"vdt-date-picker calendar-grid w-full max-w-xs rounded-lg shadow p-2"},Qt=a.defineComponent({__name:"CalendarGrid",props:{value:{default:null},rangeStart:{default:null},rangeEnd:{default:null},selectionMode:{default:"single"},year:{default:void 0},month:{default:void 0},minDate:{default:void 0},maxDate:{default:void 0},locale:{default:"en-US"},weekStartsOn:{default:0},showTimeSelector:{type:Boolean,default:!1},timeValue:{default:null},enableSeconds:{type:Boolean,default:!0},use24Hour:{type:Boolean,default:!1},defaultTime:{default:"00:00:00"},calendar:{default:"gregory"}},emits:["select","time-select","range-select"],setup(n,{expose:e,emit:t}){const r=n,o=t,l=()=>{if(r.year!==void 0&&r.month!==void 0)return{year:r.year,month:r.month};if(r.value)return{year:r.value.year,month:r.value.month};if(r.rangeStart)return{year:r.rangeStart.year,month:r.rangeStart.month};const u=Le();return{year:u.year,month:u.month}},{year:s,month:i}=l(),c=a.ref(s),m=a.ref(i),y=a.ref(r.timeValue),v=a.computed(()=>oe.convertToCalendarDate(r.value,r.calendar)),g=a.computed(()=>oe.convertToCalendarDate(r.rangeStart,r.calendar)),M=a.computed(()=>oe.convertToCalendarDate(r.rangeEnd,r.calendar)),w=a.computed(()=>oe.convertToCalendarDate(r.minDate||null,r.calendar)),h=a.computed(()=>oe.convertToCalendarDate(r.maxDate||null,r.calendar)),f=a.computed(()=>{var u;return((u=r.minDate)==null?void 0:u.year)||1900}),d=a.computed(()=>{var u;return((u=r.maxDate)==null?void 0:u.year)||2100}),k=a.computed(()=>{if(r.year!==void 0&&r.month!==void 0)return{year:r.year,month:r.month};const u=r.selectionMode==="range"?r.rangeStart:r.value;return u?{year:u.year,month:u.month}:{year:c.value,month:m.value}});a.watch(k,({year:u,month:p})=>{c.value=u,m.value=p},{immediate:!0}),a.watch(()=>r.timeValue,u=>{y.value=u},{immediate:!0});const S=u=>{if(r.selectionMode==="single"){const p=oe.convertFromCalendarDate(u,r.calendar);p&&(o("select",p,!0),r.showTimeSelector&&y.value&&o("time-select",y.value))}},C=(u,p)=>{if(r.selectionMode==="range"){const $=oe.convertFromCalendarDate(u,r.calendar),N=oe.convertFromCalendarDate(p,r.calendar);o("range-select",$,N)}},b=u=>{y.value=u,o("time-select",u)},V=()=>{if(r.selectionMode==="single"){const u=Le();c.value=u.year,m.value=u.month,o("select",u,!1)}};return e({getSelectedDate:()=>r.value,getSelectedRange:()=>({start:r.rangeStart,end:r.rangeEnd}),setDisplayMonth:(u,p)=>{c.value=u,m.value=p},previousMonth:()=>{m.value===1?(m.value=12,c.value-=1):m.value-=1},nextMonth:()=>{m.value===12?(m.value=1,c.value+=1):m.value+=1}}),(u,p)=>(a.openBlock(),a.createElementBlock("div",il,[a.createVNode(Ao,{month:m.value,"onUpdate:month":p[0]||(p[0]=$=>m.value=$),year:c.value,"onUpdate:year":p[1]||(p[1]=$=>c.value=$),locale:u.locale,"min-year":f.value,"max-year":d.value,calendar:u.calendar},a.createSlots({_:2},[a.renderList(u.$slots,($,N)=>({name:N,fn:a.withCtx(A=>[a.renderSlot(u.$slots,N,a.normalizeProps(a.guardReactiveProps(A)))])}))]),1032,["month","year","locale","min-year","max-year","calendar"]),a.createVNode(Ho,{locale:u.locale,"week-starts-on":u.weekStartsOn,calendar:u.calendar},null,8,["locale","week-starts-on","calendar"]),a.createVNode(_o,{year:c.value,month:m.value,"selected-date":v.value,"range-start":g.value,"range-end":M.value,"selection-mode":u.selectionMode,"min-date":w.value,"max-date":h.value,locale:u.locale,"week-starts-on":u.weekStartsOn,calendar:u.calendar,onSelect:S,onRangeSelect:C},null,8,["year","month","selected-date","range-start","range-end","selection-mode","min-date","max-date","locale","week-starts-on","calendar"]),a.createVNode(sl,{locale:u.locale,show:u.showTimeSelector,"time-value":y.value,"enable-seconds":u.enableSeconds,"use24-hour":u.use24Hour,"default-time":u.defaultTime,selectionMode:u.selectionMode,onTimeChange:b,onTodayClick:V},null,8,["locale","show","time-value","enable-seconds","use24-hour","default-time","selectionMode"])]))}}),cl={},ul={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function dl(n,e){return a.openBlock(),a.createElementBlock("svg",ul,e[0]||(e[0]=[a.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1)]))}const lr=be(cl,[["render",dl]]);function Zt(n,e){const{dateInputRef:t,timeInputRef:r}=n,{showTime:o,autoFocusTimeAfterDate:l=!0}=e;return{focusFirstInput:()=>{a.nextTick(()=>{var v;(v=t.value)!=null&&v.focus&&t.value.focus()})},focusLastInput:()=>{a.nextTick(()=>{var v,g,M;o&&((v=r.value)!=null&&v.focusLast)?r.value.focusLast():(g=t.value)!=null&&g.focusLast?t.value.focusLast():(M=t.value)!=null&&M.focus&&t.value.focus()})},handleNavigateToTime:v=>{o&&a.nextTick(()=>{var g;(g=r.value)!=null&&g.focus&&r.value.focus()})},handleNavigateToDate:()=>{a.nextTick(()=>{var v,g;(v=t.value)!=null&&v.focusLast?t.value.focusLast():(g=t.value)!=null&&g.focus&&t.value.focus()})},autoFocusTimeAfterDateComplete:(v,g)=>{!o||!l||(g&&!v.inputTimeValue.value&&(v.inputTimeValue.value=g,v.updateFromInputs()),a.nextTick(()=>{var M;(M=r.value)!=null&&M.focus&&r.value.focus()}))}}}function Gt(n={}){const{required:e=!0,showTime:t=!1,minDate:r,maxDate:o,dateFormat:l="YYYY-MM-DD"}=n,s=a.ref({}),i=a.ref({}),c=a.ref({}),m=a.computed(()=>({...s.value,...i.value})),y=a.computed(()=>({...c.value})),v=a.computed(()=>Object.keys(m.value).length>0),g=(b,V,u="date",p={})=>{["date","year","month","day"].forEach($=>{h(`${u}.${$}`),f(`${u}.${$}`)}),b||Object.entries(V).forEach(([$,N])=>{const A=`${u}.${$}`;s.value[A]=N,p[$]&&(c.value[A]=p[$])})},M=(b,V,u="time",p={})=>(["time","hour","minute","second"].forEach($=>{h(`${u}.${$}`),f(`${u}.${$}`)}),b||Object.entries(V).forEach(([$,N])=>{const A=`${u}.${$}`;s.value[A]=N,p[$]&&(c.value[A]=p[$])}),!v.value),w=b=>{if(!b)return!1;if(r){const V=se(r);if(V&&vt(b,V)<0)return g(!1,{date:"date.beforeMin"},"date",{date:{minDate:fe(V,l)}}),!1}if(o){const V=se(o);if(V&&vt(b,V)>0)return g(!1,{date:"date.afterMax"},"date",{date:{maxDate:fe(V,l)}}),!1}return!0},h=b=>{Object.keys(s.value).forEach(V=>{V.startsWith(b)&&delete s.value[V]})},f=b=>{Object.keys(c.value).forEach(V=>{V.startsWith(b)&&delete c.value[V]})};return{errors:s,formatErrors:i,mergedErrors:m,hasErrors:v,errorParams:c,mergedErrorParams:y,handleDateValidation:g,handleTimeValidation:M,validateDateTime:(b,V)=>{const u={isValid:!0,errors:{}};return e&&(b||(u.errors.date="date.required",u.isValid=!1),t&&!V&&(u.errors.time="time.required",u.isValid=!1)),Object.assign(s.value,u.errors),u.isValid&&!v.value},validateDateRange:w,clearFieldErrors:h,clearFieldParams:f,clearAllErrors:()=>{s.value={},i.value={},c.value={}},setFormatError:(b,V)=>{i.value[b]=V},clearFormatError:b=>{delete i.value[b]}}}function Xt(n={}){const{showTime:e=!1,dateFormat:t="YYYY-MM-DD",timeFormat:r="HH:mm:ss",outputType:o="iso",defaultTime:l,enableSeconds:s=!0}=n,i=a.ref(null),c=a.ref(null),m=a.ref(null),y=u=>{if(!u||u.hour===void 0)return null;const p=u.hour.toString().padStart(2,"0"),$=(u.minute||0).toString().padStart(2,"0");if(s){const N=(u.second||0).toString().padStart(2,"0");return`${p}:${$}:${N}`}else return`${p}:${$}`},v=(u,p)=>{if(!u)return null;const $=se(u);if(!$)return null;if(!p&&!e)return qe($.year,$.month,$.day);if(!p)if(l){const Q=l.split(":").map(Number),j=Q[0]||0,Y=Q[1]||0,I=Q[2]||0;return qe($.year,$.month,$.day,j,Y,I)}else return qe($.year,$.month,$.day);const N=p.split(":").map(Number),A=N[0]||0,z=N[1]||0,L=N[2]||0;return qe($.year,$.month,$.day,A,z,L)},g=u=>{const p=se(u);i.value=p,p?(c.value=fe(p,t),m.value=y(p)):(c.value=null,m.value=null)},M=(u,p)=>{const $=u!==void 0?u:c.value,N=p!==void 0?p:m.value,A=v($,N);return i.value=A,A},w=u=>{i.value=u,u?(c.value=fe(u,t),m.value=y(u)):(c.value=null,m.value=null)},h=u=>{if(!i.value)return null;const p=u.split(":").map(Number),$={...i.value,hour:p[0]||0,minute:p[1]||0,second:p[2]||0};return i.value=$,m.value=u,$},f=u=>{const p=u!==void 0?u:i.value,$=e?`${t} ${r}`:t;return yt(p,o,$)},d=()=>{i.value=null,c.value=null,m.value=null},k=a.computed(()=>!!(c.value||m.value||i.value)),S=()=>e&&!m.value&&l?(m.value=l,!0):!1,C=a.computed(()=>!!c.value),b=a.computed(()=>!!m.value),V=a.computed(()=>e?C.value&&b.value:C.value);return{internalDateTime:i,inputDateValue:c,inputTimeValue:m,hasDateValue:C,hasTimeValue:b,hasCompleteValue:V,hasValue:k,updateFromInputs:M,setInternalDateTime:w,updateTimeOnly:h,setExternalValue:g,getFormattedOutput:f,clearValues:d,applyDefaultTime:S,getTimeFromDateTime:y,createDateTimeFromInputs:v}}function sr(n,e,t={}){const{disabled:r,onOutsideClick:o}=t,l=a.ref(!1),s=()=>{r!=null&&r.value||(l.value=!l.value,l.value&&a.nextTick(()=>{m()}))},i=()=>{r!=null&&r.value||(l.value=!0,a.nextTick(()=>{m()}))},c=()=>{l.value=!1},m=()=>{if(!n.value||!e.value)return;const h=n.value.getBoundingClientRect(),f=e.value,d={width:window.innerWidth,height:window.innerHeight};let k=h.height+5,S=0;const C=f.getBoundingClientRect();h.left+C.width>d.width&&(S=d.width-h.left-C.width-10),h.bottom+C.height>d.height&&(k=-C.height-5),f.style.position="absolute",f.style.top=`${k}px`,f.style.left=`${S}px`,f.style.zIndex="50"},y=h=>{const f=e.value,d=n.value,k=h.target;l.value&&f&&!f.contains(k)&&d&&!d.contains(k)&&(c(),o==null||o())},v=(h,f)=>{if(r!=null&&r.value)return;const d=h.target;d.classList.contains("date-input")||d.classList.contains("time-input")||d.closest("input")||d.closest("button")||(h.preventDefault(),f==null||f())},g=h=>{if(r!=null&&r.value)return;const f=h.target;f.classList.contains("date-input")||f.classList.contains("time-input")||f.closest("input")||f.closest("button")||h.preventDefault()},M=()=>{l.value&&m()},w=()=>{l.value&&m()};return a.onMounted(()=>{document.addEventListener("mousedown",y),window.addEventListener("resize",M),window.addEventListener("scroll",w)}),a.onBeforeUnmount(()=>{document.removeEventListener("mousedown",y),window.removeEventListener("resize",M),window.removeEventListener("scroll",w)}),{showCalendar:l,toggleCalendar:s,showCalendarPopup:i,hideCalendar:c,updateCalendarPosition:m,handleContainerClick:v,handleContainerMouseDown:g}}function ml(n={}){const{customDefaultTime:e="00:00:00",enableSeconds:t=!0}=n,r=m=>{if(!m)return!1;if(!/^([0-1]?[0-9]|2[0-3]):([0-5]?[0-9])(?::([0-5]?[0-9]))?$/.test(m))return console.warn(`時間格式不正確: ${m}，應為 HH:mm:ss 或 HH:mm 格式`),!1;const v=m.split(":"),g=parseInt(v[0]),M=parseInt(v[1]),w=v[2]?parseInt(v[2]):0;return g<0||g>23||M<0||M>59||w<0||w>59?(console.warn(`時間值超出範圍: ${m}`),!1):!0},o=(m,y=t)=>{const v=m.split(":"),g=v[0].padStart(2,"0"),M=v[1].padStart(2,"0"),w=v[2]?v[2].padStart(2,"0"):"00";return y?`${g}:${M}:${w}`:`${g}:${M}`};return{getValidDefaultTime:a.computed(()=>{if(e&&r(e))return o(e,t)}),validateTimeFormat:r,formatTimeString:o,getCurrentTimeString:()=>{const m=new Date,y=m.getHours().toString().padStart(2,"0"),v=m.getMinutes().toString().padStart(2,"0"),g=m.getSeconds().toString().padStart(2,"0");return t?`${y}:${v}:${g}`:`${y}:${v}`},parseTimeString:m=>{const y=m.split(":");return{hours:parseInt(y[0])||0,minutes:parseInt(y[1])||0,seconds:parseInt(y[2])||0}},buildTimeString:(m,y,v=0)=>{const g=m.toString().padStart(2,"0"),M=y.toString().padStart(2,"0"),w=v.toString().padStart(2,"0");return t?`${g}:${M}:${w}`:`${g}:${M}`}}}function fl(n={},e,t){const{modelValue:r=null,showTime:o=!1,required:l=!0,disabled:s=!1,calendar:i="gregory",dateFormat:c="YYYY-MM-DD",timeFormat:m="HH:mm:ss",outputType:y="iso",useStrictISO:v=!1,customDefaultTime:g,enableSeconds:M=!0,autoFocusTimeAfterDate:w=!0,minDate:h,maxDate:f,locale:d="zh-TW"}=n,{containerRef:k,calendarRef:S,dateInputRef:C,timeInputRef:b}=e,V=a.ref(s),u=Gt({required:l,showTime:o,minDate:h,maxDate:f,dateFormat:c}),p=Xt({showTime:o,dateFormat:c,timeFormat:m,outputType:y,defaultTime:g,enableSeconds:M}),$=Zt({dateInputRef:C,timeInputRef:b},{showTime:o,autoFocusTimeAfterDate:w}),N=sr(k,S,{disabled:V,onOutsideClick:()=>{}}),A=ml({customDefaultTime:g,enableSeconds:M}),z=a.computed(()=>{const H=se(h,d);return H||null}),L=a.computed(()=>{const H=se(f,d);return H||null});let Q=null,j=null,Y=null;const I=H=>{Q=H.update||null,j=H.change||null,Y=H.validation||null},D=async(H=p.internalDateTime.value)=>{let T=null;if(H){const ie=o?`${c} ${m}`:c;T=yt(H,y,ie,o,i,d,v)}Q==null||Q(T),j==null||j(T);const U=!u.hasErrors.value;Y==null||Y(U,u.mergedErrors.value)};a.watch(()=>r,H=>{const T=se(H,d,i);H&&!T?(u.handleDateValidation(!1,{date:"無效的日期格式"}),p.setExternalValue(null)):T&&!u.validateDateRange(T)?p.setExternalValue(null):(u.clearFieldErrors("date"),u.clearFieldErrors("invalidInput"),p.setExternalValue(T))},{immediate:!0});const P=(H,T,U={})=>{u.handleDateValidation(H,T,"date",U),Y==null||Y(!u.hasErrors.value,u.mergedErrors.value)},O=(H,T,U={})=>{u.handleTimeValidation(H,T,"time",U),Y==null||Y(!u.hasErrors.value,u.mergedErrors.value)},K=async H=>{p.inputDateValue.value=H;const T=p.updateFromInputs();if(!T){u.handleDateValidation(!1,{date:"date.invalid"});return}u.validateDateRange(T)&&(await D(T),["date","year","month","day"].forEach(U=>{u.clearFieldErrors(U)}),$.autoFocusTimeAfterDateComplete(p,g?A.getValidDefaultTime.value:void 0))},re=async H=>{p.inputTimeValue.value=H;const T=p.updateFromInputs();await D(T),["time","hour","minute","second"].forEach(U=>{u.clearFieldErrors(U)})},X=async(H,T=!0)=>{try{if(!u.validateDateRange(H))return;p.setInternalDateTime(H),await D(H),["date","year","month","day"].forEach(U=>{u.clearFieldErrors(U)}),T&&N.hideCalendar()}catch(U){console.error("處理日曆選擇失敗:",U)}},R=async H=>{const T=p.updateTimeOnly(H);T&&await D(T),["time","hour","minute","second"].forEach(U=>{u.clearFieldErrors(U)})},x=H=>{N.handleContainerClick(H,()=>{$.focusFirstInput()})},F=()=>{p.clearValues(),u.clearAllErrors(),D(null)},_=async()=>{var le,de;const H=await((le=C.value)==null?void 0:le.validate()),T=o?await((de=b.value)==null?void 0:de.validate()):!0;let U=!0;p.internalDateTime.value&&(U=oe.isValidDate(p.internalDateTime.value.year,p.internalDateTime.value.month,p.internalDateTime.value.day,i),U||u.handleDateValidation(!1,{date:"date.invalidInCalendar"},"calendar",{calendar:{calendarName:oe.getCalendarDisplayName(i,d)}}));const ie=u.validateDateTime(p.inputDateValue.value,p.inputTimeValue.value),ce=H&&T&&U&&ie;return Y==null||Y(ce,u.mergedErrors.value),ce},q=async()=>{const H=new Date,T={year:H.getFullYear(),month:H.getMonth()+1,day:H.getDate(),hour:H.getHours(),minute:H.getMinutes(),second:H.getSeconds()};try{p.setInternalDateTime(T),await D(T),["date","year","month","day","time","hour","minute","second"].forEach(U=>{u.clearFieldErrors(U)})}catch(U){console.warn("設置當前時間失敗:",U);const ie=`${T.year}-${T.month.toString().padStart(2,"0")}-${T.day.toString().padStart(2,"0")}`,ce=o?`${(T.hour||0).toString().padStart(2,"0")}:${(T.minute||0).toString().padStart(2,"0")}:${(T.second||0).toString().padStart(2,"0")}`:null;p.inputDateValue.value=ie,o&&ce&&(p.inputTimeValue.value=ce);const le=p.updateFromInputs();await D(le)}},Z=()=>{$.focusFirstInput()};return{isDisabled:V,calendar:a.ref(i),...u,...p,...N,calendarMinDate:z,calendarMaxDate:L,getValidDefaultTime:A.getValidDefaultTime,setEmitters:I,validateDateInput:P,validateTimeInput:O,handleDateComplete:K,handleTimeComplete:re,handleCalendarSelect:X,handleTimeSelect:R,handleContainerClick:x,handleContainerMouseDown:N.handleContainerMouseDown,handleNavigateToDate:$.handleNavigateToDate,handleNavigateToTime:$.handleNavigateToTime,reset:F,validate:_,selectNow:q,focus:Z,focusFirstInput:$.focusFirstInput,focusLastInput:$.focusLastInput}}const ea={slate:{50:"oklch(98.4% 0.003 247.858)",100:"oklch(96.8% 0.007 247.896)",200:"oklch(92.9% 0.013 255.508)",300:"oklch(86.9% 0.022 252.894)",400:"oklch(70.4% 0.04 256.788)",500:"oklch(55.4% 0.046 257.417)",600:"oklch(44.6% 0.043 257.281)",700:"oklch(37.2% 0.044 257.287)",800:"oklch(27.9% 0.041 260.031)",900:"oklch(20.8% 0.042 265.755)",950:"oklch(12.9% 0.042 264.695)"},gray:{50:"oklch(98.5% 0.002 247.839)",100:"oklch(96.7% 0.003 264.542)",200:"oklch(92.8% 0.006 264.531)",300:"oklch(87.2% 0.01 258.338)",400:"oklch(70.7% 0.022 261.325)",500:"oklch(55.1% 0.027 264.364)",600:"oklch(44.6% 0.03 256.802)",700:"oklch(37.3% 0.034 259.733)",800:"oklch(27.8% 0.033 256.848)",900:"oklch(21% 0.034 264.665)",950:"oklch(13% 0.028 261.692)"},zinc:{50:"oklch(98.5% 0 0)",100:"oklch(96.7% 0.001 286.375)",200:"oklch(92% 0.004 286.32)",300:"oklch(87.1% 0.006 286.286)",400:"oklch(70.5% 0.015 286.067)",500:"oklch(55.2% 0.016 285.938)",600:"oklch(44.2% 0.017 285.786)",700:"oklch(37% 0.013 285.805)",800:"oklch(27.4% 0.006 286.033)",900:"oklch(21% 0.006 285.885)",950:"oklch(14.1% 0.005 285.823)"},neutral:{50:"oklch(98.5% 0 0)",100:"oklch(97% 0 0)",200:"oklch(92.2% 0 0)",300:"oklch(87% 0 0)",400:"oklch(70.8% 0 0)",500:"oklch(55.6% 0 0)",600:"oklch(43.9% 0 0)",700:"oklch(37.1% 0 0)",800:"oklch(26.9% 0 0)",900:"oklch(20.5% 0 0)",950:"oklch(14.5% 0 0)"},stone:{50:"oklch(98.5% 0.001 106.423)",100:"oklch(97% 0.001 106.424)",200:"oklch(92.3% 0.003 48.717)",300:"oklch(86.9% 0.005 56.366)",400:"oklch(70.9% 0.01 56.259)",500:"oklch(55.3% 0.013 58.071)",600:"oklch(44.4% 0.011 73.639)",700:"oklch(37.4% 0.01 67.558)",800:"oklch(26.8% 0.007 34.298)",900:"oklch(21.6% 0.006 56.043)",950:"oklch(14.7% 0.004 49.25)"},red:{50:"oklch(97.1% 0.013 17.38)",100:"oklch(93.6% 0.032 17.717)",200:"oklch(88.5% 0.062 18.334)",300:"oklch(80.8% 0.114 19.571)",400:"oklch(70.4% 0.191 22.216)",500:"oklch(63.7% 0.237 25.331)",600:"oklch(57.7% 0.245 27.325)",700:"oklch(50.5% 0.213 27.518)",800:"oklch(44.4% 0.177 26.899)",900:"oklch(39.6% 0.141 25.723)",950:"oklch(25.8% 0.092 26.042)"},orange:{50:"oklch(98% 0.016 73.684)",100:"oklch(95.4% 0.038 75.164)",200:"oklch(90.1% 0.076 70.697)",300:"oklch(83.7% 0.128 66.29)",400:"oklch(75% 0.183 55.934)",500:"oklch(70.5% 0.213 47.604)",600:"oklch(64.6% 0.222 41.116)",700:"oklch(55.3% 0.195 38.402)",800:"oklch(47% 0.157 37.304)",900:"oklch(40.8% 0.123 38.172)",950:"oklch(26.6% 0.079 36.259)"},amber:{50:"oklch(98.7% 0.022 95.277)",100:"oklch(96.2% 0.059 95.617)",200:"oklch(92.4% 0.12 95.746)",300:"oklch(87.9% 0.169 91.605)",400:"oklch(82.8% 0.189 84.429)",500:"oklch(76.9% 0.188 70.08)",600:"oklch(66.6% 0.179 58.318)",700:"oklch(55.5% 0.163 48.998)",800:"oklch(47.3% 0.137 46.201)",900:"oklch(41.4% 0.112 45.904)",950:"oklch(27.9% 0.077 45.635)"},yellow:{50:"oklch(98.7% 0.026 102.212)",100:"oklch(97.3% 0.071 103.193)",200:"oklch(94.5% 0.129 101.54)",300:"oklch(90.5% 0.182 98.111)",400:"oklch(85.2% 0.199 91.936)",500:"oklch(79.5% 0.184 86.047)",600:"oklch(68.1% 0.162 75.834)",700:"oklch(55.4% 0.135 66.442)",800:"oklch(47.6% 0.114 61.907)",900:"oklch(42.1% 0.095 57.708)",950:"oklch(28.6% 0.066 53.813)"},lime:{50:"oklch(98.6% 0.031 120.757)",100:"oklch(96.7% 0.067 122.328)",200:"oklch(93.8% 0.127 124.321)",300:"oklch(89.7% 0.196 126.665)",400:"oklch(84.1% 0.238 128.85)",500:"oklch(76.8% 0.233 130.85)",600:"oklch(64.8% 0.2 131.684)",700:"oklch(53.2% 0.157 131.589)",800:"oklch(45.3% 0.124 130.933)",900:"oklch(40.5% 0.101 131.063)",950:"oklch(27.4% 0.072 132.109)"},green:{50:"oklch(98.2% 0.018 155.826)",100:"oklch(96.2% 0.044 156.743)",200:"oklch(92.5% 0.084 155.995)",300:"oklch(87.1% 0.15 154.449)",400:"oklch(79.2% 0.209 151.711)",500:"oklch(72.3% 0.219 149.579)",600:"oklch(62.7% 0.194 149.214)",700:"oklch(52.7% 0.154 150.069)",800:"oklch(44.8% 0.119 151.328)",900:"oklch(39.3% 0.095 152.535)",950:"oklch(26.6% 0.065 152.934)"},emerald:{50:"oklch(97.9% 0.021 166.113)",100:"oklch(95% 0.052 163.051)",200:"oklch(90.5% 0.093 164.15)",300:"oklch(84.5% 0.143 164.978)",400:"oklch(76.5% 0.177 163.223)",500:"oklch(69.6% 0.17 162.48)",600:"oklch(59.6% 0.145 163.225)",700:"oklch(50.8% 0.118 165.612)",800:"oklch(43.2% 0.095 166.913)",900:"oklch(37.8% 0.077 168.94)",950:"oklch(26.2% 0.051 172.552)"},teal:{50:"oklch(98.4% 0.014 180.72)",100:"oklch(95.3% 0.051 180.801)",200:"oklch(91% 0.096 180.426)",300:"oklch(85.5% 0.138 181.071)",400:"oklch(77.7% 0.152 181.912)",500:"oklch(70.4% 0.14 182.503)",600:"oklch(60% 0.118 184.704)",700:"oklch(51.1% 0.096 186.391)",800:"oklch(43.7% 0.078 188.216)",900:"oklch(38.6% 0.063 188.416)",950:"oklch(27.7% 0.046 192.524)"},cyan:{50:"oklch(98.4% 0.019 200.873)",100:"oklch(95.6% 0.045 203.388)",200:"oklch(91.7% 0.08 205.041)",300:"oklch(86.5% 0.127 207.078)",400:"oklch(78.9% 0.154 211.53)",500:"oklch(71.5% 0.143 215.221)",600:"oklch(60.9% 0.126 221.723)",700:"oklch(52% 0.105 223.128)",800:"oklch(45% 0.085 224.283)",900:"oklch(39.8% 0.07 227.392)",950:"oklch(30.2% 0.056 229.695)"},sky:{50:"oklch(97.7% 0.013 236.62)",100:"oklch(95.1% 0.026 236.824)",200:"oklch(90.1% 0.058 230.902)",300:"oklch(82.8% 0.111 230.318)",400:"oklch(74.6% 0.16 232.661)",500:"oklch(68.5% 0.169 237.323)",600:"oklch(58.8% 0.158 241.966)",700:"oklch(50% 0.134 242.749)",800:"oklch(44.3% 0.11 240.79)",900:"oklch(39.1% 0.09 240.876)",950:"oklch(29.3% 0.066 243.157)"},blue:{50:"oklch(97% 0.014 254.604)",100:"oklch(93.2% 0.032 255.585)",200:"oklch(88.2% 0.059 254.128)",300:"oklch(80.9% 0.105 251.813)",400:"oklch(70.7% 0.165 254.624)",500:"oklch(62.3% 0.214 259.815)",600:"oklch(54.6% 0.245 262.881)",700:"oklch(48.8% 0.243 264.376)",800:"oklch(42.4% 0.199 265.638)",900:"oklch(37.9% 0.146 265.522)",950:"oklch(28.2% 0.091 267.935)"},indigo:{50:"oklch(96.2% 0.018 272.314)",100:"oklch(93% 0.034 272.788)",200:"oklch(87% 0.065 274.039)",300:"oklch(78.5% 0.115 274.713)",400:"oklch(67.3% 0.182 276.935)",500:"oklch(58.5% 0.233 277.117)",600:"oklch(51.1% 0.262 276.966)",700:"oklch(45.7% 0.24 277.023)",800:"oklch(39.8% 0.195 277.366)",900:"oklch(35.9% 0.144 278.697)",950:"oklch(25.7% 0.09 281.288)"},violet:{50:"oklch(96.9% 0.016 293.756)",100:"oklch(94.3% 0.029 294.588)",200:"oklch(89.4% 0.057 293.283)",300:"oklch(81.1% 0.111 293.571)",400:"oklch(70.2% 0.183 293.541)",500:"oklch(60.6% 0.25 292.717)",600:"oklch(54.1% 0.281 293.009)",700:"oklch(49.1% 0.27 292.581)",800:"oklch(43.2% 0.232 292.759)",900:"oklch(38% 0.189 293.745)",950:"oklch(28.3% 0.141 291.089)"},purple:{50:"oklch(97.7% 0.014 308.299)",100:"oklch(94.6% 0.033 307.174)",200:"oklch(90.2% 0.063 306.703)",300:"oklch(82.7% 0.119 306.383)",400:"oklch(71.4% 0.203 305.504)",500:"oklch(62.7% 0.265 303.9)",600:"oklch(55.8% 0.288 302.321)",700:"oklch(49.6% 0.265 301.924)",800:"oklch(43.8% 0.218 303.724)",900:"oklch(38.1% 0.176 304.987)",950:"oklch(29.1% 0.149 302.717)"},fuchsia:{50:"oklch(97.7% 0.017 320.058)",100:"oklch(95.2% 0.037 318.852)",200:"oklch(90.3% 0.076 319.62)",300:"oklch(83.3% 0.145 321.434)",400:"oklch(74% 0.238 322.16)",500:"oklch(66.7% 0.295 322.15)",600:"oklch(59.1% 0.293 322.896)",700:"oklch(51.8% 0.253 323.949)",800:"oklch(45.2% 0.211 324.591)",900:"oklch(40.1% 0.17 325.612)",950:"oklch(29.3% 0.136 325.661)"},pink:{50:"oklch(97.1% 0.014 343.198)",100:"oklch(94.8% 0.028 342.258)",200:"oklch(89.9% 0.061 343.231)",300:"oklch(82.3% 0.12 346.018)",400:"oklch(71.8% 0.202 349.761)",500:"oklch(65.6% 0.241 354.308)",600:"oklch(59.2% 0.249 0.584)",700:"oklch(52.5% 0.223 3.958)",800:"oklch(45.9% 0.187 3.815)",900:"oklch(40.8% 0.153 2.432)",950:"oklch(28.4% 0.109 3.907)"},rose:{50:"oklch(96.9% 0.015 12.422)",100:"oklch(94.1% 0.03 12.58)",200:"oklch(89.2% 0.058 10.001)",300:"oklch(81% 0.117 11.638)",400:"oklch(71.2% 0.194 13.428)",500:"oklch(64.5% 0.246 16.439)",600:"oklch(58.6% 0.253 17.585)",700:"oklch(51.4% 0.222 16.935)",800:"oklch(45.5% 0.188 13.697)",900:"oklch(41% 0.159 10.272)",950:"oklch(27.1% 0.105 12.094)"}};function ir(n){const e=n.match(/oklch\(\s*([0-9.]+)%?\s+([0-9.]+)\s+([0-9.]+)(?:\s*\/\s*([0-9.]+))?\s*\)/);if(!e)return null;const[t,r,o,l]=e.map(Number);return{lightness:r,chroma:o,hue:l}}function hl(n){n=n.replace(/^#/,""),n.length===3&&(n=n.split("").map(o=>o+o).join(""));const e=parseInt(n.slice(0,2),16)/255,t=parseInt(n.slice(2,4),16)/255,r=parseInt(n.slice(4,6),16)/255;return{r:e,g:t,b:r}}function pl(n){const{r:e,g:t,b:r}=n,o=e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4),l=t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4),s=r<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4),i=.4124*o+.3576*l+.1805*s,c=.2126*o+.7152*l+.0722*s,m=.0193*o+.1192*l+.9505*s,y=.95047,v=1,g=1.08883,M=i>.008856?Math.pow(i/y,1/3):7.787*i/y+16/116,w=c>.008856?Math.pow(c/v,1/3):7.787*c/v+16/116,h=m>.008856?Math.pow(m/g,1/3):7.787*m/g+16/116,f=116*w-16,d=500*(M-w),k=200*(w-h);return{l:f,a:d,b:k}}function gl(n){const{l:e,a:t,b:r}=n,o=Math.sqrt(t*t+r*r);let l=Math.atan2(r,t)*180/Math.PI;return l<0&&(l+=360),{l:e,c:o,h:l}}function yl(n){const e=hl(n),t=pl(e),r=gl(t);return{lightness:r.l,chroma:Math.min(r.c/150,.4),hue:r.h}}function vl(n,e){const t=Math.min(Math.abs(n.hue-e.hue),360-Math.abs(n.hue-e.hue)),r=t>60?30:5;return Math.sqrt(Math.pow((n.lightness-e.lightness)*1.5,2)+Math.pow((n.chroma-e.chroma)*2,2)+Math.pow(t/360*r,2)*100)}function $l(n){return n.startsWith("oklch(")}function Dl(n){return/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(n)}function kl(n){return n in ea}function cr(n){const e="violet";if(kl(n))return n;let t=null;if($l(n)?t=ir(n):Dl(n)&&(t=yl(n)),!t)return e;let r=e,o=1/0;for(const[l,s]of Object.entries(ea))for(const i of["300","400","500","600","700"]){const c=s[i];if(!c)continue;const m=ir(c);if(!m)continue;const y=vl(t,m);y<o&&(o=y,r=l)}return r}function Sl(n){return ea[n]||{}}class Ml{constructor(){me(this,"instances",new Map);me(this,"mediaQuery",null);me(this,"listeners",new Map);this.initializeSystemPreference()}initializeSystemPreference(){typeof window<"u"&&window.matchMedia&&(this.mediaQuery=window.matchMedia("(prefers-color-scheme: dark)"),this.mediaQuery.addEventListener("change",this.handleSystemThemeChange.bind(this)))}handleSystemThemeChange(e){const t=e.matches?"dark":"light";this.instances.forEach((r,o)=>{r.systemPreference=t,r.userPreference==="auto"&&this.updateCurrentMode(o)})}getSystemPreference(){return this.mediaQuery&&this.mediaQuery.matches?"dark":"light"}createInstance(e,t={}){const r=e||this.generateInstanceId(),o={currentMode:"light",userPreference:t.defaultMode||"auto",systemPreference:this.getSystemPreference(),color:cr(t.defaultColor||"violet"),instanceId:r};return this.instances.set(r,o),this.listeners.set(r,[]),this.updateCurrentMode(r),typeof document<"u"&&setTimeout(()=>{this.applyColorToDOM(r),this.applyModeToDOM(r)},0),r}destroyInstance(e){this.instances.delete(e),this.listeners.delete(e)}generateInstanceId(){return`vdt-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}updateCurrentMode(e){const t=this.instances.get(e);if(!t)return;const r=t.currentMode;t.userPreference==="auto"?t.currentMode=t.systemPreference:t.currentMode=t.userPreference,r!==t.currentMode&&(this.applyModeToDOM(e),this.notifyListeners(e))}applyModeToDOM(e){if(typeof document>"u")return;const t=this.instances.get(e);if(!t)return;const r=document.querySelector(`[data-vdt-instance="${e}"]`);if(!r){setTimeout(()=>this.applyModeToDOM(e),10);return}t.userPreference==="auto"?r.removeAttribute("data-vdt-mode"):r.setAttribute("data-vdt-mode",t.currentMode)}applyColorToDOM(e){if(typeof document>"u")return;const t=this.instances.get(e);if(!t)return;const r=document.querySelector(`[data-vdt-instance="${e}"]`);if(!r){setTimeout(()=>this.applyColorToDOM(e),10);return}const o=Sl(t.color);Object.entries(o).forEach(([l,s])=>{r.style.setProperty(`--color-vdt-theme-${l}`,s)})}notifyListeners(e){const t=this.instances.get(e),r=this.listeners.get(e);t&&r&&r.forEach(o=>o({...t}))}setMode(e,t){const r=this.instances.get(e);r&&(r.userPreference=t,this.updateCurrentMode(e))}setColor(e,t){const r=this.instances.get(e);if(!r)return;const o=cr(t);r.color=o,this.applyColorToDOM(e),this.notifyListeners(e)}getState(e){const t=this.instances.get(e);return t?{...t}:null}getThemeClasses(e){const t=this.instances.get(e);return t?{"vdt-datepicker":!0,"vdt-themed":!0,[`vdt-theme-${t.color}`]:!0,[`vdt-mode-${t.currentMode}`]:!0,"vdt-mode-auto":t.userPreference==="auto",[`vdt-instance-${e}`]:!0}:{}}getContainerAttributes(e){const t=this.instances.get(e);if(!t)return{};const r={"data-vdt-instance":e,"data-vdt-theme":t.color,"data-vdt-mode-preference":t.userPreference};return t.userPreference!=="auto"&&(r["data-vdt-mode"]=t.currentMode),r}reapplyTheme(e){this.applyColorToDOM(e),this.applyModeToDOM(e)}addListener(e,t){const r=this.listeners.get(e);return r?(r.push(t),()=>{const o=r.indexOf(t);o>-1&&r.splice(o,1)}):()=>{}}destroy(){this.mediaQuery&&this.mediaQuery.removeEventListener("change",this.handleSystemThemeChange.bind(this)),this.instances.clear(),this.listeners.clear()}}const $e=new Ml;function ur(n={}){const e=a.ref($e.createInstance(n.instanceId,{defaultColor:n.defaultColor,defaultMode:n.defaultMode})),t=a.ref($e.getState(e.value));let r=null;const o=a.computed(()=>{var d;return((d=t.value)==null?void 0:d.currentMode)==="dark"}),l=a.computed(()=>{var d;return((d=t.value)==null?void 0:d.currentMode)==="light"}),s=a.computed(()=>{var d;return((d=t.value)==null?void 0:d.userPreference)==="auto"}),i=a.computed(()=>{var d;return((d=t.value)==null?void 0:d.currentMode)||"light"}),c=a.computed(()=>{var d;return((d=t.value)==null?void 0:d.userPreference)||"auto"}),m=a.computed(()=>{var d;return((d=t.value)==null?void 0:d.systemPreference)||"light"}),y=a.computed(()=>{var d;return((d=t.value)==null?void 0:d.color)||"violet"}),v=a.computed(()=>e.value?$e.getThemeClasses(e.value):{}),g=a.computed(()=>e.value?$e.getContainerAttributes(e.value):{}),M=d=>{e.value&&$e.setColor(e.value,d)},w=d=>{e.value&&$e.setMode(e.value,d)},h=()=>{if(t.value)if(t.value.userPreference==="auto"){const d=t.value.currentMode==="light"?"dark":"light";w(d)}else{const d=t.value.currentMode==="light"?"dark":"light";w(d)}},f=a.computed(()=>typeof window>"u"?!1:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches!==void 0);return a.onMounted(async()=>{await a.nextTick(),t.value=$e.getState(e.value),r=$e.addListener(e.value,d=>{t.value=d}),setTimeout(()=>{$e.reapplyTheme(e.value)},10)}),a.onBeforeUnmount(()=>{r&&r(),e.value&&$e.destroyInstance(e.value)}),{instanceId:e,themeState:t,isDark:o,isLight:l,isAuto:s,currentMode:i,userPreference:c,systemPreference:m,currentColor:y,themeClasses:v,containerAttributes:g,supportsColorScheme:f,setColor:M,setMode:w,toggle:h,setLightMode:()=>w("light"),setDarkMode:()=>w("dark"),setAutoMode:()=>w("auto"),setRedTheme:()=>M("red"),setBlueTheme:()=>M("blue"),setGreenTheme:()=>M("green"),setVioletTheme:()=>M("violet"),setPurpleTheme:()=>M("purple"),setIndigoTheme:()=>M("indigo"),setTealTheme:()=>M("teal"),setCyanTheme:()=>M("cyan"),setSkyTheme:()=>M("sky"),setEmeraldTheme:()=>M("emerald")}}const bl={key:0},wl={key:0,class:"text-vdt-content"},Tl={key:1,class:"text-vdt-content-muted"},xl=["disabled"],El={key:0},dr=a.defineComponent({__name:"DatePicker",props:{modelValue:{default:null},customDefaultTime:{},autoFocusTimeAfterDate:{type:Boolean,default:!0},placeholderOverrides:{default:()=>({})},mode:{default:"auto"},theme:{default:()=>"violet"},calendar:{default:"gregory"},locale:{default:"zh-TW"},outputType:{default:"iso"},useStrictISO:{type:Boolean,default:!1},weekStartsOn:{default:0},minDate:{},maxDate:{},dateSeparator:{default:"-"},dateFormat:{default:"YYYY-MM-DD"},timeFormat:{default:"HH:mm:ss"},showTime:{type:Boolean,default:!0},enableSeconds:{type:Boolean,default:!0},use24Hour:{type:Boolean,default:!1},useLocalizedPeriod:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},inputEnabled:{type:Boolean,default:!0},required:{type:Boolean,default:!1},showClearButton:{type:Boolean,default:!0},showErrorMessage:{type:Boolean,default:!0},useI18n:{type:Boolean,default:!0},customErrorMessages:{default:()=>({})}},emits:["update:modelValue","change","validation"],setup(n,{expose:e,emit:t}){const r=n,{setLocale:o,getPlaceholderMessage:l}=Ze(r.locale),s=t,i=a.useSlots(),c=a.computed(()=>{const E={};return["no-years-display","month-selector"].forEach(W=>{i[W]&&(E[W]=i[W])}),Object.keys(i).forEach(W=>{W.startsWith("year-")&&(E[W]=i[W])}),E}),m=a.ref(null),y=a.ref(null),v=a.ref(null),g=a.ref(null),M=a.ref(r.dateFormat),w=a.ref(r.timeFormat),h=a.ref({}),f=fl({modelValue:r.modelValue,showTime:r.showTime,required:r.required,disabled:r.disabled,calendar:r.calendar,dateFormat:M.value,timeFormat:w.value,outputType:r.outputType,useStrictISO:r.useStrictISO,customDefaultTime:r.customDefaultTime,enableSeconds:r.enableSeconds,autoFocusTimeAfterDate:r.autoFocusTimeAfterDate,minDate:r.minDate,maxDate:r.maxDate,locale:r.locale},{containerRef:m,calendarRef:y,dateInputRef:v,timeInputRef:g});f.setEmitters({update:E=>s("update:modelValue",E),change:E=>s("change",E),validation:(E,W)=>s("validation",E,W)});const{themeClasses:d,containerAttributes:k,setColor:S,setMode:C,currentMode:b,isDark:V,isLight:u}=ur(),p=a.computed(()=>{const E=se(r.minDate,r.locale);return fe(E)}),$=a.computed(()=>{const E=se(r.maxDate,r.locale);return fe(E)}),N=a.computed(()=>M.value),A=a.computed(()=>r.calendar==="gregory"),z=a.computed(()=>!!(D.value&&D.value.trim())),L=a.computed(()=>{var W,te,ne,xe,St,Mt,bt;const E={selectDate:l("general.selectDate"),year:l("date.year"),month:l("date.month"),day:l("date.day"),hour:l("time.hour"),minute:l("time.minute"),second:l("time.second")};return{selectDate:((W=r.placeholderOverrides)==null?void 0:W.selectDate)||E.selectDate,hour:((te=r.placeholderOverrides)==null?void 0:te.hour)||E.hour,minute:((ne=r.placeholderOverrides)==null?void 0:ne.minute)||E.minute,second:((xe=r.placeholderOverrides)==null?void 0:xe.second)||E.second,year:((St=r.placeholderOverrides)==null?void 0:St.year)||E.year,month:((Mt=r.placeholderOverrides)==null?void 0:Mt.month)||E.month,day:((bt=r.placeholderOverrides)==null?void 0:bt.day)||E.day}}),Q=a.computed(()=>{var E;return((E=r.placeholderOverrides)==null?void 0:E.selectDate)||l("general.selectDate")}),j=a.computed(()=>({...f.mergedErrors.value,...h.value})),Y=a.computed(()=>{var E;return{...((E=f.mergedErrorParams)==null?void 0:E.value)||{}}}),I=a.computed(()=>Object.keys(j.value).length>0);a.onBeforeMount(()=>{if(o(r.locale),!Hn(r.dateFormat)){const E=r.dateFormat,W=zn(r.dateFormat);h.value.dateFormat=`日期格式不正確: "${E}" 已自動修復為 "${W}"`,console.warn(`日期格式 "${E}" 不正確，已自動修復為 "${W}"`),M.value=W}if(r.showTime&&!qn(r.timeFormat)){const E=r.timeFormat,W=Un(r.timeFormat);h.value.timeFormat=`時間格式不正確: "${E}" 已自動修復為 "${W}"`,console.warn(`時間格式 "${E}" 不正確，已自動修復為 "${W}"`),w.value=W}}),a.watch(()=>r.theme,E=>{E&&S(E)},{immediate:!0}),a.watch(()=>r.mode,E=>{C(E)},{immediate:!0}),a.watch(()=>r.locale,E=>{E&&o(E)},{immediate:!0}),e({focus:f.focus,reset:f.reset,validate:f.validate,selectNow:f.selectNow,getDateTime:()=>f.internalDateTime.value,setDateTime:E=>{f.setExternalValue(E)},setTheme:S,setDarkMode:()=>C("dark"),setLightMode:()=>C("light"),setAutoMode:()=>C("auto"),getCurrentMode:()=>b.value,isDarkMode:()=>V.value,isLightMode:()=>u.value,getErrors:()=>j.value,hasErrors:()=>I.value});const{inputDateValue:D,inputTimeValue:P,showCalendar:O,internalDateTime:K,calendarMinDate:re,calendarMaxDate:X,getValidDefaultTime:R,hasValue:x,validateDateInput:F,validateTimeInput:_,handleDateComplete:q,handleTimeComplete:Z,handleCalendarSelect:H,handleTimeSelect:T,handleContainerClick:U,handleContainerMouseDown:ie,handleNavigateToDate:ce,toggleCalendar:le,reset:de}=f;return(E,W)=>(a.openBlock(),a.createElementBlock(a.Fragment,null,[a.createElementVNode("div",a.mergeProps({class:["date-picker-wrapper relative w-full",[a.unref(d),E.showTime?"min-w-[300px]":"min-w-[150px]"]]},a.unref(k),{ref_key:"containerRef",ref:m}),[a.createElementVNode("div",{class:a.normalizeClass(["date-picker-container flex w-full items-center px-2 py-1 border border-gray-200 bg-vdt-surface text-vdt-content rounded-sm focus-within:ring-2 focus-within:border-vdt-theme-500 focus-within:ring-vdt-theme-200 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",[{"border-red-500 ring-2 ring-red-200":I.value}]])},[A.value&&E.inputEnabled?(a.openBlock(),a.createElementBlock("div",{key:0,class:a.normalizeClass(["flex w-full items-center justify-start gap-2",[E.disabled?"cursor-not-allowed cursor-event-none opacity-50":""]]),onClick:W[2]||(W[2]=a.withModifiers((...te)=>a.unref(U)&&a.unref(U)(...te),["stop"])),onMousedown:W[3]||(W[3]=(...te)=>a.unref(ie)&&a.unref(ie)(...te))},[a.createElementVNode("div",null,[a.createVNode(Kt,{ref_key:"dateInputRef",ref:v,modelValue:a.unref(D),"onUpdate:modelValue":W[0]||(W[0]=te=>a.isRef(D)?D.value=te:null),"year-placeholder":L.value.year,"month-placeholder":L.value.month,"day-placeholder":L.value.day,"min-date":p.value,"max-date":$.value,required:E.required,separator:E.dateSeparator,"date-format":N.value,onValidation:a.unref(F),onComplete:a.unref(q)},null,8,["modelValue","year-placeholder","month-placeholder","day-placeholder","min-date","max-date","required","separator","date-format","onValidation","onComplete"])]),E.showTime?(a.openBlock(),a.createElementBlock("div",bl,[a.createVNode(jt,{ref_key:"timeInputRef",ref:g,modelValue:a.unref(P),"onUpdate:modelValue":W[1]||(W[1]=te=>a.isRef(P)?P.value=te:null),"hour-placeholder":L.value.hour,"minute-placeholder":L.value.minute,"second-placeholder":L.value.second,"enable-seconds":E.enableSeconds,use24Hour:E.use24Hour,required:E.required,locale:E.locale,useLocalizedPeriod:E.useLocalizedPeriod,onValidation:a.unref(_),onComplete:a.unref(Z),onNavigateToDate:a.unref(ce)},null,8,["modelValue","hour-placeholder","minute-placeholder","second-placeholder","enable-seconds","use24Hour","required","locale","useLocalizedPeriod","onValidation","onComplete","onNavigateToDate"])])):a.createCommentVNode("",!0)],34)):(a.openBlock(),a.createElementBlock("button",{key:1,type:"button",class:a.normalizeClass(["flex w-full h-full items-center justify-start gap-1",{"cursor-not-allowed opacity-50":E.disabled}]),onClick:W[4]||(W[4]=a.withModifiers(te=>{var ne;return!E.disabled&&((ne=a.unref(le))==null?void 0:ne())},["stop"])),onKeydown:[W[5]||(W[5]=a.withKeys(a.withModifiers(te=>{var ne;return!E.disabled&&((ne=a.unref(le))==null?void 0:ne())},["prevent"]),["enter"])),W[6]||(W[6]=a.withKeys(a.withModifiers(te=>{var ne;return!E.disabled&&((ne=a.unref(le))==null?void 0:ne())},["prevent"]),["space"]))]},[z.value?(a.openBlock(),a.createElementBlock("span",wl,a.toDisplayString(E.modelValue),1)):(a.openBlock(),a.createElementBlock("span",Tl,a.toDisplayString(Q.value),1))],34)),a.createElementVNode("button",{type:"button",class:"date-picker-icon text-gray-400 hover:text-gray-600 transition-colors duration-200 cursor-pointer disabled:cursor-not-allowed",disabled:E.disabled,onClick:W[7]||(W[7]=a.withModifiers(te=>{var ne;return(ne=a.unref(le))==null?void 0:ne()},["stop","prevent"]))},[a.createVNode(rr,{class:"h-5 w-5"})],8,xl),a.unref(x)&&!E.disabled&&E.showClearButton?(a.openBlock(),a.createElementBlock("button",{key:2,type:"button",class:"date-picker-icon text-gray-400 hover:text-red-500 transition-colors duration-200 ml-1 cursor-pointer disabled:cursor-not-allowed",onClick:W[8]||(W[8]=a.withModifiers((...te)=>a.unref(de)&&a.unref(de)(...te),["stop"]))},[a.createVNode(lr,{class:"h-4 w-4"})])):a.createCommentVNode("",!0)],2),a.unref(O)&&!E.disabled?(a.openBlock(),a.createElementBlock("div",{key:0,ref_key:"calendarRef",ref:y,class:"calendar-container absolute mt-1 bg-vdt-surface-elevated border border-vdt-outline rounded-lg shadow-lg z-10",onClick:W[9]||(W[9]=a.withModifiers(()=>{},["stop"])),role:"dialog","aria-modal":"true","aria-label":"date-picker"},[a.createVNode(Qt,{value:a.unref(K),weekStartsOn:E.weekStartsOn,"min-date":a.unref(re),"max-date":a.unref(X),showTimeSelector:E.showTime,"time-value":a.unref(P),use24Hour:E.use24Hour,"default-time":a.unref(R),enableSeconds:E.enableSeconds,locale:E.locale,calendar:E.calendar,onSelect:a.unref(H),onTimeSelect:a.unref(T)},a.createSlots({_:2},[a.renderList(c.value,(te,ne)=>({name:ne,fn:a.withCtx(xe=>[a.renderSlot(E.$slots,ne,a.normalizeProps(a.guardReactiveProps(xe)))])}))]),1032,["value","weekStartsOn","min-date","max-date","showTimeSelector","time-value","use24Hour","default-time","enableSeconds","locale","calendar","onSelect","onTimeSelect"])],512)):a.createCommentVNode("",!0)],16),E.showErrorMessage&&I.value?(a.openBlock(),a.createElementBlock("div",El,[a.renderSlot(E.$slots,"error",{errors:j.value,hasErrors:I.value},()=>[a.createVNode(ar,{errors:j.value,locale:E.locale,"use-i18n":E.useI18n,"custom-messages":E.customErrorMessages,errorParams:Y.value},a.createSlots({_:2},[a.renderList(E.$slots,(te,ne)=>({name:ne,fn:a.withCtx(xe=>[a.renderSlot(E.$slots,ne,a.normalizeProps(a.guardReactiveProps(xe)))])}))]),1032,["errors","locale","use-i18n","custom-messages","errorParams"])])])):a.createCommentVNode("",!0)],64))}}),Cl={class:"dual-month-calendar flex flex-col gap-4 min-w-auto md:min-w-[570px] md:flex-row m-1"},Yl={class:"calendar-container flex-1 min-w-auto md:min-w-[275px]"},Rl={class:"calendar-container flex-1 md:min-w-[275px] min-w-auto"},Vl=a.defineComponent({__name:"DualMonthCalendar",props:{rangeStart:{default:null},rangeEnd:{default:null},minDate:{default:null},maxDate:{default:null},locale:{default:"en-US"},weekStartsOn:{default:0},calendar:{default:"gregory"},showTimeSelector:{type:Boolean,default:!1},startTimeValue:{default:null},endTimeValue:{default:null},enableSeconds:{type:Boolean,default:!0},use24Hour:{type:Boolean,default:!0},defaultTime:{default:"00:00:00"},initialYear:{default:()=>Le().year},initialMonth:{default:()=>Le().month}},emits:["range-select","time-select"],setup(n,{expose:e,emit:t}){const r=n,o=t,l=()=>{if(r.initialYear&&r.initialMonth)return{year:r.initialYear,month:r.initialMonth};if(r.rangeStart)return{year:r.rangeStart.year,month:r.rangeStart.month};const d=Le();return{year:d.year,month:d.month}},{year:s,month:i}=l(),c=a.ref(s),m=a.ref(i),y=a.computed(()=>m.value===12?c.value+1:c.value),v=a.computed(()=>m.value===12?1:m.value+1),g=a.ref({isSelecting:!1,tempStart:null});a.watch(()=>[r.rangeStart,r.rangeEnd],([d,k])=>{d&&!r.initialYear&&!r.initialMonth&&(c.value=d.year,m.value=d.month),d&&k?(g.value.isSelecting=!1,g.value.tempStart=null):d&&!k?(g.value.isSelecting=!0,g.value.tempStart=d):(g.value.isSelecting=!1,g.value.tempStart=null)},{immediate:!0,deep:!0});const M=(d,k)=>{if(!d){g.value.isSelecting=!1,g.value.tempStart=null,o("range-select",null,null);return}if(!g.value.isSelecting)g.value.isSelecting=!0,g.value.tempStart=d,o("range-select",d,null);else{const S=g.value.tempStart;if(S&&(d.year!==S.year||d.month!==S.month||d.day!==S.day)){g.value.isSelecting=!1,g.value.tempStart=null;const C=S.year*1e4+S.month*100+S.day,b=d.year*1e4+d.month*100+d.day;C<=b?o("range-select",S,d):o("range-select",d,S)}else g.value.tempStart=d,o("range-select",d,null)}},w=(d,k)=>{o("time-select",d,k)};return e({getCurrentDisplay:()=>({left:{year:c.value,month:m.value},right:{year:y.value,month:v.value}}),setDisplayMonth:(d,k)=>{c.value=d,m.value=k},resetRangeSelection:()=>{g.value.isSelecting=!1,g.value.tempStart=null},getSelectionState:()=>({isSelecting:g.value.isSelecting,tempStart:g.value.tempStart}),previousMonth:()=>{m.value===1?(m.value=12,c.value-=1):m.value-=1},nextMonth:()=>{m.value===12?(m.value=1,c.value+=1):m.value+=1}}),(d,k)=>(a.openBlock(),a.createElementBlock("div",Cl,[a.createElementVNode("div",Yl,[a.createVNode(Qt,{"range-start":d.rangeStart,"range-end":d.rangeEnd,"selection-mode":"range",year:c.value,month:m.value,"min-date":d.minDate,"max-date":d.maxDate,locale:d.locale,"week-starts-on":d.weekStartsOn,calendar:d.calendar,showTimeSelector:d.showTimeSelector,"time-value":d.startTimeValue,"enable-seconds":d.enableSeconds,"use24-hour":d.use24Hour,"default-time":d.defaultTime,onRangeSelect:M,onTimeSelect:k[0]||(k[0]=S=>w(S,"start"))},null,8,["range-start","range-end","year","month","min-date","max-date","locale","week-starts-on","calendar","showTimeSelector","time-value","enable-seconds","use24-hour","default-time"])]),a.createElementVNode("div",Rl,[a.createVNode(Qt,{"range-start":d.rangeStart,"range-end":d.rangeEnd,"selection-mode":"range",year:y.value,month:v.value,"min-date":d.minDate,"max-date":d.maxDate,locale:d.locale,"week-starts-on":d.weekStartsOn,calendar:d.calendar,showTimeSelector:d.showTimeSelector,"time-value":d.endTimeValue,"enable-seconds":d.enableSeconds,"use24-hour":d.use24Hour,"default-time":d.defaultTime,onRangeSelect:M,onTimeSelect:k[1]||(k[1]=S=>w(S,"end"))},null,8,["range-start","range-end","year","month","min-date","max-date","locale","week-starts-on","calendar","showTimeSelector","time-value","enable-seconds","use24-hour","default-time"])])]))}}),Dt="00:00:00",kt="23:59:59";function Il(n={},e){const{calendar:t="gregory",modelValue:r=null,showTime:o=!1,required:l=!1,disabled:s=!1,incomplete:i=!1,dateFormat:c="YYYY-MM-DD",timeFormat:m="HH:mm:ss",outputType:y="iso",useStrictISO:v=!1,enableSeconds:g=!1,minDate:M,maxDate:w,maxRange:h,minRange:f,locale:d="zh-TW"}=n,{containerRef:k,calendarRef:S,startDateInputRef:C,endDateInputRef:b,startTimeInputRef:V,endTimeInputRef:u}=e,p=a.ref(s);let $={};const N=Gt({required:l,showTime:o,minDate:M,maxDate:w,dateFormat:c}),A=Gt({required:l,showTime:o,minDate:M,maxDate:w,dateFormat:c}),z=Xt({showTime:o,dateFormat:c,timeFormat:m,outputType:y,defaultTime:Dt,enableSeconds:g}),L=Xt({showTime:o,dateFormat:c,timeFormat:m,outputType:y,defaultTime:kt,enableSeconds:g}),Q=sr(k,S,{disabled:p}),j=Zt({dateInputRef:C,timeInputRef:V},{showTime:o,autoFocusTimeAfterDate:!0}),Y=Zt({dateInputRef:b,timeInputRef:u},{showTime:o,autoFocusTimeAfterDate:!0}),I=a.computed(()=>z.hasValue.value||L.hasValue.value),D=a.computed(()=>{const B={...N.mergedErrors.value,...A.mergedErrors.value};return z.internalDateTime.value&&!L.internalDateTime.value&&i&&(B["range.endRequired"]="range.endRequired"),B}),P=a.computed(()=>({...N.mergedErrorParams.value,...A.mergedErrorParams.value})),O=a.computed(()=>Object.keys(D.value).length>0),K=a.computed(()=>{const B=z.internalDateTime.value,J=L.internalDateTime.value;if(!B||!J||vt(B,J)>0)return!1;if(h||f){const G=er(B,J);if(h&&G>h)return A.handleDateValidation(!1,{range:"range.exceedsMaxRange"},"endDate",{range:{maxRange:h,actualDays:G}}),!1;if(f&&G<f)return A.handleDateValidation(!1,{range:"range.belowMinRange"},"endDate",{range:{minRange:f,actualDays:G}}),!1;A.clearFieldErrors("range")}return!O.value}),re=a.computed(()=>[{label:"今天",getValue:()=>{const B=He();return{start:B,end:B}}},{label:"最近7天",getValue:()=>({start:Jt(He(),-6),end:He()})},{label:"最近30天",getValue:()=>({start:Jt(He(),-29),end:He()})},{label:"本月",getValue:Ln}]),X=a.computed(()=>({minDate:se(M,d),maxDate:L.internalDateTime.value||se(w,d)})),R=a.computed(()=>({minDate:z.internalDateTime.value||se(M,d),maxDate:se(w,d)})),x=a.computed(()=>({minDate:X.value.minDate?fe(X.value.minDate,c):null,maxDate:X.value.maxDate?fe(X.value.maxDate,c):null})),F=a.computed(()=>({minDate:R.value.minDate?fe(R.value.minDate,c):null,maxDate:R.value.maxDate?fe(R.value.maxDate,c):null}));function _(B,J){const G=er(B,J);return h&&G>h?{valid:!1,error:"range.exceedsMaxRange",params:{maxRange:h,actualDays:G}}:f&&G<f?{valid:!1,error:"range.belowMinRange",params:{minRange:f,actualDays:G}}:{valid:!0}}function q(B){!B.error||!B.params||A.handleDateValidation(!1,{range:B.error},"endDate",{range:B.params})}function Z(){var ge,wt,Ge,hr,pr;if(!z.internalDateTime.value||!L.internalDateTime.value){(ge=$.update)==null||ge.call($,null),(wt=$.change)==null||wt.call($,null);return}const B=o?`${c} ${m}`:c,J={start:yt(z.internalDateTime.value,y,B,o,t,d,v),end:yt(L.internalDateTime.value,y,B,o,t,d,v)};(Ge=$.update)==null||Ge.call($,J),(hr=$.change)==null||hr.call($,J);const G=K.value&&!O.value;(pr=$.validation)==null||pr.call($,G,D.value)}function H(B,J){J.forEach(G=>B.clearFieldErrors(G))}const T=B=>{$=B},U=(B,J,G,ge,wt)=>{var Ge;G.handleDateValidation(B,J,ge,wt),(Ge=$.validation)==null||Ge.call($,!O.value,D.value)},ie=(B,J,G)=>{U(B,J,N,"startDate",G)},ce=(B,J,G)=>{U(B,J,A,"endDate",G)},le=(B,J,G={})=>{var ge;N.handleTimeValidation(B,J,"startTime",G),(ge=$.validation)==null||ge.call($,!O.value,D.value)},de=(B,J,G={})=>{var ge;A.handleTimeValidation(B,J,"endTime",G),(ge=$.validation)==null||ge.call($,!O.value,D.value)},E=B=>{z.inputDateValue.value=B;const J=z.updateFromInputs();if(!J){N.handleDateValidation(!1,{date:"date.invalid"});return}N.validateDateRange(J)&&(j.autoFocusTimeAfterDateComplete(z,Dt),Z(),H(N,["startDate","date.year","date.month","date.day"]),o||Y.focusFirstInput())},W=B=>{L.inputDateValue.value=B;const J=L.updateFromInputs();if(!J){A.handleDateValidation(!1,{date:"date.invalid"});return}A.validateDateRange(J)&&(Y.autoFocusTimeAfterDateComplete(L,kt),Z(),H(A,["endDate","date.year","date.month","date.day"]))},te=B=>{z.inputTimeValue.value=B,z.updateFromInputs()&&Z(),H(N,["startTime","time.hour","time.minute","time.second"])},ne=B=>{L.inputTimeValue.value=B,L.updateFromInputs()&&Z(),H(A,["endTime","time.hour","time.minute","time.second"])},xe=(B,J)=>{B&&!J?St(B):B&&J?Mt(B,J):ta(),Z()};function St(B){N.validateDateRange(B)&&(z.setInternalDateTime(B),H(N,["startDate","date.year","date.month","date.day"]),L.clearValues())}function Mt(B,J){if(!(!N.validateDateRange(B)||!A.validateDateRange(J))){if(h||f){const G=_(B,J);if(!G.valid){q(G);return}}z.setInternalDateTime(B),L.setInternalDateTime(J),o&&(z.inputTimeValue.value||(z.inputTimeValue.value=Dt,z.updateFromInputs()),L.inputTimeValue.value||(L.inputTimeValue.value=kt,L.updateFromInputs())),H(N,["startDate","endDate","range","date.year","date.month","date.day"]),H(A,["startDate","endDate","range","date.year","date.month","date.day"])}}const bt=(B,J)=>{J==="start"&&z.internalDateTime.value&&te(B),J==="end"&&L.internalDateTime.value&&ne(B)},Xl=B=>{const J=B.getValue();z.setInternalDateTime(J.start),L.setInternalDateTime(J.end),o&&(z.inputTimeValue.value||(z.inputTimeValue.value=Dt,z.updateFromInputs()),L.inputTimeValue.value||(L.inputTimeValue.value=kt,L.updateFromInputs())),Z()},ta=()=>{z.clearValues(),L.clearValues(),N.clearAllErrors(),A.clearAllErrors(),Z()},es=B=>{B?(z.setExternalValue(B.start),L.setExternalValue(B.end)):ta(),Z()},ts=()=>{var B,J,G,ge;return(B=C.value)==null||B.validate(),(J=b.value)==null||J.validate(),o&&((G=V.value)==null||G.validate(),(ge=u.value)==null||ge.validate()),K.value},as=B=>{Q.handleContainerClick(B,()=>{j.focusFirstInput()})},rs=B=>{Q.handleContainerClick(B,()=>{Y.focusFirstInput()})};return a.watch(()=>r,B=>{if(B&&B.start&&B.end){const J=se(B.start,d),G=se(B.end,d);J&&G&&vt(J,G)>0?(console.warn("Initial date range has start > end, auto-swapping values"),z.setExternalValue(B.end),L.setExternalValue(B.start),setTimeout(()=>{Z()},0)):(z.setExternalValue(B.start),L.setExternalValue(B.end))}else B?(z.setExternalValue(B.start||null),L.setExternalValue(B.end||null)):(z.clearValues(),L.clearValues())},{immediate:!0}),{isDisabled:p,startDateConstraints:X,endDateConstraints:R,startDateConstraintsStr:x,endDateConstraintsStr:F,hasErrors:O,mergedErrors:D,mergedErrorParams:P,isValidRange:K,startDateTime:z,endDateTime:L,hasRangeValue:I,...Q,shortcuts:re,setEmitters:T,handleStartDateValidation:ie,handleEndDateValidation:ce,handleStartTimeValidation:le,handleEndTimeValidation:de,handleStartDateComplete:E,handleEndDateComplete:W,handleStartTimeComplete:te,handleEndTimeComplete:ne,handleCalendarRangeSelect:xe,handleTimeSelect:bt,handleStartNavigateToDate:j.handleNavigateToDate,handleEndNavigateToDate:Y.handleNavigateToDate,applyShortcut:Xl,clearRange:ta,setRange:es,validate:ts,focusStartDate:as,focusEndDate:rs}}const Bl=["disabled"],Ol={class:"flex-1 text-center whitespace-nowrap"},Fl={key:0,class:"text-vdt-content text-sm"},Nl={key:1,class:"text-vdt-content-muted text-sm"},Pl={class:"text-vdt-content-muted text-sm px-1"},Al={class:"flex-1 text-center whitespace-nowrap"},Ll={key:0,class:"text-vdt-content text-sm"},Hl={key:1,class:"text-vdt-content-muted text-sm"},ql=["disabled","title"],zl=["disabled"],Ul={class:"p-2 space-y-2"},Wl={key:0,class:"w-full flex flex-col md:flex-row flex-justify-between gap-2"},_l={key:1},Jl={class:"flex flex-wrap gap-2"},Kl=["onClick"],jl={key:2},Ql={class:"flex flex-wrap gap-2"},Zl={class:"calendar-container flex flex-col md:flex-row gap-1 overflow-auto"},Gl={key:0},mr=a.defineComponent({__name:"DateRange",props:{modelValue:{default:null},placeholderOverrides:{default:()=>({})},separator:{default:" ~ "},showShortcuts:{type:Boolean,default:!1},incomplete:{type:Boolean,default:!0},maxRange:{default:void 0},minRange:{default:void 0},mode:{default:"auto"},theme:{default:()=>"violet"},calendar:{default:"gregory"},locale:{default:"zh-TW"},outputType:{default:"iso"},useStrictISO:{type:Boolean,default:!1},weekStartsOn:{default:0},minDate:{default:void 0},maxDate:{default:void 0},dateSeparator:{default:"-"},dateFormat:{default:"YYYY-MM-DD"},timeFormat:{default:"HH:mm:ss"},showTime:{type:Boolean,default:!0},enableSeconds:{type:Boolean,default:!0},use24Hour:{type:Boolean,default:!0},useLocalizedPeriod:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},inputEnabled:{type:Boolean,default:!0},required:{type:Boolean,default:!1},showClearButton:{type:Boolean,default:!0},showErrorMessage:{type:Boolean,default:!0},useI18n:{type:Boolean,default:!0},customErrorMessages:{default:()=>({})}},emits:["update:modelValue","change","validation"],setup(n,{expose:e,emit:t}){const r=n,o=t,l=a.ref(null),s=a.ref(null),i=a.ref(null),c=a.ref(null),m=a.ref(null),y=a.ref(null),v=Il({calendar:r.calendar,modelValue:r.modelValue,showTime:r.showTime,required:r.required,disabled:r.disabled,dateFormat:r.dateFormat,timeFormat:r.timeFormat,outputType:r.outputType,useStrictISO:r.useStrictISO,enableSeconds:r.enableSeconds,minDate:r.minDate,maxDate:r.maxDate,maxRange:r.maxRange,minRange:r.minRange,incomplete:r.incomplete},{containerRef:l,calendarRef:s,startDateInputRef:i,endDateInputRef:c,startTimeInputRef:m,endTimeInputRef:y}),{setLocale:g,getPlaceholderMessage:M}=Ze(r.locale);v.setEmitters({update:T=>o("update:modelValue",T),change:T=>o("change",T),validation:(T,U)=>o("validation",T,U)});const{themeClasses:w,containerAttributes:h,setColor:f,setMode:d}=ur(),k=a.computed(()=>{var U,ie,ce,le,de,E,W,te;const T={start:M("range.start"),end:M("range.end"),year:M("date.year"),month:M("date.month"),day:M("date.day"),hour:M("time.hour"),minute:M("time.minute"),second:M("time.second")};return{start:((U=r.placeholderOverrides)==null?void 0:U.start)||T.start,end:((ie=r.placeholderOverrides)==null?void 0:ie.end)||T.end,hour:((ce=r.placeholderOverrides)==null?void 0:ce.hour)||T.hour,minute:((le=r.placeholderOverrides)==null?void 0:le.minute)||T.minute,second:((de=r.placeholderOverrides)==null?void 0:de.second)||T.second,year:((E=r.placeholderOverrides)==null?void 0:E.year)||T.year,month:((W=r.placeholderOverrides)==null?void 0:W.month)||T.month,day:((te=r.placeholderOverrides)==null?void 0:te.day)||T.day}}),S=a.computed(()=>r.dateFormat),C=a.computed(()=>Object.keys(z.value).length>0);a.watch(()=>r.theme,T=>{T&&f(T)},{immediate:!0}),a.watch(()=>r.mode,T=>{d(T)},{immediate:!0}),a.watch(()=>r.locale,T=>{T&&g(T)},{immediate:!0}),a.onBeforeMount(()=>{g(r.locale)}),e({reset:v.clearRange,validate:v.validate,setRange:v.setRange,focusStartDate:v.focusStartDate,focusEndDate:v.focusEndDate,setTheme:f,setDarkMode:()=>d("dark"),setLightMode:()=>d("light"),setAutoMode:()=>d("auto"),getErrors:()=>z.value,hasErrors:()=>C.value});const{showCalendar:b,startDateConstraintsStr:V,endDateConstraintsStr:u,shortcuts:p,startDateTime:$,endDateTime:N,hasRangeValue:A,mergedErrors:z,mergedErrorParams:L,handleStartDateValidation:Q,handleEndDateValidation:j,handleStartTimeValidation:Y,handleEndTimeValidation:I,handleStartDateComplete:D,handleEndDateComplete:P,handleStartTimeComplete:O,handleEndTimeComplete:K,handleCalendarRangeSelect:re,handleStartNavigateToDate:X,handleEndNavigateToDate:R,handleTimeSelect:x,toggleCalendar:F,applyShortcut:_,clearRange:q,focusStartDate:Z,focusEndDate:H}=v;return(T,U)=>{var ie,ce,le,de;return a.openBlock(),a.createElementBlock(a.Fragment,null,[a.createElementVNode("div",a.mergeProps({class:["date-range-wrapper md:min-w-auto relative w-full",[a.unref(w),T.showTime?"min-w-[300px]":"min-w-[200px]"]]},a.unref(h),{ref_key:"containerRef",ref:l}),[a.createElementVNode("div",{class:a.normalizeClass(["date-picker-container flex w-full items-center px-2 py-1 border border-gray-200 bg-vdt-surface text-vdt-content rounded-sm focus-within:ring-2 focus-within:border-vdt-theme-500 focus-within:ring-vdt-theme-200 transition-all duration-200",[{"border-red-500 ring-2 ring-red-200":C.value}]])},[a.createElementVNode("button",{type:"button",class:"flex items-center gap-1 flex-1 cursor-pointer transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:T.disabled,onClick:U[0]||(U[0]=(...E)=>a.unref(F)&&a.unref(F)(...E))},[a.createElementVNode("div",Ol,[(ie=T.modelValue)!=null&&ie.start?(a.openBlock(),a.createElementBlock("span",Fl,a.toDisplayString((ce=T.modelValue)==null?void 0:ce.start),1)):(a.openBlock(),a.createElementBlock("span",Nl,a.toDisplayString(k.value.start),1))]),a.createElementVNode("div",Pl,a.toDisplayString(T.separator),1),a.createElementVNode("div",Al,[(le=T.modelValue)!=null&&le.end?(a.openBlock(),a.createElementBlock("span",Ll,a.toDisplayString((de=T.modelValue)==null?void 0:de.end),1)):(a.openBlock(),a.createElementBlock("span",Hl,a.toDisplayString(k.value.end),1))])],8,Bl),a.unref(A)&&!T.disabled&&T.showClearButton?(a.openBlock(),a.createElementBlock("button",{key:0,type:"button",disabled:T.disabled,class:"text-gray-400 hover:text-red-500 transition-colors duration-200 cursor-pointer disabled:cursor-not-allowed",onClick:U[1]||(U[1]=(...E)=>a.unref(q)&&a.unref(q)(...E)),title:"清除日期"+(T.showTime?"時間":"")},[a.createVNode(lr,{class:"h-4 w-4"})],8,ql)):(a.openBlock(),a.createElementBlock("button",{key:1,type:"button",class:"text-gray-400 hover:text-gray-600 transition-colors duration-200 cursor-pointer disabled:cursor-not-allowed",disabled:T.disabled,onClick:U[2]||(U[2]=(...E)=>a.unref(F)&&a.unref(F)(...E))},[a.createVNode(rr,{class:"h-5 w-5"})],8,zl))],2),a.unref(b)&&!T.disabled?(a.openBlock(),a.createElementBlock("div",{key:0,ref_key:"calendarRef",ref:s,class:"absolute mt-1 bg-vdt-surface-elevated border border-vdt-outline rounded-lg shadow-lg z-10 overflow-auto md:min-w-[570px]",onClick:U[9]||(U[9]=a.withModifiers(()=>{},["stop"])),role:"dialog","aria-modal":"true","aria-label":"date-range-picker"},[a.createElementVNode("div",Ul,[T.inputEnabled?(a.openBlock(),a.createElementBlock("div",Wl,[a.createElementVNode("div",{onClick:U[5]||(U[5]=a.withModifiers((...E)=>a.unref(Z)&&a.unref(Z)(...E),["stop"])),class:"flex-1 flex w-full items-center px-2 py-1 gap-2 border border-vdt-outline bg-vdt-surface text-vdt-content rounded-sm focus-within:ring-2 focus-within:border-vdt-theme-500 focus-within:ring-vdt-theme-200 transition-all duration-200"},[a.createVNode(Kt,{ref_key:"startDateInputRef",ref:i,modelValue:a.unref($).inputDateValue.value,"onUpdate:modelValue":U[3]||(U[3]=E=>a.unref($).inputDateValue.value=E),"year-placeholder":k.value.year,"month-placeholder":k.value.month,"day-placeholder":k.value.day,"max-date":a.unref(V).maxDate,"min-date":a.unref(V).minDate,"date-format":S.value,onValidation:a.unref(Q),onComplete:a.unref(D)},null,8,["modelValue","year-placeholder","month-placeholder","day-placeholder","max-date","min-date","date-format","onValidation","onComplete"]),T.showTime?(a.openBlock(),a.createBlock(jt,{key:0,ref_key:"startTimeInputRef",ref:m,modelValue:a.unref($).inputTimeValue.value,"onUpdate:modelValue":U[4]||(U[4]=E=>a.unref($).inputTimeValue.value=E),"hour-placeholder":k.value.hour,"minute-placeholder":k.value.minute,"second-placeholder":k.value.second,"enable-seconds":T.enableSeconds,use24Hour:T.use24Hour,locale:T.locale,onValidation:a.unref(Y),onComplete:a.unref(O),onNavigateToDate:a.unref(X)},null,8,["modelValue","hour-placeholder","minute-placeholder","second-placeholder","enable-seconds","use24Hour","locale","onValidation","onComplete","onNavigateToDate"])):a.createCommentVNode("",!0)]),a.createElementVNode("div",{onClick:U[8]||(U[8]=a.withModifiers((...E)=>a.unref(H)&&a.unref(H)(...E),["stop"])),class:"flex-1 flex w-full items-center gap-2 px-2 py-1 border border-vdt-outline bg-vdt-surface text-vdt-content rounded-sm focus-within:ring-2 focus-within:border-vdt-theme-500 focus-within:ring-vdt-theme-200 transition-all duration-200"},[a.createVNode(Kt,{ref_key:"endDateInputRef",ref:c,modelValue:a.unref(N).inputDateValue.value,"onUpdate:modelValue":U[6]||(U[6]=E=>a.unref(N).inputDateValue.value=E),"year-placeholder":k.value.year,"month-placeholder":k.value.month,"day-placeholder":k.value.day,"min-date":a.unref(u).minDate,"max-date":a.unref(u).maxDate,"date-format":S.value,onValidation:a.unref(j),onComplete:a.unref(P)},null,8,["modelValue","year-placeholder","month-placeholder","day-placeholder","min-date","max-date","date-format","onValidation","onComplete"]),T.showTime?(a.openBlock(),a.createBlock(jt,{key:0,ref_key:"endTimeInputRef",ref:y,modelValue:a.unref(N).inputTimeValue.value,"onUpdate:modelValue":U[7]||(U[7]=E=>a.unref(N).inputTimeValue.value=E),"hour-placeholder":k.value.hour,"minute-placeholder":k.value.minute,"second-placeholder":k.value.second,"enable-seconds":T.enableSeconds,use24Hour:T.use24Hour,locale:T.locale,onValidation:a.unref(I),onComplete:a.unref(K),onNavigateToDate:a.unref(R)},null,8,["modelValue","hour-placeholder","minute-placeholder","second-placeholder","enable-seconds","use24Hour","locale","onValidation","onComplete","onNavigateToDate"])):a.createCommentVNode("",!0)])])):a.createCommentVNode("",!0),a.unref(p).length>0&&T.showShortcuts?(a.openBlock(),a.createElementBlock("div",_l,[a.createElementVNode("div",Jl,[(a.openBlock(!0),a.createElementBlock(a.Fragment,null,a.renderList(a.unref(p),E=>(a.openBlock(),a.createElementBlock("button",{key:E.label,type:"button",class:"px-3 py-1 text-xs bg-vdt-outline text-vdt-content hover:bg-vdt-interactive-hover rounded-sm transition-colors",onClick:W=>a.unref(_)(E)},a.toDisplayString(E.label),9,Kl))),128)),a.renderSlot(T.$slots,"shortcuts",{applyShortcut:a.unref(_),shortcuts:a.unref(p),currentRange:T.modelValue})])])):T.$slots.shortcuts&&T.showShortcuts?(a.openBlock(),a.createElementBlock("div",jl,[a.createElementVNode("div",Ql,[a.renderSlot(T.$slots,"shortcuts",{applyShortcut:a.unref(_),shortcuts:a.unref(p),currentRange:T.modelValue})])])):a.createCommentVNode("",!0),a.createElementVNode("div",Zl,[a.createVNode(Vl,{showTimeSelector:T.showTime,calendar:T.calendar,"range-start":a.unref($).internalDateTime.value,"range-end":a.unref(N).internalDateTime.value,enableSeconds:T.enableSeconds,use24Hour:T.use24Hour,locale:T.locale,"week-starts-on":T.weekStartsOn,"start-time-value":a.unref($).inputTimeValue.value,"end-time-value":a.unref(N).inputTimeValue.value,"min-date":a.unref(se)(T.minDate),"max-date":a.unref(se)(T.maxDate),onRangeSelect:a.unref(re),onTimeSelect:a.unref(x)},null,8,["showTimeSelector","calendar","range-start","range-end","enableSeconds","use24Hour","locale","week-starts-on","start-time-value","end-time-value","min-date","max-date","onRangeSelect","onTimeSelect"])])])],512)):a.createCommentVNode("",!0)],16),T.showErrorMessage&&C.value?(a.openBlock(),a.createElementBlock("div",Gl,[a.renderSlot(T.$slots,"error",{errors:a.unref(z),hasErrors:C.value},()=>[a.createVNode(ar,{errors:a.unref(z),locale:T.locale,"use-i18n":T.useI18n,"custom-messages":T.customErrorMessages,errorParams:a.unref(L)},a.createSlots({_:2},[a.renderList(T.$slots,(E,W)=>({name:W,fn:a.withCtx(te=>[a.renderSlot(T.$slots,W,a.normalizeProps(a.guardReactiveProps(te)))])}))]),1032,["errors","locale","use-i18n","custom-messages","errorParams"])])])):a.createCommentVNode("",!0)],64)}}}),fr={install(n){n.component("DatePicker",dr),n.component("DateRange",mr)}};ue.DatePicker=dr,ue.DateRange=mr,ue.VueDatePickerTailwind=fr,ue.default=fr,ue.formatSimpleDate=fe,ue.parseInputToSimpleDate=se,Object.defineProperties(ue,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
